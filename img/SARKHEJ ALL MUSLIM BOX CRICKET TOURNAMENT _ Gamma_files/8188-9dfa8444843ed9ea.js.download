(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8188],{89644:function(e,t,n){e.exports=n(25644)},70353:function(e,t,n){"use strict";var i=n(93044),r=n(86955),s=n(92233),o=n(68030),l=n(97948),a=n(51875),c=n(60842),d=n(88618);e.exports=function(e){return new Promise(function(t,n){var u=e.data,h=e.headers,x=e.responseType;i.isFormData(u)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(m+":"+f)}var g=l(e.baseURL,e.url);function j(){if(p){var i="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null;r(t,n,{data:x&&"text"!==x&&"json"!==x?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p}),p=null}}if(p.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=j:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(j)},p.onabort=function(){p&&(n(d("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(d("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(d(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var v=(e.withCredentials||c(g))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}"setRequestHeader"in p&&i.forEach(h,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)}),i.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),x&&"json"!==x&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),n(e),p=null)}),u||(u=null),p.send(u)})}},25644:function(e,t,n){"use strict";var i=n(93044),r=n(73644),s=n(62215),o=n(92937);function l(e){var t=new s(e),n=r(s.prototype.request,t);return i.extend(n,s.prototype,t),i.extend(n,t),n}var a=l(n(1439));a.Axios=s,a.create=function(e){return l(o(a.defaults,e))},a.Cancel=n(13148),a.CancelToken=n(34089),a.isCancel=n(98041),a.all=function(e){return Promise.all(e)},a.spread=n(70783),a.isAxiosError=n(65587),e.exports=a,e.exports.default=a},13148:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},34089:function(e,t,n){"use strict";var i=n(13148);function r(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},98041:function(e){"use strict";e.exports=function(e){return!!(e&&e.__CANCEL__)}},62215:function(e,t,n){"use strict";var i=n(93044),r=n(68030),s=n(946),o=n(6895),l=n(92937),a=n(17525),c=a.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},(e=l(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t,n=e.transitional;void 0!==n&&a.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var i=[],r=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(e))&&(r=r&&t.synchronous,i.unshift(t.fulfilled,t.rejected))});var s=[];if(this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)}),!r){var d=[o,void 0];for(Array.prototype.unshift.apply(d,i),d=d.concat(s),t=Promise.resolve(e);d.length;)t=t.then(d.shift(),d.shift());return t}for(var u=e;i.length;){var h=i.shift(),x=i.shift();try{u=h(u)}catch(e){x(e);break}}try{t=o(u)}catch(e){return Promise.reject(e)}for(;s.length;)t=t.then(s.shift(),s.shift());return t},d.prototype.getUri=function(e){return r((e=l(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){d.prototype[e]=function(t,n){return this.request(l(n||{},{method:e,url:t,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(e){d.prototype[e]=function(t,n,i){return this.request(l(i||{},{method:e,url:t,data:n}))}}),e.exports=d},946:function(e,t,n){"use strict";var i=n(93044);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},97948:function(e,t,n){"use strict";var i=n(99192),r=n(48762);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},88618:function(e,t,n){"use strict";var i=n(11935);e.exports=function(e,t,n,r,s){return i(Error(e),t,n,r,s)}},6895:function(e,t,n){"use strict";var i=n(93044),r=n(38556),s=n(98041),o=n(1439);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!s(t)&&(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},11935:function(e){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},92937:function(e,t,n){"use strict";var i=n(93044);e.exports=function(e,t){t=t||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function a(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function c(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}i.forEach(r,function(e){i.isUndefined(t[e])||(n[e]=a(void 0,t[e]))}),i.forEach(s,c),i.forEach(o,function(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])}),i.forEach(l,function(i){i in t?n[i]=a(e[i],t[i]):i in e&&(n[i]=a(void 0,e[i]))});var d=r.concat(s).concat(o).concat(l),u=Object.keys(e).concat(Object.keys(t)).filter(function(e){return -1===d.indexOf(e)});return i.forEach(u,c),n}},86955:function(e,t,n){"use strict";var i=n(88618);e.exports=function(e,t,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},38556:function(e,t,n){"use strict";var i=n(93044),r=n(1439);e.exports=function(e,t,n){var s=this||r;return i.forEach(n,function(n){e=n.call(s,e,t)}),e}},1439:function(e,t,n){"use strict";var i,r=n(34406),s=n(93044),o=n(98868),l=n(11935),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var d={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?i=n(70353):void 0!==r&&"[object process]"===Object.prototype.toString.call(r)&&(i=n(70353)),i),transformRequest:[function(e,t){return(o(t,"Accept"),o(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e))?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(s.isString(e))try{return(0,JSON.parse)(e),s.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,r=!n&&"json"===this.responseType;if(r||i&&s.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw l(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};d.headers={common:{Accept:"application/json, text/plain, */*"}},s.forEach(["delete","get","head"],function(e){d.headers[e]={}}),s.forEach(["post","put","patch"],function(e){d.headers[e]=s.merge(a)}),e.exports=d},73644:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},68030:function(e,t,n){"use strict";var i=n(93044);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;if(n)s=n(t);else if(i.isURLSearchParams(t))s=t.toString();else{var s,o=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))}))}),s=o.join("&")}if(s){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},48762:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},92233:function(e,t,n){"use strict";var i=n(93044);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var l=[];l.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),i.isString(r)&&l.push("path="+r),i.isString(s)&&l.push("domain="+s),!0===o&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},99192:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},65587:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},60842:function(e,t,n){"use strict";var i=n(93044);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},98868:function(e,t,n){"use strict";var i=n(93044);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},51875:function(e,t,n){"use strict";var i=n(93044),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e&&i.forEach(e.split("\n"),function(e){s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),n=i.trim(e.substr(s+1)),t&&!(o[t]&&r.indexOf(t)>=0)&&("set-cookie"===t?o[t]=(o[t]?o[t]:[]).concat([n]):o[t]=o[t]?o[t]+", "+n:n)}),o}},70783:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},17525:function(e,t,n){"use strict";var i=n(19521),r={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var s={},o=i.version.split(".");function l(e,t){for(var n=t?t.split("."):o,i=e.split("."),r=0;r<3;r++){if(n[r]>i[r])return!0;if(n[r]<i[r])break}return!1}r.transitional=function(e,t,n){var r=t&&l(t);function o(e,t){return"[Axios v"+i.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,l){if(!1===e)throw Error(o(i," has been removed in "+t));return r&&!s[i]&&(s[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,l)}},e.exports={isOlderVersion:l,assertOptions:function(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var s=i[r],o=t[s];if(o){var l=e[s],a=void 0===l||o(l,s,e);if(!0!==a)throw TypeError("option "+s+" must be "+a);continue}if(!0!==n)throw Error("Unknown option "+s)}},validators:r}},93044:function(e,t,n){"use strict";var i=n(73644),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function a(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function d(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:a,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return l(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function n(n,i){a(t[i])&&a(n)?t[i]=e(t[i],n):a(n)?t[i]=e({},n):s(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)d(arguments[i],n);return t},extend:function(e,t,n){return d(t,function(t,r){n&&"function"==typeof t?e[r]=i(t,n):e[r]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},6185:function(e){var t="function"==typeof Float32Array;function n(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function i(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}function r(e){return e}e.exports=function(e,s,o,l){if(!(0<=e&&e<=1&&0<=o&&o<=1))throw Error("bezier x values must be in [0, 1] range");if(e===s&&o===l)return r;for(var a=t?new Float32Array(11):Array(11),c=0;c<11;++c)a[c]=n(.1*c,e,o);return function(t){return 0===t?0:1===t?1:n(function(t){for(var r=0,s=1;10!==s&&a[s]<=t;++s)r+=.1;var l=r+(t-a[--s])/(a[s+1]-a[s])*.1,c=i(l,e,o);return c>=.001?function(e,t,r,s){for(var o=0;o<4;++o){var l=i(t,r,s);if(0===l)break;var a=n(t,r,s)-e;t-=a/l}return t}(t,l,e,o):0===c?l:function(e,t,i,r,s){var o,l,a=0;do(o=n(l=t+(i-t)/2,r,s)-e)>0?i=l:t=l;while(Math.abs(o)>1e-7&&++a<10);return l}(t,r,r+.1,e,o)}(t),s,l)}}},10161:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var l=new r(i,s||e,o),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],l]:e._events[a].push(l):(e._events[a]=l,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1)),l.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=Array(s);r<s;r++)o[r]=i[r].fn;return o},l.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,r,s,o){var l=n?n+e:e;if(!this._events[l])return!1;var a,c,d=this._events[l],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,r),!0;case 5:return d.fn.call(d.context,t,i,r,s),!0;case 6:return d.fn.call(d.context,t,i,r,s,o),!0}for(c=1,a=Array(u-1);c<u;c++)a[c-1]=arguments[c];d.fn.apply(d.context,a)}else{var h,x=d.length;for(c=0;c<x;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,i);break;case 4:d[c].fn.call(d[c].context,t,i,r);break;default:if(!a)for(h=1,a=Array(u-1);h<u;h++)a[h-1]=arguments[h];d[c].fn.apply(d[c].context,a)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var l=this._events[s];if(l.fn)l.fn!==t||r&&!l.once||i&&l.context!==i||o(this,s);else{for(var a=0,c=[],d=l.length;a<d;a++)(l[a].fn!==t||r&&!l[a].once||i&&l[a].context!==i)&&c.push(l[a]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l},41857:function(e){"use strict";let t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);e.exports=e=>!t.has(e&&e.code)},68642:function(e,t){(function(){(null!==t?t:this).Lethargy=function(){function e(e,t,n,i){this.stability=null!=e?Math.abs(e):8,this.sensitivity=null!=t?1+Math.abs(t):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.lastDownDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.deltasTimestamp=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this)}return e.prototype.check=function(e){var t;return(null!=(e=e.originalEvent||e).wheelDelta?t=e.wheelDelta:null!=e.deltaY?t=-40*e.deltaY:(null!=e.detail||0===e.detail)&&(t=-40*e.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),t>0)?(this.lastUpDeltas.push(t),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(t),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(e){var t,n,i,r,s,o;return null===(t=-1===e?this.lastDownDeltas:this.lastUpDeltas)[0]?e:(!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now())||t[0]!==t[2*this.stability-1])&&(i=t.slice(0,this.stability),n=t.slice(this.stability,2*this.stability),o=i.reduce(function(e,t){return e+t}),s=n.reduce(function(e,t){return e+t}),!!(Math.abs(o/i.length)<Math.abs((r=s/n.length)*this.tolerance)&&this.sensitivity<Math.abs(r))&&e)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(this)},84538:function(e,t,n){"use strict";n.d(t,{N:function(){return ej}});var i=n(52322),r=n(69251),s=n(30523),o=n(28535),l=n(42946),a=n(54933),c=n(5879),d=n(2784),u=n(46692),h=n(51535),x=n(13867),p=n(91309),m=n(95453),f=n(71383),g=n(93199),j=n(17993),v=n(5740),C=n(43297),b=n(29117),y=n(77533),k=n(49929),w=n(78456),S=n(95647),E=n(43574);let I=(0,d.memo)(()=>{let[e]=(0,S.Ns)("editorMode"),t=(0,w.A)(E.c);return(0,i.jsxs)(j.g,{spacing:3,align:"stretch",children:[(0,i.jsx)(o.xu,{fontSize:"sm",children:(0,i.jsx)(c.cC,{id:"x4f8pZ"})}),"freeform"===e?(0,i.jsx)(A,{title:t.freeform.label(),icon:t.freeform.icon,children:(0,i.jsx)(c.cC,{id:"ELg7Zs",values:{0:t.freeform.label()}})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A,{title:t.structured.label(),icon:t.structured.icon,children:(0,i.jsx)(c.cC,{id:"iKG7iK",values:{0:t.structured.label()}})}),(0,i.jsx)(A,{title:(0,i.jsx)(c.cC,{id:"+mgW41"}),icon:l.Yai,children:(0,i.jsx)(c.cC,{id:"oGNrqw",components:{0:(0,i.jsx)(v.T,{})}})}),(0,i.jsx)(A,{title:(0,i.jsx)(c.cC,{id:"1Nr9Bi"}),icon:a.BDt,children:(0,i.jsx)(c.cC,{id:"5cPTto",components:{0:(0,i.jsx)(v.T,{})}})})]})]})});I.displayName="AIGeneratorTips";let A=e=>{let{icon:t,title:n,children:r}=e;return(0,i.jsx)(o.xu,{p:4,borderRadius:"md",bg:"whiteAlpha.700",children:(0,i.jsxs)(C.K,{color:"gray.700",spacing:"1",children:[(0,i.jsxs)(b.U,{spacing:"1",fontSize:"sm",children:[null!==t&&(0,i.jsx)(k.G,{icon:t}),(0,i.jsx)(y.x,{fontWeight:"600",color:"gray.800",children:n})]}),(0,i.jsx)(y.x,{fontSize:"sm",children:r})]})})};var T=n(96023),_=n(15550),O=n(74090),D=n(87651),R=n(62614);let P=(0,d.memo)(()=>{let e=(0,f.TL)(),t=(0,f.qr)(),n=(0,f.CG)(g.Zm),r=(0,f.CG)(g.d_),s=(0,f.CG)(g.Vn),a=(0,S.o7)(),u=(0,d.useCallback)(()=>{let n=(0,g.jj)(t.getState()).find(e=>e.isDraft);n&&e((0,g.J7)({num:n.num}))},[e,t]);return(0,i.jsx)(o.xu,{children:n&&(0,i.jsx)(D.U,{in:s,children:(0,i.jsxs)(C.K,{direction:{base:"column",md:"row"},alignItems:{base:"stretch",md:"center"},spacing:4,bg:"white",p:"4",borderRadius:"lg",boxShadow:"sm",children:[(0,i.jsxs)(b.U,{flex:"1",children:[(0,i.jsx)(k.G,{icon:l.On6}),(0,i.jsxs)(C.K,{spacing:0,children:[(0,i.jsx)(y.x,{fontWeight:"600",fontSize:"lg",children:(0,i.jsx)(c.cC,{id:"YU/AK+",values:{0:null==r?void 0:r.num}})}),(0,i.jsx)(y.x,{children:(0,i.jsx)(c.cC,{id:"J4c0Rh"})})]})]}),(0,i.jsx)(R.z,{variant:"solid",colorScheme:"primary",onClick:a,children:(0,i.jsx)(c.cC,{id:"u52q7m"})}),(0,i.jsx)(R.z,{onClick:u,variant:"plain",children:(0,i.jsx)(c.cC,{id:"dEgA5A"})})]})})})});P.displayName="OverrideDraftWarning";var L=n(75768),z=n(32899),G=n(10625),N=n(67046),M=n(332),U=n(99058),F=n(44035),W=n(39237),H=n(27599),q=n(64253),B=n(18149),V=n.n(B),K=n(41019);let Y={size:"sm",variant:"ghost",colorScheme:"gray",color:"gray.800"},Z=(0,d.memo)(()=>{let e=(0,f.qr)(),t=(0,f.TL)(),n=(0,S.vS)(),r=(0,f.CG)(g.jj,(e,t)=>V()(e,t)),{hideTooltips:s,GammaTooltipHiderContext:a}=(0,q.o5)(),u=(0,f.CG)(g.Zm),h=(0,d.useCallback)(()=>{t((0,g.ly)()),n((0,g.au)(e.getState()),!1),(0,K.oB)({changeType:"next"})},[t,n,e]),x=(0,d.useCallback)(()=>{t((0,g.np)()),n((0,g.au)(e.getState()),!1),(0,K.oB)({changeType:"prev"})},[t,n,e]),p=(0,d.useCallback)(i=>{t((0,g.J7)({num:i})),n((0,g.au)(e.getState()),!1),(0,K.oB)({changeType:"load",version:i})},[t,n,e]);if(0===r.length)return null;let m=r.findIndex(e=>e.isCurrent),j=r[m],v=m<r.length-1;return u?(0,i.jsxs)(L.h,{isAttached:!0,bg:"whiteAlpha.500",borderRadius:"md",children:[(0,i.jsx)(z.h,{display:{base:"none",md:"inline-flex"},isDisabled:!(m>0),"aria-label":"previous version",onClick:x,...Y,icon:(0,i.jsx)(k.G,{icon:l.A35,fixedWidth:!0})}),(0,i.jsxs)(G.v,{closeOnSelect:!0,children:[(0,i.jsx)(a,{children:(0,i.jsx)(q.kH,{label:"Version ".concat(j.num," ").concat(j.isDraft?"(current draft)":""),closeOnClick:!1,children:(0,i.jsx)(N.j,{colorScheme:"gray",minW:"10",size:"sm",as:R.z,variant:"ghost",onClick:()=>{s()},children:j.num})})}),(0,i.jsx)(M.h,{children:(0,i.jsxs)(U.q,{maxW:"260px",children:[(0,i.jsx)(F._,{title:"Version history",type:"radio",value:String(j.num),children:[...r].reverse().map((e,t)=>(0,i.jsx)(W.i,{value:String(e.num),onClick:()=>{p(e.num),setTimeout(()=>{s()},0)},children:(0,i.jsxs)(y.x,{children:["Version ",e.num," ",e.isDraft&&"(current draft)"]})},t))}),(0,i.jsx)(H.R,{}),(0,i.jsx)(o.xu,{py:1,px:2,children:(0,i.jsx)(y.x,{fontSize:"xs",children:(0,i.jsx)(c.cC,{id:"gdzgeC"})})})]})})]}),(0,i.jsx)(z.h,{display:{base:"none",md:"inline-flex"},isDisabled:!v,onClick:h,"aria-label":"next version",...Y,icon:(0,i.jsx)(k.G,{icon:l._tD,fixedWidth:!0})})]}):null});Z.displayName="VersionSwitcher";var J=n(67109),X=n(49259),Q=n(74008),$=n(85408),ee=n(26112),et=n(35183),en=n(97166),ei=n(29494),er=n(87254),es=n(61652),eo=n(72396),el=n(6476),ea=n(84223),ec=n(85652);let ed=(0,d.memo)(()=>{var e;let{format:t,styleTemplate:n,setStyleTemplate:r}=(0,S.$q)(),s=(0,w.A)(el._J);return(0,i.jsx)(ec.j,{label:(0,i.jsx)(c.cC,{id:"kI1qVD"}),colorScheme:"orchid",icon:a.Y$l,values:[s[t].label(),n&&(null===(e=es.STYLE_TEMPLATES[n])||void 0===e?void 0:e.label())],testId:"format-settings-group",children:(0,i.jsxs)(j.g,{spacing:2,align:"start",children:[(0,i.jsxs)(et.NI,{children:[(0,i.jsx)(el.FQ,{wrap:!0}),n&&(0,i.jsx)(ea.A,{docFormatType:t,onSelectStyleTemplate:r,selectedStyleTemplate:n})]}),(0,i.jsxs)(et.NI,{children:[(0,i.jsx)(en.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(c.cC,{id:"G57+qO"})}),(0,i.jsx)(eu,{})]})]})})});ed.displayName="FormatSettingsGroup";let eu=(0,d.memo)(()=>{let[e,t]=(0,S.Q_)(),n=(0,d.useCallback)(e=>t(e.target.value),[t]);return(0,i.jsx)(ei.g,{value:e||"",onChange:n,bg:"white",placeholder:er.ag._({id:"LLAa/9"}),maxLength:eo.V4})});eu.displayName="PromptInput";var eh=n(46669),ex=n(4816);let ep=(0,d.memo)(e=>{let{isLoading:t}=e,n=(0,f.CG)(g.Vn);return(0,i.jsxs)(j.g,{flex:"1",overflow:"hidden auto",spacing:3,align:"start",alignItems:"stretch",transition:"all 300ms ease",opacity:n?.75:1,pointerEvents:n?"none":"inherit",cursor:n?"not-allowed":"default",children:[(0,i.jsxs)(o.xu,{fontSize:"sm",children:[(0,i.jsx)(c.cC,{id:"Tz0i8g"})," ",(0,i.jsx)(q.Yq,{label:(0,i.jsx)(c.cC,{id:"FDel/s"})})]}),t?(0,i.jsxs)(C.K,{children:[(0,i.jsx)(J.O,{height:16}),(0,i.jsx)(J.O,{height:16}),(0,i.jsx)(J.O,{height:16})]}):(0,i.jsxs)(X.U,{allowMultiple:!0,defaultIndex:[0],allowToggle:!0,as:C.K,w:"100%",bg:"white",borderRadius:"lg",overflow:"hidden",spacing:0,divider:(0,i.jsx)(Q.i,{}),boxShadow:"sm",children:[(0,i.jsx)(ex.o,{}),(0,i.jsx)(eh.Td,{}),(0,i.jsx)(ed,{})]}),(0,i.jsx)(o.xu,{display:{base:"none",lg:"block"},children:(0,i.jsx)(em,{})})]})});ep.displayName="AIGeneratorSettings";let em=(0,d.memo)(()=>{let e=(0,f.CG)(g.mO),{maxTokens:t}=(0,ee.ml)();return(0,i.jsx)($.H,{charCount:e,max:t,shouldShow:!0})});em.displayName="AIGeneratorCharacterCount";var ef=n(93088),eg=n(75863);let ej=(0,d.memo)(()=>{let[e,t]=(0,d.useState)("outline"),{skipThemeStep:n}=(0,u.Ry)(),j=(0,f.TL)(),v=(0,m.E)()?a.acZ:a.eFW,C=(0,m.E)()?l.eFW:l.acZ;(0,d.useEffect)(()=>()=>{j((0,g.fB)())},[j]);let b=(0,d.useCallback)(()=>{t("outline")},[]),y="theme"===e?void 0:(0,i.jsx)(c.cC,{id:"opD9db"});return(0,i.jsx)(p.jX,{children:(0,i.jsxs)(T.v4,{children:[(0,i.jsx)(O.D,{onClick:"theme"===e?b:void 0,navIconOverride:"theme"===e?C:void 0,navLabelOverride:"theme"===e?(0,i.jsx)(c.cC,{id:"iH8pgl"}):void 0,styleProps:"theme"===e?{position:"absolute"}:void 0,pageTitle:y,rightItem:"outline"===e?(0,i.jsx)(Z,{}):void 0}),"outline"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.r,{templateAreas:{base:'"overrideWarning" \n                   "settings" \n                   "editor"\n                   "tips"',md:'"overrideWarning overrideWarning"\n                   "settings editor"\n                   "tips editor"',xl:'". overrideWarning ." \n                 "settings editor tips" \n                 "settings editor tips"'},gridTemplateColumns:{base:"1fr",md:"2fr 3fr",xl:"3fr 6fr 3fr"},gridTemplateRows:{base:"auto",md:"auto auto 1fr",xl:"auto"},gap:4,mx:"auto",alignItems:"flex-start",p:{base:4,lg:6},pt:{base:4,lg:4},maxW:"1800px",children:[(0,i.jsx)(s.P,{area:"overrideWarning",children:(0,i.jsx)(P,{})}),(0,i.jsx)(s.P,{area:"settings",alignSelf:"start",children:(0,i.jsx)(ep,{isLoading:!1})}),(0,i.jsx)(s.P,{area:"editor",h:"100%",children:(0,i.jsx)(_.e,{showTopbar:!0,showAddBreaks:!0,enableModes:!0,containerProps:{minH:{base:"40vh",lg:"60vh"},fontSize:"16px"},showContentTip:!0})}),(0,i.jsx)(s.P,{area:"tips",children:(0,i.jsx)(I,{})})]}),(0,i.jsx)(o.xu,{height:"20vh"})," ",(0,i.jsx)(eg.U,{cta:n?(0,i.jsx)(x.j,{children:(0,i.jsx)(c.cC,{id:"ziAjHi"})}):(0,i.jsx)(ef.O,{arrowIcon:v,onClick:()=>t("theme")})})]}):"theme"===e?(0,i.jsx)(h.O,{}):null]})})});ej.displayName="AIGeneratorPage"},91e3:function(e,t,n){"use strict";n.d(t,{j:function(){return et}});var i=n(52322),r=n(70065),s=n(43297),o=n(28535),l=n(77533),a=n(11082),c=n(17993),d=n(74409),u=n(62614),h=n(17190),x=n(54933),p=n(49929),m=n(5879),f=n(87254),g=n(2784),j=n(85949),v=n(74810),C=n(21829),b=n(25556),y=n(37012),k=n(5165),w=n(71383),S=n(31601),E=n(55898),I=n(98835),A=n(61652),T=n(5632),_=n(91076);let O=()=>{let[e]=(0,j.JBp)();return(0,g.useCallback)(async t=>{var n;let{settings:i}=t,r=await e({variables:{input:{workspaceId:(0,_.n_)(),generationType:j.FJd.UploadPptV2,input:{prompt:i.filename,format:j.j6H.Deck,settings:i}}}});if(r.errors)throw Error("Got the following graphql errors:\n\n"+r.errors.map(e=>e.message).join("\n\n"));return null===(n=r.data)||void 0===n?void 0:n.createDocGeneration},[e])},D=()=>{let e=O(),{push:t}=(0,T.useRouter)(),[n,i]=(0,g.useState)(!1),[r,s]=(0,g.useState)(null);return{continueToPptImport:(0,g.useCallback)(async n=>{if(i(!0),!n.filename||!n.fileUrl||!n.slideHtml)throw Error("Unable to continue, no fileUrl from ImportedFile");let r={htmlUrl:n.htmlUrl,filename:n.filename,fileUrl:n.fileUrl,numSlides:n.slideHtml.length};try{let n=await e({settings:r});if(!n)throw Error("Unable to create doc generation");t("/create/import-ppt/".concat(n.id))}catch(e){s(e.message),i(!1)}},[e,t]),isLoading:n,error:r}};var R=n(95647),P=n(2309),L=n(93199),z=n(66266),G=n(74957),N=n(82863),M=n(95405),U=n(96023),F=n(16791),W=n(74090);let H=e=>{let{children:t}=e;return(0,i.jsx)(N.rg,{clientId:M.v.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,i.jsxs)(U.v4,{children:[(0,i.jsx)(W.D,{}),(0,i.jsx)(F.U,{title:(0,i.jsx)(m.cC,{id:"eumYBf"}),subtitle:(0,i.jsx)(m.cC,{id:"7aFH7x"}),icon:(0,i.jsx)(p.G,{icon:x.Vmj}),iconBoxProps:{color:"purple.300"},children:(0,i.jsx)(h.W,{maxW:"4xl",display:"flex",flexDirection:"column",alignItems:"center",children:t})})]})})};var q=n(29117),B=n(36474),V=n(32899),K=n(42946),Y=n(64253);let Z=e=>{let{importedFile:t,handleDelete:n}=e;return(0,i.jsx)(c.g,{spacing:4,align:"stretch",w:"100%",children:(0,i.jsxs)(q.U,{justifyContent:"center",bg:"white",py:3,px:4,spacing:4,borderRadius:"md",shadow:"sm",children:[(0,i.jsx)(o.xu,{color:"green.500",fontSize:"lg",children:(0,i.jsx)(p.G,{icon:x.f8k})}),(0,i.jsx)(l.x,{noOfLines:1,children:null==t?void 0:t.filename}),(0,i.jsx)(B.L,{}),(0,i.jsx)(Y.kH,{placement:"top",label:(0,i.jsx)(m.cC,{id:"cILfnJ"}),children:(0,i.jsx)(V.h,{onClick:n,variant:"ghost",colorScheme:"red","aria-label":f.ag._({id:"cILfnJ"}),icon:(0,i.jsx)(p.G,{icon:K.Vui})})})]})})};var J=n(82655),X=n(6476);let Q=(0,g.memo)(e=>{let{value:t,onSelect:n}=e;return(0,i.jsxs)(s.K,{direction:"row",mb:4,w:"100%",justifyContent:"center",children:[(0,i.jsx)(o.xu,{flex:"1",children:(0,i.jsx)(X.qe,{label:(0,i.jsx)(m.cC,{id:"hEgO4f"}),icon:J.JyM,selectedIcon:x.JyM,onClick:()=>{n("text")},isSelected:"text"===t,description:(0,i.jsx)(m.cC,{id:"9GItSL",components:{0:(0,i.jsx)("strong",{})}})})}),(0,i.jsx)(o.xu,{flex:"1",children:(0,i.jsx)(X.qe,{label:(0,i.jsx)(m.cC,{id:"Mm48EF"}),icon:J.qHV,selectedIcon:x.qHV,onClick:()=>{n("vision")},description:(0,i.jsx)(m.cC,{id:"ApxVH5",components:{0:(0,i.jsx)("strong",{})}}),isSelected:"vision"===t,badge:"Beta"})})]})});Q.displayName="PptImportTypeSelector";var $=n(46692);let ee={GoogleDocs:j.FJd.ImportGoogleDoc,GoogleSlides:j.FJd.ImportGoogleSlides,PptxUpload:j.FJd.UploadPpt,DocxUpload:j.FJd.UploadWordFile,WebpageUrl:j.FJd.ImportWebpage,PdfUpload:j.FJd.ImportPdf},et=(0,g.memo)(()=>{let e=(0,w.TL)(),t=(0,S.z$)(),n=(0,r.p)(),[T,_]=(0,g.useState)(!1),{guessSettings:O,isLoading:N}=(0,P.d)({ref:"createImport"}),{goToScreen:M}=(0,$.Ry)(),U=(0,y.ye)("pptImportV2"),[F,W]=(0,g.useState)("freeform"),q=(0,w.CG)(L.$Q),B=(null==q?void 0:q.source)==="PptxUpload"||(null==q?void 0:q.source)==="GoogleSlides",{format:V,styleTemplate:K}=(0,R.$q)(),[Y,J]=(0,g.useState)("text"),et=(0,g.useCallback)(n=>{let{source:i,src:r}=n;e((0,L.c_)(n)),"GoogleSlides"===i||"PptxUpload"===i?W("structured"):W("freeform"),r&&(null==t||t.track(S.AA.DOC_IMPORTED,{source:i,src:r,with_ai:!0,latency:n.latency}))},[e,t]),en=(0,b.YO)(void 0,"pptImportV2",S.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_PPT_IMPORT_V2),{continueToPptImport:ei,isLoading:er}=D(),es=N||T||er,eo=(0,g.useCallback)(async()=>{if(!q)return;_(!0);let e=ee[q.source];if(B){if("text"===Y){try{if(!q.slideHtml)throw Error("No slideHtml returned from getPptHtml");let t=q.slideHtml.map(I.B).map(e=>(0,E.c$)(e,void 0,z.G)).join("\n\n---\n\n"),{cardDimensions:n,defaultContentWidth:i}=A.STYLE_TEMPLATES.deck_traditional.docSettings;await O(e,{format:V,content:t,settings:{textMode:"generate",editorMode:"structured",styleTemplate:"deck_traditional",cardDimensions:n,cardWidth:i}})}catch(e){console.error("[caught] getPptHtml error: ".concat(e)),n({status:"error",title:f.ag._({id:"SlfejT"}),description:f.ag._({id:"lIW942"}),duration:5e3,isClosable:!0})}finally{_(!1)}return}if(!en())return;B&&U&&"vision"===Y&&await ei(q);return}let t=q.markdown;if(!t){let e=(0,I.B)(q.html);t=(0,E.c$)(e,void 0,z.G)}let i="GoogleDocs"===q.source||"DocxUpload"===q.source||"PdfUpload"===q.source||"WebpageUrl"===q.source,r={format:V,content:t||"",settings:{textMode:i&&"document"!==V?"condense":i||"document"!==V?U&&B&&"text"===Y?"generate":"preserve":"generate",editorMode:F,styleTemplate:K}};await O(e,r)},[q,B,V,K,U,Y,F,O,en,n,ei]),el=(0,g.useCallback)(()=>{e((0,L.c_)(void 0))},[e]);return(0,i.jsxs)(H,{children:[!q&&(0,i.jsxs)(s.K,{direction:"column",spacing:{base:6,md:8},align:"center",w:"100%",children:[(0,i.jsx)(k.v,{onImportComplete:et}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.x,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(m.cC,{id:"HmmZUO",components:{0:(0,i.jsx)(a.r,{textDecoration:"underline",fontWeight:"600",href:"/create/paste?ref=import",onClick:e=>{e.preventDefault(),M("createPaste",{ref:"createImport"})}})}})})})]}),q&&(0,i.jsxs)(c.g,{spacing:{base:8,md:10},maxW:"100%",w:"700px",alignSelf:"center",children:[(0,i.jsx)(Z,{importedFile:q,handleDelete:el}),(0,i.jsxs)(c.g,{spacing:4,w:"100%",children:[!B&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.cC,{id:"SjATqV"})}),(0,i.jsx)(X.FQ,{})]}),(0,i.jsx)(o.xu,{width:"100%",children:(0,i.jsx)(u.z,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(p.G,{icon:x.eFW}),onClick:eo,isLoading:es,loadingText:f.ag._({id:"qgUvjm"}),w:"100%",children:(0,i.jsx)(m.cC,{id:"xGVfLh"})})})]}),B&&(0,i.jsxs)(i.Fragment,{children:[U&&(0,i.jsxs)(c.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.cC,{id:"ETAPks"})}),(0,i.jsx)(Q,{value:Y,onSelect:J})]}),"text"===Y&&(0,i.jsxs)(c.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.cC,{id:"SjATqV"})}),(0,i.jsx)(X.FQ,{})]}),(0,i.jsxs)(c.g,{spacing:2,width:"100%",children:[(0,i.jsxs)(u.z,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(p.G,{icon:x.eFW}),onClick:eo,isLoading:es,loadingText:f.ag._({id:"qgUvjm"}),w:"100%",children:[(0,i.jsx)(m.cC,{id:"xGVfLh"}),"vision"===Y&&(0,i.jsx)(C.J,{type:"pptImportV2"})]}),"vision"===Y&&(0,i.jsx)(v.q,{modalId:"ai-credits-modal-generate-v2",variant:"ghost",justify:"flex-end",segmentEvent:S.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2,alignSelf:"center"})]})]})]})]}),(0,i.jsx)(h.W,{maxW:"2xl",pb:"10vw",mt:16,children:(0,i.jsx)(G.F,{generationTypes:[j.FJd.ImportPdf,j.FJd.ImportWebpage,j.FJd.ImportGoogleDoc,j.FJd.ImportGoogleSlides,j.FJd.UploadPpt,j.FJd.UploadPptV2,j.FJd.UploadWordFile]})})]})});et.displayName="CreateImportPage"},56630:function(e,t,n){"use strict";n.d(t,{B:function(){return A}});var i=n(52322),r=n(17190),s=n(43297),o=n(69251),l=n(30523),a=n(11082),c=n(42946),d=n(54933),u=n(49929),h=n(5879),x=n(5632),p=n(2784),m=n(36107),f=n(96023),g=n(37012),j=n(95453),v=n(71383),C=n(31601),b=n(92035),y=n(93199),k=n(74957),w=n(16791),S=n(46692),E=n(74090);let I=e=>{let{createGenerateV2Enabled:t}=e,n=g.VH.get("importUrl");return{paste:{label:(0,i.jsx)(h.cC,{id:"Q4xH1Z"}),description:(0,i.jsx)(h.cC,{id:"MxbdK6"}),icon:d.nfZ,colorScheme:"pink",imageUrl:"/_next/static/media/Thumbnail-paste.fdba31f6.svg",transform:"rotate(-1.5deg) scale(0.84)",screen:"createPaste"},generate:{label:(0,i.jsx)(h.cC,{id:"ziAjHi"}),description:(0,i.jsx)(h.cC,{id:"anOFr5"}),icon:d.JyM,colorScheme:"trueblue",imageUrl:"/_next/static/media/Thumbnail-generate.8e2e4605.svg",isPopular:!0,screen:t?"createGenerate":"legacyGuidedMode"},import:{label:n?(0,i.jsx)(h.cC,{id:"krF+YI"}):(0,i.jsx)(h.cC,{id:"2xoyqj"}),description:n?(0,i.jsx)(h.cC,{id:"fG2B2z"}):(0,i.jsx)(h.cC,{id:"5c5WYH"}),icon:d.Vmj,colorScheme:"purple",imageUrl:"/_next/static/media/Thumbnail-transform.76b5e76e.svg",transform:"rotate(1.5deg) scale(0.84)",screen:"createImport"}}},A=(0,p.memo)(()=>{let e=(0,v.TL)(),t=(0,j.E)(),{goToScreen:n,navEnabled:d}=(0,S.Ry)(),p=(0,g.ye)("createGenerateV2"),A=(0,C.z$)(),{query:T}=(0,x.useRouter)(),_=T.channelId;return(0,i.jsxs)(f.v4,{children:[d&&(0,i.jsx)(E.D,{}),(0,i.jsx)(w.U,{title:(0,i.jsx)(h.cC,{id:"1zuBj5"}),subtitle:(0,i.jsx)(h.cC,{id:"h0sjMM"}),children:(0,i.jsx)(r.W,{maxW:"4xl",children:(0,i.jsx)(s.K,{spacing:12,align:"center",children:(0,i.jsx)(o.r,{gap:[4,4,2],gridTemplateAreas:{base:'"generate" "paste" "import"',md:'"paste generate import"'},gridTemplateColumns:{base:"1fr",md:"1fr 1fr 1fr"},width:"100%",children:Object.entries(I({createGenerateV2Enabled:p})).map(r=>{let[s,{label:o,description:d,isPopular:x,colorScheme:p,imageUrl:f,transform:g,screen:j}]=r;return(0,i.jsx)(l.P,{area:s,children:(0,i.jsx)(m.X,{as:a.r,label:o,description:d,isPopular:x,colorScheme:p,imageUrl:f,transform:g,onClick:t=>{null==A||A.track(C.AA.AI_DOC_CREATION_GENERATION_TYPE_CLICKED,{generationType:s,device:(0,b.l7)()}),e((0,y._8)()),t.preventDefault(),t.stopPropagation(),n(j,{ref:"createWithAI",channelId:_})},ctaIcon:(0,i.jsx)(u.G,{icon:t?c.acZ:c.eFW}),ctaLabel:(0,i.jsx)(h.cC,{id:"xGVfLh"})})},s)})})})})}),(0,i.jsx)(r.W,{maxW:"2xl",pb:"10vw",children:(0,i.jsx)(k.F,{})})]})});A.displayName="CreatePage"},55655:function(e,t,n){"use strict";n.d(t,{L:function(){return z}});var i=n(52322),r=n(17190),s=n(17993),o=n(28535),l=n(87651),a=n(74409),c=n(42822),d=n(62614),u=n(77533),h=n(11082),x=n(42946),p=n(54933),m=n(49929),f=n(64253),g=n(5879),j=n(87254),v=n(2784),C=n(96023),b=n(91309),y=n(92662),k=n(85949),w=n(95453),S=n(71383),E=n(15550),I=n(95647),A=n(2309),T=n(93199),_=n(96114),O=n(84223),D=n(6476),R=n(16791),P=n(46692),L=n(74090);let z=(0,v.memo)(()=>{let{guessSettings:e,isLoading:t}=(0,A.d)({ref:"createPaste"}),n=(0,S.CG)(T.au),[z,G]=(0,v.useState)(!1),{format:N,styleTemplate:M,setStyleTemplate:U}=(0,I.$q)(),{goToScreen:F}=(0,P.Ry)(),W=(0,v.useCallback)(async()=>{let t=(0,_.Yl)(n),i=(0,_.vE)(n),r=(0,y.J1)(n);await e(k.FJd.PasteText,{format:N,content:n,settings:{textMode:r>=1e3?"document"===N?"preserve":"condense":"generate",editorMode:i>2&&t>5?"structured":"freeform",styleTemplate:M}})},[n,M,e,N]),H=(0,w.E)()?x.acZ:x.eFW;return(0,i.jsx)(b.jX,{children:(0,i.jsxs)(C.v4,{children:[(0,i.jsx)(L.D,{}),(0,i.jsx)(R.U,{title:(0,i.jsx)(g.cC,{id:"RG+JLG"}),subtitle:(0,i.jsx)(g.cC,{id:"v2ydVh"}),icon:(0,i.jsx)(m.G,{icon:p.OEL}),iconBoxProps:{color:"salmon.300"},children:(0,i.jsx)(r.W,{maxW:"2xl",children:(0,i.jsxs)(s.g,{spacing:4,w:"100%",children:[(0,i.jsx)(s.g,{spacing:3,align:"stretch",w:"100%",children:(0,i.jsx)(E.e,{containerProps:{minH:{base:"270px",sm:"300px",md:"50vh"},maxH:"50vh",overflow:"auto",fontSize:"16px"},hideFooter:!0,onEditorUpdate:e=>{let{editor:t}=e;G(!t.isEmpty)}})}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.U,{in:z,children:(0,i.jsxs)(s.g,{py:2,w:"100%",spacing:0,children:[(0,i.jsx)(a.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,pb:4,w:"100%",children:(0,i.jsx)(g.cC,{id:"SjATqV"})}),(0,i.jsx)(c.M,{children:(0,i.jsx)(D.FQ,{wrap:!0})}),M&&(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(O.A,{docFormatType:N,onSelectStyleTemplate:U,selectedStyleTemplate:M})})]})})}),(0,i.jsx)(f.kH,{label:n?"":(0,i.jsx)(g.cC,{id:"9IxKHJ"}),isDisabled:!!n,placement:"top",children:(0,i.jsx)(o.xu,{width:"100%",children:(0,i.jsx)(d.z,{size:"lg",minW:"16em",width:"100%",onClick:W,variant:"solid",rightIcon:(0,i.jsx)(m.G,{icon:H}),isLoading:t,isDisabled:!n,loadingText:j.ag._({id:"qgUvjm"}),children:(0,i.jsx)(g.cC,{id:"xGVfLh"})})})}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.U,{in:!z,children:(0,i.jsx)(u.x,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(g.cC,{id:"LVQnRo",components:{0:(0,i.jsx)(h.r,{onClick:e=>{e.preventDefault(),F("createImport",{ref:"createPaste"})},textDecoration:"underline",fontWeight:"600"})}})})})})]})})})]})})});z.displayName="CreatePastePage"},16791:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i=n(52322),r=n(43297),s=n(74409),o=n(28535),l=n(38035);let a=e=>{let{title:t,subtitle:n,icon:a,iconBoxProps:c,children:d}=e;return(0,i.jsxs)(r.K,{alignContent:"center",position:"relative",zIndex:"0",spacing:0,py:{base:"9",md:"8vh"},w:"100%",children:[(0,i.jsxs)(r.K,{spacing:{base:2,md:4},mb:{base:5,md:8},w:"100%",children:[null!==t&&(0,i.jsxs)(s.X,{textAlign:"center",color:"gray.800",fontWeight:"600",fontFamily:"p22-mackinac-pro",w:"100%",size:{base:"xl",md:"2xl"},px:4,children:[a&&(0,i.jsx)(o.xu,{display:"inline",me:2,...c,children:a}),t]}),n&&(0,i.jsx)(s.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:n})]}),(0,i.jsx)(l.k,{w:"100%",justifyContent:"center",children:d})]})}},82929:function(e,t,n){"use strict";n.d(t,{B:function(){return j}});var i=n(52322),r=n(38035),s=n(2784),o=n(38260),l=n(9850),a=n.n(l),c=n(5632),d=n(93199),u=n(85949),h=n(71383),x=n(46692);let p=e=>{let{id:t}=e,n=(0,c.useRouter)(),i=(0,h.TL)(),r=(0,h.qr)(),{goToScreen:o}=(0,x.Ry)(),[l,a]=(0,s.useState)(!0),[p]=(0,u.UCC)({variables:{id:t}});return(0,s.useEffect)(()=>{n&&r&&p&&p().then(e=>{let{data:t}=e;if(null==t?void 0:t.docGeneration)return t.docGeneration;throw Error("Could not load docGeneration")}).then(e=>{i((0,d.Gn)(m(e))),a(!1)}).catch(()=>{o("createWithAI")})},[i,p,o,n,r]),{isLoading:l}},m=e=>({...e,docGenerateInputs:e.docGenerateInputs.map(f),draftInput:e.draftInput?f(e.draftInput):void 0}),f=e=>{let t=a()(e);return t.settings.textMode||(t.settings.preserveText?t.settings.textMode="preserve":t.settings.textMode="generate",delete t.settings.preserveText),t};var g=n(96023);let j=(0,s.memo)(e=>{let{id:t,children:n}=e,{isLoading:s}=p({id:t});return s?(0,i.jsx)(r.k,{...g.ZQ,w:"100%",h:"100%",flex:1,alignSelf:"center",children:(0,i.jsx)(o.AA,{})}):(0,i.jsx)(i.Fragment,{children:n})});j.displayName="LoadDocGenerationPage"},74957:function(e,t,n){"use strict";n.d(t,{F:function(){return N}});var i=n(52322),r=n(17993),s=n(74409),o=n(42822),l=n(67109),a=n(62614),c=n(42946),d=n(49929),u=n(5879),h=n(2784),x=n(85949),p=n(91076),m=n(43297),f=n(28535),g=n(77533),j=n(82554),v=n(36474),C=n(11082),b=n(29117),y=n(87254),k=n(56974),w=n.n(k),S=n(5632),E=n(95453),I=n(86290),A=n(92035),T=n(33279),_=n(46692);let O="trueblue",D={[x.FJd.Generate]:(0,i.jsx)(u.cC,{id:"ziAjHi"}),[x.FJd.PasteText]:(0,i.jsx)(u.cC,{id:"yK5KbG"}),[x.FJd.ImportGoogleDoc]:(0,i.jsx)(u.cC,{id:"yYGwlq"}),[x.FJd.ImportGoogleSlides]:(0,i.jsx)(u.cC,{id:"z+pP4d"}),[x.FJd.ImportPdf]:(0,i.jsx)(u.cC,{id:"+HOkuz"}),[x.FJd.ImportWebpage]:(0,i.jsx)(u.cC,{id:"6gz43w"}),[x.FJd.UploadWordFile]:(0,i.jsx)(u.cC,{id:"yYGwlq"}),[x.FJd.UploadPpt]:(0,i.jsx)(u.cC,{id:"z+pP4d"}),[x.FJd.UploadPptV2]:(0,i.jsx)(u.cC,{id:"z+pP4d"})},R=e=>{let{count:t}=e;return(0,i.jsx)(i.Fragment,{children:[...Array(t)].map((e,t)=>(0,i.jsx)(G,{children:(0,i.jsxs)(m.K,{spacing:1,w:"100%",children:[(0,i.jsx)(l.O,{height:"1rem",borderRadius:"sm",w:"100%"}),(0,i.jsx)(f.xu,{w:"12rem",children:(0,i.jsx)(l.O,{height:"0.875rem",borderRadius:"sm",w:"100%"})})]})},t))})},P=e=>{for(let t of e){let e=t.replace(/<[^>]*>/g,"");if(0!==e.trim().length&&"---"!==e.trim())return e.trim().replace(/^[#]{1,3}/,"")}return y.ag._({id:"wja8aL"})},L=e=>{let{prompt:t,content:n,generationType:i}=e,r=P(n.split("\n"));return i===x.FJd.Generate&&t?t:i===x.FJd.UploadPptV2&&t?null!=t?t:"imported.pptx":r.slice(0,100)},z=e=>{var t,n,r,s,o,l;let{docGeneration:a}=e,p=(0,S.useRouter)(),m=(0,E.E)(),{goToScreen:C}=(0,_.Ry)(),b={whitespace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},y=(null===(t=a.draftInput)||void 0===t?void 0:t.prompt)||(null===(r=a.docGenerateInputs)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.prompt),k=(null===(s=a.draftInput)||void 0===s?void 0:s.content)||(null===(l=a.docGenerateInputs)||void 0===l?void 0:null===(o=l[0])||void 0===o?void 0:o.content)||"",A=L({generationType:a.generationType,prompt:y,content:k}),R=(0,I.BK)(a.updatedTime),P=0===a.docGenerateInputs.length,z=(0,T.Xn)(a,{ref:"createWithAI"}),N=(0,h.useCallback)(()=>{let{generationType:e}=a;if(e===x.FJd.Generate)C("createGenerate",{generateId:a.id,ref:"createWithAI"});else if(e===x.FJd.UploadPptV2){if(a.draftInput)p.push("/create/import-ppt/".concat(a.id));else{let e=w()(a.docGenerateInputs),t=null==e?void 0:e.docId;if(!t)throw Error("No generated docId for PPT import docGeneration.id=".concat(a.id));p.push("/docs/".concat(t))}}else C("promptEditor",{generateId:a.id,ref:"createWithAI"})},[a,C,p]);return(0,i.jsxs)(G,{href:z,onClick:N,children:[(0,i.jsxs)(f.xu,{overflow:"hidden",maxW:"100%",children:[(0,i.jsx)(g.x,{...b,textAlign:"start",fontSize:{base:"sm",md:"md"},mb:[1,1.5],children:A}),(0,i.jsxs)(g.x,{...b,textAlign:"start",maxW:"100%",fontWeight:"400",fontSize:{base:"xs",md:"sm"},color:"gray.700",children:[D[a.generationType]," \xb7 ",R,P&&(0,i.jsxs)(i.Fragment,{children:[" \xb7 ",(0,i.jsx)(j.C,{colorScheme:"teal",children:(0,i.jsx)(u.cC,{id:"eneWvv"})})]})]})]}),(0,i.jsx)(v.L,{}),(0,i.jsx)(f.xu,{fontSize:{base:"sm",md:"md"},color:"blackAlpha.400",_groupHover:{color:"".concat(O,".500")},children:(0,i.jsx)(d.G,{icon:m?c.A35:c._tD})})]})},G=e=>{let{children:t,href:n,onClick:r,...s}=e;return(0,i.jsx)(a.z,{as:C.r,href:n||void 0,onClick:e=>{e.preventDefault(),null==r||r()},bg:"white",borderRadius:"lg",display:"flex",border:"1px solid",boxShadow:"sm",borderColor:"white",variant:"plain",fontSize:"lg",py:4,spacing:"3",role:"group",minH:{base:16,md:20},_hover:(0,A.s2)()?{}:{color:"".concat(O,".600"),textDecoration:"none",boxShadow:"md"},...s,children:(0,i.jsx)(b.U,{spacing:"3",w:"100%",children:t})})},N=(0,h.memo)(e=>{var t;let{generationTypes:n}=e,m=(0,p.n_)(),[f,g]=(0,h.useState)(!1),{data:j,fetchMore:v,loading:C}=(0,x.M1N)({variables:{workspaceId:m,first:5,generationTypes:n}}),b=null==j?void 0:j.docGenerations.pageInfo,y=(0,h.useCallback)(()=>{(null==b?void 0:b.hasNextPage)&&(null==b?void 0:b.endCursor)&&(g(!0),v({variables:{after:null==b?void 0:b.endCursor}}).finally(()=>{g(!1)}))},[v,b]),k=(0,h.useMemo)(()=>{var e;return(null==j?void 0:null===(e=j.docGenerations)||void 0===e?void 0:e.edges.map(e=>e.node))||[]},[null==j?void 0:null===(t=j.docGenerations)||void 0===t?void 0:t.edges]);return(0,i.jsxs)(r.g,{align:"stretch",spacing:[2,3],children:[(0,i.jsx)(s.X,{fontSize:["lg","2xl"],mb:[2,3],textAlign:"center",fontWeight:"600",color:"gray.800",fontFamily:"p22-mackinac-pro",children:C?(0,i.jsx)(o.M,{children:(0,i.jsx)(l.O,{w:"50%",h:6})}):0===k.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(u.cC,{id:"yvKMb+"})}),(0,i.jsx)(r.g,{spacing:3,align:"stretch",children:C?(0,i.jsx)(R,{count:5}):(null==k?void 0:k.length)===0?(0,i.jsx)(i.Fragment,{}):k.map(e=>(0,i.jsx)(z,{docGeneration:e},e.id))}),f&&(0,i.jsx)(R,{count:5}),(null==b?void 0:b.hasNextPage)&&(0,i.jsx)(a.z,{leftIcon:(0,i.jsx)(d.G,{icon:c.r8p}),variant:"plain",boxShadow:"none",_hover:{bg:"white"},onClick:()=>y(),isLoading:f,children:(0,i.jsx)(u.cC,{id:"yQ2kGp"})})]})});N.displayName="RecentPrompts"},62225:function(e,t,n){"use strict";n.d(t,{C:function(){return j}});var i=n(52322),r=n(29117),s=n(5740),o=n(77533),l=n(28535),a=n(43297),c=n(74409),d=n(20437),u=n(74008),h=n(62614),x=n(42946),p=n(54933),m=n(49929),f=n(5879);n(2784);let g=e=>{let{label:t,shortcuts:n}=e;return(0,i.jsxs)(r.U,{children:[n.map((e,t)=>(0,i.jsx)(s.T,{padding:1,children:e},t)),(0,i.jsx)(o.x,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},j=e=>{let{onClose:t,showExitPresentMode:n=!0}=e;return(0,i.jsx)(l.xu,{children:(0,i.jsxs)(a.K,{spacing:6,children:[(0,i.jsxs)(a.K,{spacing:1,children:[(0,i.jsxs)(r.U,{color:"gray.500",children:[(0,i.jsx)(m.G,{icon:x.UFh})," ",(0,i.jsx)(c.X,{size:"xs",fontWeight:"normal",children:(0,i.jsx)(f.cC,{id:"h7MgpO"})})]}),(0,i.jsx)(c.X,{size:"md",children:(0,i.jsx)(f.cC,{id:"UodEcE"})})]}),(0,i.jsxs)(d.M,{spacing:3,columns:1,children:[(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"9xCxY6"}),shortcuts:[(0,i.jsx)(m.G,{icon:p.acZ},"left"),(0,i.jsx)(m.G,{icon:p.eFW},"right")]}),n&&(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"IkakN2"}),shortcuts:["Esc"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,i.jsx)(u.i,{borderColor:"gray.300"}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"CgmvBu"}),shortcuts:["S"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"/5i2oX"}),shortcuts:[(0,i.jsx)(m.G,{icon:p.FPD},"up"),(0,i.jsx)(m.G,{icon:p.r5q},"down")]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"rEj/lx"}),shortcuts:["Enter"]})]}),(0,i.jsx)(h.z,{size:"sm",variant:"solid",onClick:t,children:(0,i.jsx)(f.cC,{id:"76gPWk"})})]})},"coach-bar")}},56500:function(e,t,n){"use strict";n.d(t,{z:function(){return v}});var i=n(52322),r=n(38035),s=n(28535),o=n(87254),l=n(2784),a=n(83693),c=n(71383),d=n(3119),u=n(72611),h=n(68539),x=n(21298),p=n(32690);let m={fontFamily:'"Inter", sans-serif !important',fontWeight:"500",lineHeight:"1.5 !important",textTransform:"none",letterSpacing:"normal !important",textAlign:"left !important",margin:"0 !important",color:"gray.800 !important",background:"none !important",border:"0 none !important",padding:"0 !important",content:'""'},f={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...m,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"}},".block-paragraph":{fontSize:"1em"},".block-heading,.block-title":{fontWeight:"bold",lineHeight:{fontSize:"1.25"},'.heading[level="1"]':{fontSize:"1.5em"},'.heading[level="2"]':{fontSize:"1.25em"},'.heading[level="3"]':{fontSize:"1.125em"},'.heading[level="4"]':{fontSize:"1em"}},".block-title":{".title":{fontSize:"1.75em"},'.title[level="1"]':{fontSize:"1.75em"},'.title[level="2"]':{fontSize:"2em"},'.title[level="3"]':{fontSize:"2.25em"}},a:{...m,color:"var(--chakra-colors-blue-500) !important","&:hover":{textDecoration:"underline"},'&[href=""]':{textDecorationStyle:"dashed"},cursor:"pointer"},".mention":{bgColor:"trueblue.50",whiteSpace:"break-spaces"},code:{backgroundColor:"var(--chakra-colors-trueblue-50)",color:"var(--body-color)",...p.FC}},g={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...m,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"},color:"white"},code:{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-gray-200)",...p.FC},".block-todo label.chakra-checkbox .chakra-checkbox__control[data-checked]":{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-white)"}},j=e=>{let{isDark:t=!1}=e;return{".ProseMirror":{height:"100%"},...f,...x.dE,"--box-border-radius":"var(--chakra-radii-sm)","--link-color":t?"var(--chakra-colors-trueblue-100)":"var(--chakra-colors-trueblue-500)",".block-todo label.chakra-checkbox .chakra-checkbox__control:not([data-checked])":{borderColor:"var(--chakra-colors-chakra-border-color)"},"--body-color-inverted":t?"black":"white",...t?g:{},".is-selecting-node":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:t?"trueblue.100":"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}}}}},v=(0,l.memo)(e=>{var t;let{isEditable:n,notesSx:x,canShowEditHint:p=!1,isDark:m=!1}=e,[f,g]=(0,l.useState)(null),{destroyEditor:v,mountEditor:C}=(0,c.CG)(a.Vy),b=(0,l.useRef)(!1);(0,l.useEffect)(()=>(C&&g(C()),()=>{null==v||v(),g(null)}),[v,C]),(0,l.useEffect)(()=>{f&&n&&!b.current&&(f.commands.focus("end"),b.current=!0)},[n,f]),(0,l.useEffect)(()=>{if(f){if(f.shouldUseLiteMenus=!0,n&&!f.isEditable){f.setEditable(!0);return}if(!n&&f.isEditable){f.setEditable(!1);return}}},[n,f]);let y=n?o.ag._({id:"fnNtuR"}):"Double click to edit",k=p&&(null===(t=null==f?void 0:f.isEmpty)||void 0===t||t),w=j({isDark:m});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.k,{className:"card-notes-editor",overflowY:"auto",border:"1px solid",borderColor:m?"gray.700":"gray.200",borderRadius:"md",flex:1,p:4,wordBreak:"break-word",sx:{".block.block-paragraph.first-block.last-block.is-empty::before":{...h.BI,content:'"'.concat(y,'"')},...w,...x,_before:k?{...h.BI,top:4,left:4,height:"auto",width:"auto",content:'"'.concat(o.ag._({id:"CvH5f/"}),'"')}:{}},pos:"relative",children:(0,i.jsx)(r.k,{flex:1,flexDirection:"column",children:f&&(0,i.jsx)(u.k,{editor:f,className:"highlight-mask",style:{height:"100%"}})})}),f&&n&&(0,i.jsx)(s.xu,{children:(0,i.jsx)(d.uH,{editor:f,appendToSelector:"[data-card-notes-bubble-menu-target]"})})]})});v.displayName="CardNotesEditor"},1737:function(e,t,n){"use strict";n.d(t,{nP:function(){return _},tE:function(){return E},vP:function(){return S}});var i=n(52322),r=n(77533),s=n(332),o=n(28535),l=n(74409),a=n(69251),c=n(30523),d=n(19783),u=n(32899),h=n(54933),x=n(49929),p=n(5879),m=n(87254),f=n(87202),g=n(2784),j=n(53650),v=n(62861),C=n(71383),b=n(13675),y=n(65342),k=n(62344);let w=(0,f.ZP)("mod+Escape"),S=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),E=e=>{let{enabled:t,setActiveKey:n}=e,{editor:i}=(0,b._)(),{editCardInPresentMode:r}=(0,y.l)({editor:i}),s=(0,C.CG)(v.C),{handlePresentNavigationEvent:o,spotlightingByBlock:l}=(0,k._)();return(0,g.useEffect)(function(){if(t)return j.F7.on("keydown","NAVIGATION_CONTROLS",e=>{var t,i;let l=e.target;if((null==l?void 0:null===(t=l.closest)||void 0===t?void 0:t.call(l,"[data-gamma-child-tiptap-editor]"))||(null==l?void 0:null===(i=l.closest)||void 0===i?void 0:i.call(l,"input"))||e.metaKey||s)return!1;let a=e.key;if(S.has(a)&&("s"!==a&&(n(e.key),setTimeout(()=>{n(null)},100)),e.preventDefault())," "===a&&e.shiftKey)return o({eventType:"arrowLeft",eventKey:a});switch(e.key){case"e":return r(),!0;case"s":return o({eventType:"toggleSpotlight",eventKey:a});case" ":case"l":case"ArrowRight":return o({eventType:"arrowRight",eventKey:a});case"h":case"ArrowLeft":return o({eventType:"arrowLeft",eventKey:a});case"j":case"ArrowDown":case"PageDown":return o({eventType:"arrowDown",eventKey:a});case"k":case"ArrowUp":case"PageUp":return o({eventType:"arrowUp",eventKey:a});case"r":return o({eventType:"restart",eventKey:a});case"Escape":if(w(e))return!1;return o({eventType:"cancelCurrentAction",eventKey:a});case"Enter":return o({eventType:"toggleExpanded",eventKey:a});default:return!1}})},[r,t,o,s,n]),l},I=e=>{let t=new KeyboardEvent("keydown",{key:e});n.g.dispatchEvent(t)},A={ArrowUp:{icon:h.FPD,label:(0,i.jsx)(p.cC,{id:"VbggDE"}),ariaLabel:()=>m.ag._({id:"VbggDE"}),shortcuts:["","K"],key:"ArrowUp",onClick:()=>{I("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:h.acZ,label:(0,i.jsx)(p.cC,{id:"4jciC3"}),ariaLabel:()=>m.ag._({id:"4jciC3"}),shortcuts:["","H"],key:"ArrowLeft",onClick:()=>{I("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:h.r5q,label:(0,i.jsx)(p.cC,{id:"e3GOIZ"}),ariaLabel:()=>m.ag._({id:"e3GOIZ"}),shortcuts:["","J"],key:"ArrowDown",onClick:()=>{I("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:h.eFW,label:(0,i.jsx)(p.cC,{id:"ZjQRVw"}),ariaLabel:()=>m.ag._({id:"ZjQRVw"}),shortcuts:["","L"],key:"ArrowRight",onClick:()=>{I("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:h.GTX,label:(0,i.jsx)(p.cC,{id:"Xon9jp"}),ariaLabel:()=>m.ag._({id:"Xon9jp"}),shortcuts:["S"],key:"S",onClick:()=>{I("s")},gridPos:[1,3]}},T=e=>{let{shortcuts:t}=e;return(0,i.jsx)(r.x,{as:"span",color:"gray.400",ml:2,children:t.map((e,n)=>(0,i.jsxs)(g.Fragment,{children:[e,n===t.length-1?null:(0,i.jsx)(r.x,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e))})},_=e=>{let{activeKey:t,spotlightingByBlock:n}=e;return(0,i.jsx)(s.h,{children:(0,i.jsxs)(o.xu,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,i.jsx)(l.X,{children:(0,i.jsx)(p.cC,{id:"wja8aL"})}),(0,i.jsx)(a.r,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(A).map(e=>{let{gridPos:s,icon:o,label:l,ariaLabel:a,shortcuts:h,key:p,onClick:m}=e;return(0,i.jsx)(c.P,{gridColumn:s[1],gridRow:s[0],children:(0,i.jsx)(d.u,{hasArrow:!0,placement:"top",label:(0,i.jsxs)(r.x,{whiteSpace:"nowrap",children:[l,(0,i.jsx)(T,{shortcuts:h})]}),children:(0,i.jsx)(u.h,{m:1,shadow:"base",size:"md",variant:"S"==p&&n?"solid":"plain",isActive:t===p||"S"===p&&n,onClick:m,onMouseDown:e=>e.preventDefault(),"aria-label":a(),icon:(0,i.jsx)(x.G,{icon:o})})})},p)})})]})})}},65342:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(2784),r=n(71383),s=n(78112);let o=e=>{let{editor:t}=e,n=(0,r.TL)(),o=(0,r.qr)();return{editCardInPresentMode:(0,i.useCallback)(()=>{(0,s.wc)(o.getState())&&(n((0,s.e)({isEditingInSlideView:!0})),n((0,s.Qx)({attached:!1})),n((0,s.kI)()),null==t||t.commands.turnOffSpotlight())},[t,n,o])}}},62344:function(e,t,n){"use strict";n.d(t,{_:function(){return m}});var i=n(2784),r=n(24759),s=n(71383),o=n(52659),l=n(31601),a=n(73281),c=n(27320),d=n(43911),u=n(20706),h=n(78112),x=n(13675);let p=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,o.cC)("editor"),r=i.scroller;if(!r)return;e.commands.turnOffSpotlight();let s=r.scrollHeight-r.offsetHeight;if("down"===t){if(!(i.isAtBottom(90)&&n&&e.commands.spotlightNextCard(!1,"top"))){let e=r.scrollTop+.5*r.offsetHeight;e>s-150&&(e=s),i.scrollTo({top:e})}}else if(!(i.isAtTop(90)&&n&&e.commands.spotlightNextCard(!0,"bottom"))){let e=r.scrollTop-.5*r.offsetHeight;e<150&&(e=0),i.scrollTo({top:e})}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.R0.MAIN_PRESENT_VIEW,{editor:t}=(0,x._)(),n=(0,l.z$)(),{enabled:o}=(0,c.gZ)(t),m=(0,s.qr)();return{handlePresentNavigationEvent:(0,i.useCallback)(i=>{let{eventType:s,eventKey:o,method:c="keyboard",payload:x={}}=i;if(!t)return!1;let f=m.getState(),g=(0,h.k8)(f),j=null==g?void 0:g.pos,v=!!(t&&g&&(0,d.Jg)(t,g)),C=Object.keys((0,h.X9)(f).tree);switch(s){case"toggleSpotlight":return v?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock(),m.dispatch((0,h.kI)()),!0;case"goToCard":{let{cardId:e}=x;if(!e)return!1;return t.commands.spotlightCardById(e,v),m.dispatch((0,h.Qx)({attached:!1})),!0}case"arrowRight":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.CARD_NEXT,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock();return t.commands.spotlightNextCard();case"arrowLeft":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.CARD_PREV,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock(!0);return t.commands.spotlightNextCard(!0);case"arrowDown":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode()||p(t,"down",!e),!0}return null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.TELEPROMPTER_DOWN,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock();case"arrowUp":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode(!0)||p(t,"up",!e),!0}return null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.TELEPROMPTER_UP,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock(!0);case"restart":if(C[0])return(0,r.p7)(),t.commands.spotlightCardById(C[0]),m.dispatch((0,h.Qx)({attached:!1})),!0;return!1;case"cancelCurrentAction":{let e=v&&j;if(t.commands.spotlightCollapseNearestExpandableNode(e?j:null))return t.commands.reHighlightExpandableNode(),!0;if(v)return t.commands.turnOffSpotlight(),!0;return m.dispatch((0,h.Qx)({attached:!1})),null==n||n.track(l.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),t.commands.ascendUpToParentCard(!1)}case"toggleExpanded":{let e=v&&j;if(t.commands.expandOrCollapseExpandableNode(e?j:null))return!0;if(e){let e=t.state.doc.resolve(j).parent;if(e&&(0,u.AH)(e))return(0,u.xB)(e.attrs.id,!1),t.commands.spotlightNextBlock(!0),!0;return t.commands.spotlightCollapseNearestExpandableNode(j)}return!1}default:return!1}},[n,t,e,m]),spotlightingByBlock:o}}},55758:function(e,t,n){"use strict";n.d(t,{VN:function(){return m},o8:function(){return h},rJ:function(){return x},rU:function(){return u},us:function(){return p}});var i=n(27875),r=n.n(i),s=n(2784),o=n(37012),l=n(71383),a=n(65050),c=n(78112),d=n(87103);let u=.65,h="disable-card-size-animations",x=()=>{let e=(0,o.ye)("autoZoomToFit"),t=(0,l.CG)(c.Kk);return(0,s.useEffect)(()=>{t||g()},[t]),null!=t?t:e},p=()=>{let e=(0,l.CG)(c.i2),t=(0,s.useRef)(),n=x(),i=!d.Pv&&!d.Qg&&n;(0,s.useEffect)(()=>{let n=!t.current;t.current=e,e&&i&&(document.body.classList.add(h),m(),requestAnimationFrame(()=>{document.body.classList.remove(h)}),n&&setTimeout(()=>{document.body.classList.add(h),m(),requestAnimationFrame(()=>{document.body.classList.remove(h)})},a.nY))},[e,i])},m=()=>{let e=document.documentElement.clientHeight,t=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');if(!t)return;let n=f(t,e,1);if(n<.9){let i=(1-n)/3;n=f(t,e,n+i)}(0,l.bh)().dispatch((0,c.Ic)({zoomLevel:n}))},f=(e,t,n)=>{e.style.setProperty("--zoom-level",n.toString());let i=e.scrollHeight,s=r()(n*t/i,d.QX?.5:u,1);return e.style.setProperty("--zoom-level",s.toString()),s},g=()=>{document.querySelectorAll("[data-card-scroll-element]").forEach(e=>{e.style.removeProperty("--zoom-level")})}},58847:function(e,t,n){"use strict";n.d(t,{o:function(){return p}});var i=n(21805),r=n(2784),s=n(95405),o=n(8940),l=n(37012),a=n(71383),c=n(91076),d=n(6814),u=n(77555),h=n(85048),x=n(32140);let p=e=>{let t=(0,a.CG)(x.yx),n=(0,r.useMemo)(()=>!!i.Z.get(u.ir),[]),p=(0,a.CG)(d.Fp),m=(0,c.we)(),f=(0,a.TL)(),g=(0,a.CG)(x.fh),j=(0,l.ye)("docEditorForcePublicStatic"),v=window!==window.top,C=(0,r.useMemo)(()=>{var e,i;if(p||v)return!1;let r=new URLSearchParams(window.location.search);if(r.get("following_id")&&r.get("follow_on_start"))return!0;if(!t)return n;let l=null===(i=t.accessLinks)||void 0===i?void 0:null===(e=i.find(e=>e.token===s.v.SHARE_TOKEN))||void 0===e?void 0:e.permission;return l&&[o.y3$.Edit,o.y3$.Comment].includes(l)||m.can(o.y3$.Comment,t)||m.can(o.y3$.Edit,t)||m.can(o.y3$.Manage,t)},[m,t,n,v,p]);(0,r.useEffect)(()=>{let t=j?h.Z.PUBLIC_STATIC:e||(C?h.Z.COLLABORATIVE:h.Z.PUBLIC_STATIC);f((0,x.R8)({docEditorType:t}))},[f,e,j,C]);let b=e||(C?h.Z.COLLABORATIVE:h.Z.PUBLIC_STATIC);return g||b}},45649:function(e,t,n){"use strict";n.d(t,{dM:function(){return p9},Ur:function(){return pV},nz:function(){return ma},_i:function(){return tw._i}});var i,r,s,o,l,a=n(52322),c=n(38035),d=n(28535),u=n(73200),h=n(99818),x=n(5879),p=n(87254),m=n(97729),f=n.n(m),g=n(2784),j=n(43997),v=n(29201),C=n(1547),b=n(16618),y=n(37012),k=n(83404),w=n(89072),S=n(55478),E=n(43679),I=n(34071),A=n(32899),T=n(39429),_=n(48394),O=n(42946),D=n(49929),R=n(30733),P=n.n(R),L=n(12436),z=n.n(L),G=n(8848);class N extends G.v{cleanup(){document.removeEventListener("mousemove",this.throttled)}constructor(){super(),this.throttled=z()(e=>{this.emit("move",e)},200,{leading:!0}),document.addEventListener("mousemove",this.throttled)}}let M=P()(()=>new N),U=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=M(),[i,r]=(0,g.useState)(!1),s=(0,g.useRef)(t);return(0,g.useEffect)(()=>{s.current=t},[t]),(0,g.useEffect)(()=>n.on("move",t=>{s.current||r(e(t))}),[n,e]),i};var F=n(71383),W=n(78112),H=n(32817),q=n(18960),B=n(54913),V=n(51581),K=n(62225);let Y=(0,g.memo)(()=>{let{isOpen:e,onToggle:t,onClose:n}=(0,S.q)(),[i,r]=(0,H.I)(q.H.hasSeenCoachBar,!1),s=(0,F.CG)(W.Tf),o=(0,g.useCallback)(()=>{i||r(!0),n()},[i,n,r]),l=!i||e,c=U((0,g.useCallback)(e=>e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150,[]));return(0,a.jsx)(V.H,{mr:s&&i&&!l&&!c?"-100%":"0px",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,a.jsxs)(E.J,{returnFocusOnClose:!1,isOpen:l,onClose:o,closeOnBlur:!0,children:[(0,a.jsx)(I.x,{children:(0,a.jsx)(A.h,{onClick:()=>{e&&r(!0),t()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,a.jsx)(D.G,{icon:O.UFh})})}),(0,a.jsx)(T.y,{...B.Ro,children:(0,a.jsx)(_.b,{children:(0,a.jsx)(K.C,{onClose:o})})})]})})});Y.displayName="PresentModeHelpWidget";var Z=n(23691),J=n(10617),X=n(77574),Q=n(3454),$=n(66915),ee=n(16810);let et=()=>(0,F.CG)((0,ee.CO)("left")),en=()=>(0,F.CG)((0,ee.CO)("right")),ei=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=e.panelPosition,i=(0,j.I0)(),r=(0,F.CG)((0,ee.OC)(e)),s=(0,g.useCallback)(()=>{i((0,ee.uJ)({component:e}))},[e,i]);return(0,Q.v)(()=>{!t&&r&&i((0,ee.sR)({position:n}))},[r,i,t,n],[t]),{togglePanel:(0,g.useCallback)(s=>{if(!t)return;let o=!r;(null==s?void 0:s.override)==="open"?o=!0:(null==s?void 0:s.override)==="closed"&&(o=!1),o?i((0,ee.Yp)({component:e,disableTransition:!!(null==s?void 0:s.disableTransition)})):i((0,ee.sR)({position:n}))},[e,n,r,i,t]),initPanel:s,isPanelOpen:r}},er=()=>{let e=(0,g.useMemo)(()=>new $.st,[]),t=(0,g.useMemo)(()=>new $.st,[]),n=(0,g.useMemo)(()=>new $.st,[]);return(0,g.useEffect)(()=>{if(!n||!e||!t)return;let i=e.pipe(n),r=t.pipe(n);return()=>{i(),r()}},[e,t,n]),{leftPanelLifecycle:e,rightPanelLifecycle:t,globalPanelLifecycle:n}};var es=n(48929),eo=n(95453),el=n(53650),ea=n(36533),ec=n(15222),ed=n(70965),eu=n(88512);let eh=function(e,t,n){return"left"===n?{base:t,xl:e}:{base:t,"2xl":e}},ex=e=>{let{children:t,onClose:n,panelName:i}=e;return(0,g.useEffect)(()=>el.F7.on("keydown",i,e=>"Escape"===e.key&&(n(),!0)),[i,n]),t},ep=e=>{var t;let{position:n,panelLifecycle:i}=e,r=(0,eo.E)()?"left"===n?"right":"left":n,s=(0,g.useRef)(),[o,l]=(0,g.useState)(!1),d=(0,j.I0)(),u=(0,F.CG)((0,ee.SL)(n)),h=(0,F.CG)((0,ee.Fw)(n)),x=(0,F.CG)(W.nz),p=(0,F.CG)((0,ee.CO)(n)),m=(0,F.CG)((0,ee.eh)(n)),f=null!==(t=null==m?void 0:m.canCollapse)&&void 0!==t&&t,v=(0,g.useCallback)(()=>{d((0,ee.sR)({position:n}))},[d,n]),C=(0,g.useCallback)(()=>{d((0,ee.Yp)({component:m}))},[m,d]),b=(0,g.useCallback)(e=>{d((0,ee.UG)({width:e,position:n})),i.emit("resize",{})},[d,i,n]),y={zIndex:Number((0,es.dQ)("zIndices","overlay"))+1,position:eh("relative","fixed",r),top:eh(0,"var(--editor-padding-top)",r),bottom:0,[r]:0},k=(0,ec.Yy)();h||o||(y.transitionProperty="width",y.transitionDuration="normal"),(0,g.useEffect)(()=>{let e=e=>{"width"===e.propertyName&&i.emit("resize",{})};return s.current.addEventListener("transitionend",e),()=>{s.current&&s.current.removeEventListener("transitionend",e)}},[i,s]);let w=(0,ed.iq)(eh(!0,!1,r))||!1;return(0,g.useEffect)(()=>{u&&!w&&f&&v()},[w,u,v,f]),(0,g.useEffect)(()=>{x&&v()},[x,v]),(0,a.jsxs)(c.k,{ref:s,...y,style:{width:u||f?p:0},boxShadow:w?"none":"2xl",borderColor:u?k?"gray.800":"blackAlpha.100":void 0,borderLeftWidth:u&&"right"===r?"1px":0,borderRightWidth:u&&"left"===r?"1px":0,maxW:"100%","data-print-hidden":!0,children:[u&&"right"===n&&(0,a.jsx)(eu.w1,{isDragging:o,setIsDragging:l,position:r,width:p,minWidth:null==m?void 0:m.minWidth,setWidth:b,panelRef:s,onClose:v,initialWidth:ea.Ld}),(0,a.jsx)($.Mn.Provider,{value:i,children:m&&(u||f)&&(0,a.jsx)(ex,{onClose:v,panelName:m.panelName,children:(0,a.jsx)(m,{isDragging:o,isOpen:u,closePanel:v,openPanel:C,panelRef:s,lifecycle:i,hasRoomToOpen:w})})}),u&&"left"===n&&(0,a.jsx)(eu.w1,{isDragging:o,setIsDragging:l,position:r,width:p,minWidth:null==m?void 0:m.minWidth,setWidth:b,panelRef:s,onClose:v,initialWidth:ea.X9})]})},em=(0,g.memo)(e=>(0,a.jsx)(ep,{position:"right",...e}));em.displayName="RightPanelContainer";let ef=(0,g.memo)(e=>(0,a.jsx)(ep,{position:"left",...e}));ef.displayName="LeftPanelContainer";var eg=n(50019),ej=n(29117),ev=n(62614),eC=n(75768),eb=n(64253),ey=n(5632),ek=n(92035),ew=n(33279),eS=n(76599);let eE=e=>{let{docId:t}=e,n=(0,F.TL)(),i=(0,eg.ff)("gray.300","gray.800"),r=(0,eg.ff)("white","gray.900"),s=(0,eg.ff)("transparent","transparent"),o=(0,eg.ff)("gray.500","gray.400"),l=(0,eg.ff)("trueblue.50","trueblue.400"),u=(0,eg.ff)("trueblue.500","white"),h=(0,eg.ff)("gray.600","gray.100"),m=(0,eg.ff)("gray.100","gray.700"),f=(0,eg.ff)("trueblue.50","trueblue.400"),j=(0,eg.ff)("trueblue.500","white"),{replace:v}=(0,ey.useRouter)(),C=(0,F.CG)(eS.tv),b=(0,g.useCallback)(()=>{t&&v((0,ew.yQ)({docId:t}),void 0,{shallow:!0})},[t,v]),y=(0,g.useCallback)(e=>{n((0,eS.Tj)({previewSize:e}))},[n]);return(0,g.useEffect)(()=>el.F7.on("keydown","SITE_PREVIEW_PANE",e=>("Escape"===e.key&&b(),!0)),[b]),(0,a.jsx)(c.k,{bg:"white",align:"flex-start",direction:"column",width:"100%","data-sites-preview-pane":!0,children:(0,a.jsxs)(ej.U,{w:"100%",spacing:0,p:2,py:2,bg:r,borderColor:i,justify:"flex-start",borderBottomWidth:"1px",children:[(0,a.jsx)(ej.U,{spacing:2,flexBasis:"30%",children:!(0,ek.s2)()&&(0,a.jsx)(ev.z,{size:"sm",variant:"plain",onClick:b,children:(0,a.jsx)(ej.U,{children:(0,a.jsx)(d.xu,{children:(0,a.jsx)(D.G,{icon:O.acZ})})})})}),(0,a.jsxs)(eC.h,{size:"sm",ml:24,flexBasis:"40%",justifyContent:"center",children:[(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"58m6Qy"}),children:(0,a.jsx)(A.h,{"aria-label":p.ag._({id:"58m6Qy"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(D.G,{icon:O.Z__}),bg:"mobile"===C?l:s,_hover:{color:"mobile"===C?j:h,bg:"mobile"===C?f:m},color:"mobile"===C?u:o,onClick:()=>{y("mobile")}})}),!(0,ek.s2)()&&(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"fpcKeD"}),children:(0,a.jsx)(A.h,{"aria-label":p.ag._({id:"fpcKeD"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(D.G,{icon:O.ep5}),bg:"tablet"===C?l:s,_hover:{color:"tablet"===C?j:h,bg:"tablet"===C?f:m},color:"tablet"===C?u:o,onClick:()=>{y("tablet")}})}),!(0,ek.s2)()&&(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"K3p0ar"}),children:(0,a.jsx)(A.h,{"aria-label":p.ag._({id:"K3p0ar"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(D.G,{icon:O.tc$}),bg:"desktop"===C?l:s,_hover:{color:"desktop"===C?j:h,bg:"desktop"===C?f:m},color:"desktop"===C?u:o,onClick:()=>{y("desktop")}})})]}),(0,a.jsx)(ej.U,{flexBasis:"30%",justifyContent:"flex-end"})]})})};var eI=n(71184),eA=n(54073),eT=n.n(eA),e_=n(27287),eO=n(80180);let eD=(e,t)=>{let n=(0,F.TL)(),i=(0,F.qr)(),r=!!(0,F.CG)(e_.$U),s=(0,F.CG)(W.wc),o=(0,F.CG)(e_.B$),l=t&&r&&s;(0,g.useEffect)(()=>{var t,r;if(!l||!e||e.gammaDocId!==o)return;let s=(0,W.yx)(i.getState()),a=null==s?void 0:null===(r=s.publishedSnapshot)||void 0===r?void 0:null===(t=r.content)||void 0===t?void 0:t.default;if(!a)return;let c=!(0,eO.G0)(e,a);console.debug("[useDirtyStateTracking] INITIALIZING DIRTY STATE ".concat(o," via compareDocJSON"),{isDirty:c}),c&&n((0,e_.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},[n,i,e,l,o]),(0,g.useEffect)(()=>{if(!l||!e)return;let t=eT()(()=>{n((0,e_.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},500,{leading:!0,trailing:!0,maxWait:1e3});return e.on("update",t),()=>{e.off("update",t)}},[l,n,e])};var eR=n(41742),eP=n(81486),eL=n(92476),ez=n(65068),eG=n(43826),eN=n(3874),eM=n(31601),eU=n(73346),eF=n(37243),eW=n(84636),eH=n.n(eW),eq=n(52659),eB=n(54317),eV=n(28817),eK=n(33945);let eY=(e,t,n,i,r)=>{let s=i-n,o=Math.max(s-Math.max(e-n,0)-Math.max(i-t,0),0),l=o/s,a=l>0&&o==t-e;return{overlap:l,viewing:r&&(a||l>.5||o>400),only:a}},eZ=(e,t)=>{let n=(0,eq.As)("editor"),[i,r]=(0,g.useState)(null),s=(0,g.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),o=(0,F.CG)(W.gh),l=(0,F.CG)(W.i2);(0,g.useEffect)(()=>{s.current.presentingCardId=null!=l?l:null},[l]);let a=(0,F.CG)(W.Q5);(0,g.useEffect)(()=>{s.current.expandedCards=a},[a]),(0,g.useEffect)(()=>{let e=document.querySelector(n.scrollSelector);if(!e)return;r(e);let{height:t}=e.getBoundingClientRect();s.current.scrollTop=e.scrollTop,s.current.containerHeight=t},[n.scrollSelector,s]),(0,g.useEffect)(()=>{let e=eT()(()=>{i&&(s.current.scrollTop=i.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),()=>window.removeEventListener("scroll",e,!0)},[i]),(0,g.useEffect)(()=>{let e=eT()(()=>{i&&(s.current.containerHeight=i.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[i]),(0,g.useEffect)(()=>{if(!e)return;if(o===eK.q.SLIDE_VIEW){let e=setInterval(()=>{t.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return()=>clearInterval(e)}let i=setInterval(()=>{if(document.hidden)return;let{scrollTop:i,containerHeight:r,expandedCards:o}=s.current,l=i+r;eH()((0,eF.N2)(e.state.doc,eB.KH),e=>e.node.attrs.id).map(t=>{let r;let s=t.node.attrs.id,a=o[s];if(!a)return null;try{r=e.view.nodeDOM(t.pos)}catch(e){return null}if(r instanceof HTMLElement){let e=(0,eV.LY)(r,n.scrollSelector),{offsetHeight:t}=r;return{id:s,...eY(i,l,e,t+e,a)}}return null}).filter(e=>!!(null==e?void 0:e.viewing)).forEach(e=>{t.emit("cardViewed",{cardId:e.id,interval:1e3})})},1e3);return()=>clearInterval(i)},[o,e,s,t,n.scrollSelector])},eJ=e=>{let{editor:t,backoffFactor:n=1}=e,i=(0,eM.z$)(),[r,s]=(0,g.useState)(15e3);eZ(t,eU.f);let o=(0,g.useCallback)(()=>{eU.f.flush(),s(Math.min(r*n,12e4))},[n,r]);return(0,g.useEffect)(()=>{if(!i)return;eU.f.initialize(),eU.f.on("flush",e=>{let{viewed:t}=e;for(let[e,n]of Object.entries(t))i.trackDocEvent(eM.AA.CARD_VIEWED,{card_id:e,duration:n})});let e=setInterval(()=>o(),r);return()=>{clearInterval(e),eU.f.destroy()}},[i,r,o]),null};var eX=n(97134),eQ=n(29342),e$=n(83693),e0=n(13675),e1=n(81672),e2=n(17993),e5=n(77533),e3=n(36474),e4=n(54933),e6=n(21829),e8=n(86743),e9=n(49206),e7=n(56500),te=n(18149),tt=n.n(te),tn=n(44598),ti=n(43988);let tr=e=>{let t=(0,F.CG)(e$.AD),{title:n}=(0,tn.T)({cardId:t||void 0,editor:e}),i=(0,F.CG)(W.pN,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return tt()(...t)}),r=i.indexOf(t||""),s=(0,g.useCallback)(t=>()=>{var n,s;if(!e)return;let o=null!==(s=i[r+(t?1:-1)])&&void 0!==s?s:i[r],l=null===(n=(0,eB.Bw)(e,o))||void 0===n?void 0:n.pos;if(!l)return;(0,ti.vS)(e,l)||e.commands.selectInsideNodeAtPos(l);let a=e.view.nodeDOM(l);a instanceof HTMLElement&&(0,eq.cC)("editor").scrollElementIntoView({element:a,delay:0})},[r,e,i]);return{cardId:t,title:n||"Untitled",canGoForward:r<i.length-1,canGoBack:r>0,goToNextCard:s(!0),goToPreviousCard:s(!1)}};var ts=n(86745),to=n(23186);let tl=e=>{let{editor:t,isReadonly:n}=e,{selection:i}=(0,ts.t)(t),r=(0,F.TL)(),s=(0,y.ye)("cardNotes");(0,g.useEffect)(()=>{if(!t||!s)return;let e=(0,to.AQ)(t.state.doc,t.state.selection.from);if(e&&e.node&&!(0,ti.Qp)(e.node)){if(n){r((0,e$.NK)());return}(0,ti.Fi)(t,e.pos)}},[s,r,t,n,i])};var ta=n(90025),tc=n(69964),td=n(41019),tu=n(25556),th=n(13090),tx=n(81363),tp=n(22982),tm=n(84663),tf=n(55898),tg=n(40382);let tj=e=>{let{editor:t,cardId:n}=e,i=(0,F.CG)(W.Wl),r=(0,F.CG)(W.hN),s=(0,y.ye)("aiCardNotes"),o=(0,g.useCallback)(e=>{if(!t||!n)return;let i=(0,eB.Bw)(t,n);if(!i)return;let r=t.state.doc.resolve(i.pos),s=(0,ti.cM)(r);if(!s)return;let o=(0,tf.aT)(e,t.schema),{tr:l}=t.state,a=s.pos+1,c=a+s.node.content.size;l.delete(a,c).insert(a,o.content),t.view.dispatch(l)},[t,n]),l=(0,tg.Z_)(o,200),[a,c]=(0,g.useState)(!1),{generate:d}=(0,tc.jz)("GenerateSpeakerNotes",{onStart(){c(!0),l("")},onContent(e){l(e)},onComplete(e){l(e),c(!1)},timeout:3e4}),u=(0,F.qr)(),h=(0,g.useCallback)(async()=>{if(!i||!t||!n)return;let e=(0,eB.Bw)(t,n);if(!e)return;let r=(0,ta.c)(t,e.node),s=(0,td.nZ)(),o=(0,tm.vR)(t,e.pos),l=(0,tp.D)(u);await d({variables:{cardHtml:r,previous:o,outline:l},workspaceId:i.id}).promise,(0,th.d)("generateCardNotes",i,s)},[d,i,t,n,u]);return{onClickGenerate:(0,tu.YO)(h,"generateCardNotes",tx.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),isGenerating:a,canGenerateCardNotes:s&&r}},tv=e=>{let{closePanel:t}=e,{editor:n}=(0,tw._i)(),i=(0,F.CG)(W.hN),{cardId:r,canGoBack:s,canGoForward:o,title:l,goToNextCard:d,goToPreviousCard:u}=tr(n),{isInOfflineMode:h}=(0,C.$)();tl({editor:n,isReadonly:!i});let m=(0,ec.Yy)(),f=m?"gray.900":"white",g=m?"white":"gray.900",j=m?"gray.300":"gray.500",{onClickGenerate:v,isGenerating:b,canGenerateCardNotes:y}=tj({editor:n,cardId:r});return(0,a.jsx)(eb.Wk,{isDark:m,children:(0,a.jsx)(e8.s,{bgColor:f,"data-panelid":"card-notes-panel",color:g,children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",flex:1,children:[(0,a.jsxs)(c.k,{px:6,py:4,children:[(0,a.jsx)(c.k,{flex:1,children:(0,a.jsxs)(ej.U,{spacing:4,children:[(0,a.jsx)(e9.V,{children:(0,a.jsx)(x.cC,{id:"1DBGsz"})}),i&&!h&&(0,a.jsx)(eb.Yq,{label:(0,a.jsx)(x.cC,{id:"qcPeK2"})})]})}),(0,a.jsx)(e1.P,{"data-card-notes-close-button":!0,onClick:t})]}),(0,a.jsxs)(e2.g,{px:6,pb:4,alignItems:"stretch",flex:1,overflowY:"hidden",spacing:4,"data-card-notes-bubble-menu-target":!0,children:[(0,a.jsxs)(ej.U,{align:"end",children:[(0,a.jsx)(e5.x,{fontWeight:"600",color:j,wordBreak:"break-word",noOfLines:2,"data-testid":"card-notes-card-title",py:1,children:l}),(0,a.jsx)(e3.L,{}),y&&(0,a.jsx)(eb.kH,{label:(0,a.jsxs)(ej.U,{spacing:0,children:[(0,a.jsx)(x.cC,{id:"GyxUS3"}),(0,a.jsx)(e6.J,{type:"generateCardNotes"})]}),placement:"top",children:(0,a.jsx)(ev.z,{variant:"ghost",onClick:v,isLoading:b,isDisabled:h,size:"sm","aria-label":p.ag._({id:"ziAjHi"}),rightIcon:(0,a.jsx)(D.G,{icon:e4.JyM}),flexShrink:0,children:(0,a.jsx)(x.cC,{id:"ziAjHi"})})})]}),(0,a.jsx)(e7.z,{isEditable:i,isDark:m}),i&&(0,a.jsxs)(ej.U,{children:[(0,a.jsx)(eb.kH,{label:s?(0,a.jsx)(x.cC,{id:"cbqngJ"}):(0,a.jsx)(x.cC,{id:"4OtlnH"}),children:(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(A.h,{"aria-label":s?p.ag._({id:"cbqngJ"}):p.ag._({id:"4OtlnH"}),icon:(0,a.jsx)(D.G,{icon:O.acZ}),onClick:u,isDisabled:!s,flex:1})})}),(0,a.jsx)(eb.kH,{label:o?(0,a.jsx)(x.cC,{id:"EyUKqu"}):(0,a.jsx)(x.cC,{id:"ggpGEd"}),children:(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(A.h,{"aria-label":o?p.ag._({id:"EyUKqu"}):p.ag._({id:"ggpGEd"}),icon:(0,a.jsx)(D.G,{icon:O.eFW}),onClick:d,isDisabled:!o,flex:1})})})]})]})]})})})};tv.panelPosition="right",tv.panelName="card-notes";let tC=()=>{let{togglePanel:e,isPanelOpen:t}=ei(tv),{editor:n}=(0,e0._)(),i=(0,F.TL)(),r=(0,y.ye)("cardNotes"),s=(0,F.CG)(W.gh)===eK.q.SLIDE_VIEW;(0,g.useEffect)(()=>{t&&(!r||s)&&e()},[r,t,e,s]),(0,g.useEffect)(()=>{!t&&n&&(i((0,e$.mK)({isOpen:!1})),n.view.dispatch(n.state.tr))},[i,n,t,e]),(0,g.useEffect)(()=>{if(r&&n)return eQ.T.on("toggle",r=>{let{config:s,clickedCardId:o,activeNotesCardId:l}=r;t&&o!==l||(e(s),i((0,e$.mK)({isOpen:!t})),n.view.dispatch(n.state.tr))})},[i,n,r,t,e])},tb="drag-in-progress",ty=()=>{(0,g.useEffect)(()=>{let e=()=>{document.body.classList.add(tb)},t=()=>{document.body.classList.remove(tb)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),()=>{document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])};var tk=n(85048),tw=n(54349),tS=n(42822),tE=n(43297),tI=n(81540),tA=n(8142),tT=n(27821),t_=n(90831),tO=n(88670),tD=n(85064),tR=n(16882),tP=n(66295),tL=n(69465),tz=n(24772),tG=n(39871),tN=n(27042),tM=n(1613),tU=n(46625),tF=n(50645),tW=n(6827);let tH=()=>{let e=(0,ed.iq)({lg:100,xl:125,"2xl":150})||100,t=(0,F.CG)(tG.K5),n=null!==t?t:e;return{previewWidth:n,width:n+40,fontSize:n/tW.DB}};var tq=n(38799),tB=n(6814),tV=n(32140);let tK=()=>{let e=(0,F.CG)(tB.Fp),t=(0,y.ye)("filmstrip"),n=(0,F.CG)(tV.fh),i=(0,tq.Br)("comment"),r=(0,F.CG)(W.gh),s=(0,F.CG)((0,ee.SL)("left")),o=(0,F.CG)(eS.Lw),l=n===tk.Z.COLLABORATIVE||e;return t&&l&&(i||e)&&r===eK.q.DOC_VIEW&&!(0,ek.s2)()&&!s&&!o},tY=()=>{let e=(0,eo.E)(),t=et(),n=en(),i=(0,ed.iq)({base:!1,lg:!0,"3xl":!1}),r=(0,F.CG)(W.Hl),s=(0,F.CG)(tG.GX),o=tK(),l=(0,tF.WD)(),a=s&&o&&i,c=(0,tN.k)(),d=(0,tz.S)({base:"0px",[tM.K0]:tU.bk})||"0px",{width:u}=tH();return(0,g.useMemo)(()=>{let i=a?"".concat(u,"px"):l.src&&"bottom-left"===l.position?"".concat(l.width+l.paddingX/2,"px"):"0px",s=r?d:c?"60px":"0px";return{"--doc-padding-left":e?s:i,"--doc-padding-right":e?i:s,"--present-padding-left":"".concat(t,"px"),"--present-padding-right":"".concat(n,"px"),"--comment-slide-margin":d}},[u,t,r,n,c,d,l,a,e])};var tZ=n(72658);let tJ=e=>"tablet"===e?"768px":"mobile"===e?(0,ek.s2)()?"100vw":"375px":"100vw",tX=e=>{let{loading:t,...n}=e,{editor:i,docId:r,previewSize:s}=n;return(0,a.jsxs)(tA.BU,{children:[(0,a.jsx)("style",{id:"global-styles",dangerouslySetInnerHTML:{__html:tZ.W.toString()}}),(0,a.jsx)(tT.cL,{children:(0,a.jsx)(c.k,{pos:"relative",justifyContent:"center",bg:"#C5C5C5",flex:1,children:!t&&i&&r?(0,a.jsx)(tQ,{...n,editor:i,docId:r}):(0,a.jsx)(d.xu,{flexDirection:"column",w:tJ(s),h:"var(--100vh)",bg:"gray.100","data-testid":"preview-editor-loading",inset:0,children:(0,a.jsx)(tS.M,{h:"100%",children:(0,a.jsx)(tE.K,{align:"center",children:(0,a.jsx)(tI.$,{})})})})})})]})},tQ=e=>{let{docId:t,editor:n,previewSize:i,onCreate:r}=e,s=(0,g.useMemo)(()=>(0,t_.y)().concat(tO.F),[]),o=(0,g.useMemo)(()=>n.getJSON(),[n]),l="mobile"===i?"mobile":"desktop",h=(0,tR.j)({async onCreate(e){let{editor:t}=e;console.debug("[SimpleEditor][onCreate] TipTap editor is now ready"),null==r||r({editor:t})},content:o,extensions:s,editable:!1});h.shouldUsePublishedVersion=!0;let{editorAnimationsClass:x,editorAnimationsCSSVars:p}=(0,eL.k)({editor:h,instanceId:l,scrollingParentSelector:".".concat(tk.B)}),m=(0,F.CG)(e_.lH),f=(0,F.CG)(W.Pu),j=(0,tL.nT)(m),v=j?eG.ZQ:0,C=tJ(i),b=tY();return(0,a.jsxs)(d.xu,{className:(0,u.cx)("preview-editor-root",x),style:p,w:C,h:"100%",css:{...b,"--editor-width":C,"--doc-padding-top":"".concat(v,"px"),"--editor-padding-top":"".concat(50,"px")},position:"relative",shadow:"xl",children:[m&&j&&(0,a.jsx)(c.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:"10",children:(0,a.jsx)(tD.n,{theme:f,editable:!1,content:m.navContent},"".concat(t,"__preview-editor-nav__").concat(l,"}"))}),(0,a.jsx)(tP.f,{editor:h},"".concat(t,"__preview-editor__").concat(l,"}"))]})};var t$=n(85949),t0=n(53078);let t1=()=>{let e=(0,F.CG)(e_.lH),t=(0,F.CG)(W.Pu),n=(0,F.qr)(),[i]=(0,t$.Iyu)(),r=(0,g.useCallback)(async e=>{var t;let{editor:r}=e,s=null===(t=(0,e_.lH)(n.getState()))||void 0===t?void 0:t.id;s&&await i({variables:{input:{siteId:s,navContent:r.state.doc.toJSON()}}})},[i,n]),s=(0,tg.Kt)(r,500);return e?(0,a.jsx)(c.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:t0.S.siteNav,children:(0,a.jsx)(tD.n,{theme:t,onUpdate:s,content:e.navContent,editable:!0,scrollingParentSelector:".".concat(tk.B)})}):null};var t2=n(78321),t5=n(57333),t3=n(32225),t4=n(10625),t6=n(67046),t8=n(99058),t9=n(44035),t7=n(39237),ne=n(27599),nt=n(12483),nn=n(6238),ni=n.n(nn),nr=n(46194),ns=n(36893);let no=ni()(()=>parseFloat(getComputedStyle(document.documentElement).fontSize)),nl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{fontSize:t,defaultContentWidth:n}=(0,F.CG)(W.B_);return na({zoomLevel:e,docSettingsFontSize:t,defaultContentWidth:n,viewportScaleFactor:(0,nr.n)(),theme:(0,F.CG)(W.Pu)})},na=e=>{let{docSettingsFontSize:t,defaultContentWidth:n,zoomLevel:i=1,viewportScaleFactor:r,theme:s}=e,o=(0,ek.s2)(),{cardWidthEms:l,baseFontSize:a}=(0,ns.R)({fontSize:t,contentWidth:n,theme:s,isMobileDevice:o});return r*a*no()*i*l};var nc=n(12971),nd=n(55758);let nu={portrait:{max:1.2,min:.4},landscape:{max:1.4,min:.5}};function nh(e,t){var n;let i=e&&getComputedStyle(e).getPropertyValue(t);return i?parseInt(null===(n=i.match(/\d+/))||void 0===n?void 0:n[0],10):0}let nx=e=>{let{cardWrapperWidth:t,cardWrapperLeftPaddingNum:n,cardWrapperRightPaddingNum:i}=e;return t-n-i},np=e=>{let{editor:t,editorWrapperDiv:n,aspectRatioValue:i}=e,r=(0,F.TL)(),s=(0,y.ye)("doc-zoom"),o=(0,F.CG)(W.oc),l=(0,g.useCallback)(e=>{let t=o?nu[o].max:1.2,n=o?nu[o].min:.7;e<t&&e>n?r((0,W.GV)({zoomLevel:e})):e>=t?r((0,W.GV)({zoomLevel:t})):e<=n&&r((0,W.GV)({zoomLevel:n}))},[r,o]),a=(0,F.CG)((0,ee.CO)("left")),c=(0,F.CG)((0,ee.CO)("right")),d=(0,F.CG)(W.tt),u=t&&(0,nc.Sh)(t,0),h=nl(),x=(0,g.useCallback)(()=>{try{if(!n||!i||!s)return;document.body.classList.add(nd.o8);let e=function(e,t){let n=null==e?void 0:e.querySelector(".card-wrapper"),i=nh(n,"padding-top"),r=nh(n,"padding-bottom"),s=null==n?void 0:n.clientWidth,o=nh(n,"padding-left"),l=nh(n,"padding-right");return{editorHeight:t.clientHeight,cardWrapperTopPaddingNum:i,cardWrapperBottomPaddingNum:r,cardWrapperWidth:s,cardWrapperLeftPaddingNum:o,cardWrapperRightPaddingNum:l}}(u,n),t=nx(e),r=t/i,o=function(e){let{editorHeight:t,cardWrapperTopPaddingNum:n,cardWrapperBottomPaddingNum:i}=e;return t-n-i}(e);if(r-o>-10){let e=o*i,t=Math.round(e/h*100);l(t/100)}else{let e=Math.round(t/h*100);l(e/100)}requestAnimationFrame(()=>{document.body.classList.remove(nd.o8)})}catch(e){nt.Tb(e),console.error(e)}},[n,i,s,u,h,l]);(0,g.useEffect)(()=>{d&&x()},[d,x]),(0,g.useEffect)(()=>{d&&eT()(x,200)()},[d,x,a,c]),(0,g.useEffect)(()=>(d&&window.addEventListener("resize",x),d||window.removeEventListener("resize",x),()=>{window.removeEventListener("resize",x)}),[x,d])},nm=[1.4,1.3,1.2,1.1,1,.9,.8,.7,.6,.5],nf=e=>{let{editor:t,editorWrapperDiv:n,aspectRatioValue:i}=e,r=(0,ec.Yy)(),s=(0,F.TL)(),o=(0,F.CG)(W.B_),l=(0,F.CG)(W.e_),c=(0,F.CG)(W.MK),d=(0,F.CG)(W.tt);np({editor:t,editorWrapperDiv:n,aspectRatioValue:i});let u=e=>{s((0,W.GV)({zoomLevel:e}))},h=e=>{s((0,W.cN)({enabled:e}))};return(0,g.useEffect)(()=>{"social"===l.formatType&&s((0,W.cN)({enabled:!0}))},[s,l.formatType]),(0,g.useEffect)(()=>{"fluid"===o.cardDimensions&&(s((0,W.GV)({zoomLevel:1})),s((0,W.cN)({enabled:!1})))},[s,o.cardDimensions]),(0,a.jsx)(eb.Wk,{isDark:r,children:(0,a.jsxs)(t4.v,{children:[(0,a.jsx)(t6.j,{as:ev.z,position:"relative",size:"xs",minWidth:"54px",sx:{"font-variant-numeric":"tabular-nums"},children:"".concat(Math.round(100*c),"%")}),(0,a.jsx)(t8.q,{children:(0,a.jsxs)(t9._,{value:d?"fit":"".concat(c),onChange:e=>{if("fit"===e){h(!0);return}u(parseFloat(e)),h(!1)},children:[nm.map(e=>(0,a.jsxs)(t7.i,{value:"".concat(e),children:[Math.round(100*e),"%"]},e)),"fluid"!==o.cardDimensions&&(0,a.jsx)(ne.R,{}),"fluid"!==o.cardDimensions&&(0,a.jsx)(t7.i,{value:"fit",children:p.ag._({id:"u4iXQi"})})]})})]})})},ng=e=>{let{editor:t,editorWrapperDiv:n,aspectRatioValue:i}=e,r=(0,y.ye)("doc-zoom");return(0,a.jsx)(t5.H,{children:(0,a.jsxs)(e2.g,{children:[r&&(0,a.jsx)(nf,{editor:t,editorWrapperDiv:n,aspectRatioValue:i}),(0,a.jsx)(t3.C,{showTourReplay:!0})]})})};var nj=n(32981),nv=n(26468),nC=n(73751),nb=n(2338),ny=n(97217),nk=n(50250),nw=n(58125),nS=n(30764),nE=n(38260),nI=n(85336),nA=n(43271),nT=n(15998),n_=n(40802),nO=n(931),nD=n(5968),nR=n(23764),nP=n(74216);let nL=g.createContext({enabled:!1,registerEditor:(e,t)=>{},getAllCards:()=>[],userMessage:"",setUserMessage:e=>{}});function nz(){return(0,g.useContext)(nL)}let nG=e=>{let{children:t}=e,n=(0,g.useRef)(new Map),i=(0,g.useRef)(""),r=(0,g.useRef)((e,t)=>{n.current.set(e,t)}),s=(0,g.useRef)(()=>Array.from(n.current.values()).map(e=>{var t,n;return null===(n=e.state.doc.firstChild)||void 0===n?void 0:null===(t=n.content.toJSON())||void 0===t?void 0:t[0]}).filter(Boolean)),o=(0,g.useCallback)(e=>{i.current=e},[]);return(0,a.jsx)(nL.Provider,{value:{enabled:!0,registerEditor:r.current,getAllCards:s.current,userMessage:i.current,setUserMessage:o},children:t})};var nN=n(68785),nM=n(67308),nU=n(56581),nF=n(27917);let nW=e=>{let{cardId:t,onClick:n}=e,i=(0,F.CG)((0,nN.l_)(t)),r=(0,F.CG)(W.Pu);return i?(0,a.jsxs)(tE.K,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[i.variants.map(e=>{if(!e)return null;let{label:s,card:o,id:l}=e;return(0,a.jsx)(nH,{theme:r,isSelected:i.selected===l,label:s,card:o,onClick:()=>{n({cardId:t,variationId:l})}},l)}),i.variants.length<2&&(0,a.jsx)(tS.M,{children:(0,a.jsx)(tI.$,{})})]}):null},nH=e=>{let{label:t,card:n,theme:i,isSelected:r=!1,onClick:s=()=>{}}=e,o=(0,g.useMemo)(()=>(0,nF.vL)({docFlags:{cardLayoutsEnabled:!0}},[n]),[n]);return(0,a.jsxs)(tE.K,{align:"start",children:[(0,a.jsx)(c.k,{borderRadius:"md",bg:"white",shadow:r?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:s,children:(0,a.jsx)(c.k,{sx:nD.n,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,a.jsx)(nD.m,{content:o,theme:i,isThumbnail:!0})})}),(0,a.jsxs)(e5.x,{fontSize:"sm",children:[r&&(0,a.jsx)(nU.n,{boxSize:3,mr:2}),t]})]})},nq="ai-wizard-editor-root",nB=e=>{let{doc:t,cards:n,theme:i=(0,nT.y)()}=e,r=(0,nP.R5)(i),s=(0,nA.wj)(i),o=(0,nP.wh)(r,s),l=(0,F.TL)(),{registerEditor:d}=nz();return((0,g.useEffect)(()=>()=>{l((0,nN.mc)())},[l]),t)?(0,a.jsxs)(c.k,{bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:nq,...o,children:[(0,a.jsx)(nR.Y,{}),n.map((e,n)=>{var i;let r=null===(i=e.attrs)||void 0===i?void 0:i.id;return r?(0,a.jsx)(nV,{doc:t,cardId:r,cardIndex:n,cardJSON:e,onCreate:e=>{d(r,e)}},r):null})]}):null},nV=e=>{let{cardId:t,cardIndex:n,cardJSON:i,doc:r,onCreate:s}=e,o=(0,F.TL)(),[l,d]=(0,g.useState)(null),{userMessage:u}=nz(),h=(0,nM.b)({editor:l});(0,g.useEffect)(()=>{l&&h({doc:l.state.doc,cardId:t,message:u})},[h,l,t,n,u]);let x=(0,g.useMemo)(()=>(0,n_.vL)({docFlags:{cardLayoutsEnabled:!0}},[i]),[i]),p=(0,F.CG)((0,nN.a4)(t));(0,tg.vm)(()=>{if(!l||!p)return;let e=(0,eB.Bw)(l,t);e&&l.commands.command(t=>{let{tr:n}=t,i=nS.NB.fromJSON(l.schema,p.card);return n.replaceWith(e.pos,e.pos+e.node.nodeSize,i),!0})},[l,p,t],[p]);let m=(0,g.useCallback)(e=>{let{cardId:n,variationId:i}=e;l&&n===t&&o((0,nN.dx)({cardId:t,variantId:i}))},[o,l,t]);return(null==r?void 0:r.id)?(0,a.jsxs)(c.k,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:nD.n,my:-8,children:[(0,a.jsx)(nW,{cardId:t,onClick:m}),(0,a.jsx)(nO.y,{initialContent:x,onCreate:e=>{let{editor:t}=e;d(t),s(t)},doc:r,docId:r.id,scrollingParentSelector:".".concat(nq),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null};var nK=n(27238);let nY=e=>{let{isOpen:t,onClose:n,onOpen:i}=(0,nK.M)({id:"cardSuggestionDrawer"}),r=(0,F.CG)(W.Pu),[s]=(0,g.useState)(()=>(0,nw.xC)({reducer:F.Ct}));return(0,a.jsx)(j.zt,{store:s,children:(0,a.jsx)(nZ,{...e,isOpen:t,onClose:n,onOpen:i,theme:r})})},nZ=(i=e=>{let{doc:t,editor:n,theme:i,isOpen:r,onClose:s,onOpen:o}=e,[l,c]=(0,g.useState)([]),[d,u]=(0,g.useState)(null),{getAllCards:h,setUserMessage:p}=nz(),m=(0,g.useCallback)(()=>{s(),c([]),u(null)},[s]),f=(0,g.useCallback)(()=>{if(m(),!n)return;let e={type:"document",content:h()};console.log("[handleConfirm] contentToUse",e);let t=1,i=n.state.doc.nodeSize-2,r=(0,eB.Bw)(n,d);if(r){i=(t=r.pos)+r.node.nodeSize;let n=e.content.find(e=>{var t;return(null===(t=e.attrs)||void 0===t?void 0:t.id)===d});if(!n){console.warn("[handleConfirm] Count not find card to use");return}e=n}n.commands.command(r=>{let{tr:s}=r;return s.replaceRangeWith(t,i,nS.NB.fromJSON(n.schema,e)),!0})},[m,n,d,h]),j=(0,g.useCallback)(async(e,t,n)=>{o(),u(t),c(e.toJSON().content[0].content.filter(e=>{var n;return null===t||(null===(n=e.attrs)||void 0===n?void 0:n.id)===t})),p(n)},[o,p]);return(0,g.useEffect)(()=>{if(n)return nI.T.on("openSuggestionEditor",e=>{let{cardId:t,userMessage:i}=e;j(n.view.state.doc,t,i)})},[n,j]),(0,a.jsxs)(nj.d,{placement:"bottom",onClose:s,isOpen:r,trapFocus:!0,isFullHeight:!0,children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(nC.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,a.jsx)(nb.o,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,a.jsx)(ny.f,{p:0,h:"100%",children:l.length>0&&t?(0,a.jsx)(nB,{doc:t,cards:l,theme:i}):(0,a.jsx)(nE.AA,{})}),(0,a.jsx)(nk.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,a.jsxs)(eC.h,{spacing:4,children:[(0,a.jsx)(ev.z,{variant:"ghost",onClick:s,children:(0,a.jsx)(x.cC,{id:"dEgA5A"})}),(0,a.jsx)(ev.z,{variant:"solid",onClick:f,children:(0,a.jsx)(x.cC,{id:"7VpPHA"})})]})})]})]})},(0,g.memo)(e=>(0,a.jsx)(nG,{children:(0,a.jsx)(i,{...e})})));var nJ=n(65702),nX=n(75009),nQ=n(74409),n$=n(6717),n0=n(10001),n1=n(3699),n2={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"},n5=n(63416),n3=n(83906),n4=n(82108),n6=n.n(n4);let n8=e=>{let{count:t,onClose:n,commentStatusFilter:i,setCommentStatusFilter:r}=e,s=i===t$.Ux9.Open?p.ag._({id:"Kz1TxG"}):p.ag._({id:"kywJax"});return(0,a.jsxs)(c.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,a.jsx)(c.k,{flex:1,children:(0,a.jsxs)(ej.U,{spacing:4,children:[(0,a.jsx)(e9.V,{children:(0,a.jsx)(x.cC,{id:"eiUA4k",values:{count:t}})}),(0,a.jsxs)(t4.v,{closeOnSelect:!0,children:[(0,a.jsx)(t6.j,{as:ev.z,size:"sm",rightIcon:(0,a.jsx)(n3.v,{}),children:n6()(s)}),(0,a.jsx)(t8.q,{zIndex:3,children:(0,a.jsxs)(t9._,{defaultValue:i,title:p.ag._({id:"0cVgUw"}),type:"radio",children:[(0,a.jsx)(t7.i,{onClick:()=>r(t$.Ux9.Open),value:"open",children:(0,a.jsx)(x.cC,{id:"1TNIig"})}),(0,a.jsx)(t7.i,{onClick:()=>r(t$.Ux9.Closed),value:"closed",children:(0,a.jsx)(x.cC,{id:"D87pha"})})]})})]})]})}),(0,a.jsx)(e1.P,{onClick:n,"data-comment-feed-close-button":!0})]})};var n9=n(18730),n7=n(12560),ie=n(6167);let it=e=>{let{user:t,editor:n}=e,[i,r]=(0,g.useState)(()=>{let e=(0,n7.W1)(n,tU.Et);return e&&e.length?e[0]:(0,n7.xN)(()=>tU.Et,n,"")});(0,g.useEffect)(()=>{if(i&&n)return()=>{var e,t;null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,i)}},[i,n]);let s=(0,ie.iZ)({draftComment:i,clearDraftComment(){var e,t,s,o;i&&(null===(s=(o=n.commands).removeDraftComments)||void 0===s||s.call(o,[i]));let l=(0,n7.xN)(()=>tU.Et,n,"");null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,l),r(l)},editor:n}),o=(0,g.useCallback)(e=>{let{editor:t}=e;r(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},[]);return(0,a.jsx)(n9.A,{draftComment:i,user:t,onCommentDraftUpdate:o,onCommentSave:s,commentIdToHighlight:null})},ii=()=>({today:p.ag._({id:"ecUA8p"}),thisWeek:p.ag._({id:"yByRxz"}),earlier:p.ag._({id:"HPqZkW"})}),ir=e=>{var t;let{onClose:n,editor:i}=e,r=(0,F.CG)(W.yx),{isConnected:s}=(0,C.$)(),[o,l]=(0,g.useState)(t$.Ux9.Open),u=null==r?void 0:r.comments,h=null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===o),p=(0,F.CG)(W.gh),m=(0,eX.py)("comment",r)&&s,{user:f}=(0,eX.SE)(),j=(0,b.$m)(r,f),v=(0,g.useMemo)(()=>(0,n5.yd)({items:h||[],sortBy:n5.Yz,latestTimeGetterFn:n5.z3}),[h]);return u&&r&&i?(0,a.jsxs)(c.k,{direction:"column",h:"100%",overflowX:"hidden",className:n$.G,w:"100%",children:[(0,a.jsx)(n8,{commentStatusFilter:o,setCommentStatusFilter:l,count:(null==h?void 0:h.length)||0,onClose:n}),(0,a.jsxs)(c.k,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,a.jsx)(X.V,{description:(0,a.jsx)(x.cC,{id:"pQvCbR"}),isConnected:s,mx:6}),j&&!f&&r&&(0,a.jsx)(n1.I,{doc:r,accessLink:j}),m&&(0,a.jsx)(d.xu,{px:6,py:2,children:(0,a.jsx)(it,{user:f,editor:i})}),!(null==h?void 0:h.length)&&(0,a.jsxs)(e2.g,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,a.jsx)(d.xu,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,a.jsx)(nX.E,{src:n2.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,a.jsxs)(d.xu,{children:[(0,a.jsx)(nQ.X,{size:"xs",mb:2,children:"open"===o?(0,a.jsx)(x.cC,{id:"W7i5f5"}):(0,a.jsx)(x.cC,{id:"mpDN1V"})}),(0,a.jsx)(e5.x,{fontSize:"sm",children:(0,a.jsx)(x.cC,{id:"iB9OEi"})})]})]}),Object.entries(v).filter(e=>{let[,t]=e;return t.length}).map(e=>{let[t,s]=e;return(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(eb.NZ,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:ii()[t]}),(0,a.jsx)(c.k,{direction:"column",children:s.map(e=>(0,a.jsx)(n0.q,{instanceType:"feed",userCanComment:m,editor:i,comment:e,selfUser:f,docId:null==r?void 0:r.id,editorMode:p,onClose:n,isRootComment:!0,pt:6,px:6,pb:4},e.id))})]},t)})]})]}):null},is=e=>{let{closePanel:t}=e,{editor:n}=(0,e0._)();return(0,g.useEffect)(()=>{let e=e=>{let{open:n}=e;n&&t()};return nJ.pw.on(nJ.TI.POPUP_COMMENT_TOGGLED,e),()=>{nJ.pw.on(nJ.TI.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,a.jsx)(e8.s,{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,a.jsx)(ir,{onClose:t,editor:n})})};is.panelPosition="right",is.panelName="comment-feed";let io=()=>{let{togglePanel:e,isPanelOpen:t}=ei(is);return{toggleCommentsPanel:e,isCommentsPanelOpen:t}};var il=n(87202),ia=n(43901),ic=n(39097),id=n.n(ic),iu=n(74810),ih=n(91076);let ix=()=>{var e,t;let n=(0,F.CG)(W.yx),{user:i}=(0,ih.SE)(),r=(0,ih.py)("manage",n)&&!!i,s=null==n?void 0:null===(e=n.docGenerateInput)||void 0===e?void 0:e.docGeneration;if(n&&s&&(null===(t=n.createdBy)||void 0===t?void 0:t.id)===(null==i?void 0:i.id)&&r)return(0,ew.Xn)(s)};var ip=n(47443),im=n(80877),ig=n(74444),ij=n(17689);let iv=e=>{let{onClose:t}=e;return(0,a.jsxs)(tE.K,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,a.jsx)(nX.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,a.jsx)(ij.K,{children:(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"jVQv+Q"})})}),(0,a.jsx)(ev.z,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,a.jsx)(D.G,{icon:O.g82}),onClick:t,children:(0,a.jsx)(x.cC,{id:"pqZJT2"})})]})},iC=()=>(0,a.jsxs)(ip.b,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,a.jsx)(im.C,{children:(0,a.jsx)(x.cC,{id:"rvbk/4"})}),(0,a.jsx)(ig.X,{children:(0,a.jsx)(x.cC,{id:"XNkIFY"})})]});var ib=n(74105),iy=n(29494),ik=n(27191);let iw="40px",iS=e=>{let{value:t,onChange:n,onSubmit:i,isLoading:r,editor:s,resetMessages:o}=e;(0,tq.F1)(s);let{selection:l,doc:c}=s.state,d=c.textBetween(l.from,l.to,"\n"),u=(0,J.Y)("unlimited_credits"),h=(0,g.useRef)(null),[m,f]=(0,g.useState)(!1),j=l instanceof ik.qv,v=l instanceof ik.Bs,C=j&&"card"===l.node.type.name,b=l.empty||C?p.ag._({id:"XrfE9D"}):j?p.ag._({id:"CsUli9"}):v&&d?p.ag._({id:"+NPPZN",values:{0:d.length>50?d.slice(0,50)+"...":d}}):p.ag._({id:"/fY1js"}),y=(0,g.useCallback)(()=>{h.current&&(h.current.style.height=iw,h.current.style.height="".concat(h.current.scrollHeight,"px"))},[]);return(0,g.useEffect)(()=>(s.on("selectionUpdate",y),()=>{s.off("selectionUpdate",y)}),[s,y]),(0,g.useEffect)(()=>{m?y():setTimeout(()=>{f(!0),y()},400)},[m,b,y,t]),(0,a.jsxs)(ej.U,{align:"end",children:[(0,a.jsx)(ib.B,{size:"md",children:(0,a.jsx)(iy.g,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:iw,minH:iw,ref:h,resize:"none",maxH:m?32:iw,bg:"white",shadow:"md",autoFocus:!0,placeholder:b,value:t,onKeyPress:e=>{"Enter"!==e.key||!(t.length>0)||r||e.shiftKey||(e.preventDefault(),i())},onChange:e=>n(e.target.value),paddingInlineEnd:12})}),(0,a.jsx)(eb.kH,{placement:"top",label:(0,a.jsxs)(e2.g,{spacing:0,children:[(0,a.jsx)(x.cC,{id:"4k2VbT"}),!u&&(0,a.jsx)(e5.x,{color:"gray.400",children:(0,a.jsx)(x.cC,{id:"jxCfNz",components:{0:(0,a.jsx)(e6.J,{type:"chatSuggestion",ml:0})}})}),(0,a.jsx)(eb.f2,{shortcut:"Enter"})]}),children:(0,a.jsx)(A.h,{"aria-label":"Send message",isDisabled:!t||r,size:"sm",h:iw,w:iw,variant:"solid",icon:(0,a.jsx)(D.G,{icon:e4.FzC,fixedWidth:!0}),onClick:i})})]})};var iE=n(52740),iI=n(98683),iA=n(73145);let iT=e=>{let{editor:t,scrollSelector:n,onClose:i}=e,[r,s]=(0,g.useState)(""),o=(0,y.ye)("openAiStatus"),l=(0,F.TL)(),d=(0,eq.As)("editor"),u=(0,F.qr)(),h=(0,F.CG)(iI.AZ),p=(0,F.CG)(iI.Q_),[m,f]=(0,g.useState)(null),j=(0,g.useCallback)(()=>(0,iI.AZ)(u.getState()),[u]),v=(0,g.useCallback)(e=>{let t={timestamp:Date.now(),...e};l((0,iI.Hz)({message:t}))},[l]),C=(0,g.useCallback)(()=>{l((0,iI.mc)())},[l]),{status:b,sendMessage:k}=(0,iA.n)({addMessage:v,getMessageHistory:j,editor:t});(0,g.useEffect)(()=>{let e=n&&document.querySelector(n);e&&requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})},[n,h]);let w="idle"!==b;(0,g.useEffect)(()=>{if(!p.length||w)return;let{task:e,id:t}=p[0];!1===e.submit?s(e.message):k({message:e.message}),l((0,iI.VB)({id:t}))},[w,k,l,p]);let S=(0,g.useCallback)(()=>{if(!m||!t)return;let e=document.querySelector('[data-card-id="'.concat(m,'"]')),n=(0,eq.v4)(e,100);null!=n&&n.yAxisInView||d.scrollElementIntoView({element:e})},[t,d,m]),E=(0,g.useCallback)(e=>{S(),k({message:e})},[S,k]),I=(0,g.useCallback)(()=>{E(r),s("")},[E,r]),T=(0,tu.YO)(I,"chatSuggestion",eM.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT);(0,g.useEffect)(()=>{if(!t)return;let e=()=>{let e=(0,to.AQ)(t.state.doc,t.state.selection.from);e&&f(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t]);let _=ix();return t?"DOWN"===o?(0,a.jsx)(iv,{onClose:i}):(0,a.jsxs)(c.k,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===o&&(0,a.jsx)(iC,{}),(0,a.jsx)(iE.rN,{scrollSelector:n,messages:h,editor:t,sendMessage:E,isLoading:w,onClose:i}),(0,a.jsxs)(tE.K,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,a.jsx)(iS,{editor:t,value:r,onChange:s,onSubmit:T,isLoading:w,resetMessages:C}),(0,a.jsx)(iu.q,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:eM.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,a.jsxs)(eC.h,{position:"absolute",top:1,insetInlineStart:4,variant:"ghost",colorScheme:"blackAlpha",children:[(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"5eg0kp"}),placement:"top",children:(0,a.jsx)(A.h,{color:"currentColor","aria-label":"reset-chat",icon:(0,a.jsx)(D.G,{icon:O.YcH}),onClick:C,isRound:!0})}),_&&(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"pC3anp",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}),placement:"top",children:(0,a.jsx)(A.h,{color:"currentColor","aria-label":"source-prompt",icon:(0,a.jsx)(D.G,{icon:O.Fzb}),as:id(),href:_,target:(0,ek.Q5)()?"_self":"_blank",isRound:!0})})]})]}):null},i_=e=>{let{onClose:t}=e;return(0,a.jsx)(c.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,a.jsx)(e1.P,{"data-design-partner-close-button":!0,position:"absolute",top:2,insetInlineEnd:6,zIndex:1,onClick:t})})},iO="design-partner-panel-wrapper",iD=()=>{let{togglePanel:e,isPanelOpen:t}=ei(iR),{editor:n}=(0,e0._)(),i=(0,y.ye)("aiChat"),r=(0,F.TL)();(0,g.useEffect)(()=>()=>{r((0,iI.mc)())},[]);let s=(0,F.CG)(W.hN);return(0,g.useEffect)(()=>{!s&&t&&e()},[s,t,e]),(0,g.useEffect)(()=>{var e,i;n&&(null===(e=(i=n.commands).setSalOpen)||void 0===e||e.call(i,t))},[n,t]),(0,g.useEffect)(()=>{if(i)return ia.T.on("toggle",t=>{let{config:n}=t;e(n)})},[e,i]),(0,g.useEffect)(()=>{if(i)return nJ.pw.on("queueDesignPartnerTask",t=>{r((0,iI.Lj)({task:t})),e({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",t)})},[r,i,e]),(0,g.useEffect)(()=>{if(!i||!s)return;let t=(0,il.ZP)("mod+shift+S");return el.F7.on("keydown","DESIGN_PARTNER_PANEL",n=>!!t(n)&&(e(),!0))},[e,i,s]),{isDesignPartnerPanelOpen:t}},iR=e=>{let{closePanel:t}=e,{editor:n}=(0,e0._)();return(0,g.useEffect)(()=>el.F7.on("keydown","DESIGN_PARTNER_PANEL",e=>!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)),[t]),(0,a.jsx)(e8.s,{bgColor:"gray.50","data-panelid":"design-partner-panel",borderInlineStartWidth:"1px",children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:iO,w:"100%",children:[(0,a.jsx)(i_,{onClose:t}),(0,a.jsx)(iT,{editor:n,scrollSelector:".".concat(iO),onClose:t})]})})};iR.panelPosition="right",iR.panelName="chat";let iP=e=>{let{disabled:t=!1,docId:n}=e;if(!t)return null;let i="https://metabase.internal.gamma.app/question/1558-workspace-lookup-by-id?org_id=none&doc_id=".concat(n);return(0,a.jsxs)(c.k,{direction:"row",bg:"red.500",color:"white",py:3,px:4,align:"center",fontSize:"sm",children:[(0,a.jsxs)(e2.g,{flex:"1",align:"start",spacing:0,children:[(0,a.jsxs)(e5.x,{fontWeight:"bold",children:["This ",Z.Yc," is disabled."]}),(0,a.jsx)(e5.x,{opacity:"0.7",fontSize:"xs",children:"It is only visible to Gamma support personnel. For more information, check the admin site."})]}),(0,a.jsx)(ev.z,{variant:"plain",size:"sm",mr:4,rightIcon:(0,a.jsx)(D.G,{icon:O.wlW}),onClick:()=>{i&&window.open(i,"_blank")},children:"Admin page"})]})};var iL=n(70065),iz=n(26284),iG=n(87651),iN=n(17190),iM=n(5361),iU=n(58284),iF=n(97590),iW=n(21697),iH=n(50828);let iq=["90%","360px"],iB=e=>{let{onClose:t,eyebrowText:n,mainText:i,callsToAction:r}=e;return(0,a.jsxs)(d.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:iq,maxW:iq,position:"relative",children:[(0,a.jsx)(e1.P,{size:"sm",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(tE.K,{spacing:1,paddingEnd:3,children:[!(0,ek.s2)()&&(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.600",children:n}),(0,a.jsx)(e5.x,{fontSize:"md",children:i})]}),(0,a.jsx)(d.xu,{w:"100%",children:r})]})]})},iV=e=>{let{onClose:t,startTour:n}=e;return(0,a.jsx)(iB,{eyebrowText:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,a.jsx)(x.cC,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})]}),mainText:(0,a.jsx)(x.cC,{id:"ntWFEH"}),onClose:t,callsToAction:(0,a.jsx)(ev.z,{size:"md",w:"100%",variant:"solid",onClick:()=>{n(0),t()},children:(0,a.jsx)(x.cC,{id:"VzFYDl"})})})};var iK=n(38914);let iY=["90%","360px"],iZ=e=>{let{onClose:t}=e,[n,i]=(0,g.useState)(!0);return(0,g.useEffect)(()=>{setTimeout(()=>{i(!1)},3e3)},[]),(0,a.jsxs)(d.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:iY,maxW:iY,position:"relative",children:[(0,a.jsx)(e1.P,{size:"md",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,a.jsxs)(tE.K,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,a.jsx)(d.xu,{color:"trueblue.300",children:(0,a.jsx)(D.G,{icon:iK.tc$,size:"2x",className:n?"fa-bounce":void 0})}),(0,a.jsxs)(tE.K,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(x.cC,{id:"eoDgVo"})}),(0,a.jsx)(e5.x,{fontSize:"md",children:(0,a.jsx)(x.cC,{id:"p7dFyi"})})]})]})]})},iJ="source",iX="desktop-tour-toast",iQ="switch-from-mobile-to-desktop-toast",i$=e=>{var t;let{editor:n}=e,i=(0,iL.p)(),r=(0,F.CG)(tV.yx),{startTour:s}=(0,k.c8)(),{user:o,setSettings:l}=(0,eX.SE)(),[a,c]=(0,g.useState)(!1),d=(0,g.useRef)(!1),u=(0,g.useRef)(!1),h=!!(null==o?void 0:null===(t=o.settings)||void 0===t?void 0:t.needsEditorOnboarding),x=(0,F.CG)((0,iF.oH)(null==n?void 0:n.gammaDocId)),p=!!x&&"running"===x.status,m=(0,eq.As)("editor"),[f]=(0,g.useState)(()=>(0,ew.SJ)()[iJ]===iW.VY),[j]=(0,g.useState)(()=>f&&(0,ek.s2)());(0,g.useEffect)(()=>{n&&c(!p&&!(0,ek.s2)()&&f&&h)},[n,f,p,h]),(0,iH.i)(iJ),(0,g.useEffect)(function(){return u.current||!a||i.isActive(iX)||(u.current=!0,setTimeout(()=>{i({id:iX,position:"bottom-left",render:e=>{let{onClose:t}=e;return iV({onClose:()=>{null==l||l({remove:["needsEditorOnboarding"]}),t()},startTour:s})},isClosable:!0,duration:null})},2e3)),()=>{i.isActive(iX)&&(u.current=!0,i.close(iX))}},[l,a,s,i]),(0,g.useEffect)(function(){if(!(0,ek.s2)()||!j)return;let e="body"===m.scrollSelector?document.documentElement:document.querySelector(m.scrollSelector),t=()=>{e&&(0,ek.s2)()&&(null==e?void 0:e.scrollTop)>=(null==e?void 0:e.scrollHeight)/4&&j&&!i.isActive(iQ)&&!d.current&&(d.current=!0,i({id:iQ,position:"top",render:e=>{let{onClose:t}=e;return iZ({onClose:t})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",t,!0),()=>{window.removeEventListener("scroll",t,!0),i.isActive(iQ)&&i.close(iQ)}},[r,m.scrollSelector,j,i])};var i0=n(8940),i1=n(71485);let i2={title:(0,a.jsx)(x.cC,{id:"DD5mqk"}),description:(0,a.jsx)(x.cC,{id:"8BmWcz"}),status:"error",position:"top",isClosable:!0},i5=e=>{var t;let{doc:n,site:i,path:r}=e,s=(0,iL.p)(),o=(0,F.TL)(),l=(0,F.CG)(e_.v),c=(0,i1.ln)(),[u]=(0,i0.zU5)(),[h]=(0,i0.sIg)(),[p]=(0,i0.odt)(),m=(0,F.CG)(e_.B$),f=null==n?void 0:n.id,j=(0,eR.mn)({domain:null==i?void 0:null===(t=i.domains)||void 0===t?void 0:t[0],path:r}),v=null==i?void 0:i.id,C=(0,g.useCallback)(async()=>{if(f){if(c){s(i2);return}(0,e_.yB)(o)(!0),await (0,eR.iL)(f),await h({variables:{id:f},refetchQueries:["GetDoc","GetSite"]}).then(()=>{s({render:function(){return(0,a.jsx)(d.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,a.jsxs)(ej.U,{spacing:4,children:[(0,a.jsx)(d.xu,{children:(0,a.jsx)(D.G,{icon:O.fV7})}),(0,a.jsx)(e5.x,{fontWeight:"semibold",children:(0,a.jsx)(x.cC,{id:"V6Byuz"})}),j&&(0,a.jsx)(ev.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:j,rightIcon:(0,a.jsx)(D.G,{icon:O.wlW}),children:(0,a.jsx)(x.cC,{id:"Zel0o2"})}),(0,a.jsx)(e1.P,{onClick:()=>s.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{s({title:(0,a.jsx)(x.cC,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,e_.yB)(o)(!1)})}},[o,f,c,h,s,j]);return{publishSite:(0,g.useCallback)(async()=>{if(v){if(c){s(i2);return}(0,e_.yB)(o)(!0),m&&await (0,eR.iL)(m),await u({variables:{id:v},update:(e,t)=>{let{data:n}=t,i=null==n?void 0:n.publishSite;i&&i.routes.forEach(t=>{e.updateQuery({query:i0.yE1,variables:{id:t.docId}},e=>{var n,i,r;return(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),null==e?void 0:e.doc)?{doc:{...e.doc,publishedTime:null===(n=t.doc)||void 0===n?void 0:n.publishedTime,publishedSnapshotId:null===(i=t.doc)||void 0===i?void 0:i.publishedSnapshotId,currentSnapshotId:null===(r=t.doc)||void 0===r?void 0:r.currentSnapshotId}}:e})})}}).then(()=>{s({render:function(){return(0,a.jsx)(d.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,a.jsxs)(ej.U,{spacing:4,children:[(0,a.jsx)(d.xu,{children:(0,a.jsx)(D.G,{icon:O.fV7})}),(0,a.jsx)(e5.x,{fontWeight:"semibold",children:(0,a.jsx)(x.cC,{id:"V6Byuz"})}),j&&(0,a.jsx)(ev.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:j,rightIcon:(0,a.jsx)(D.G,{icon:O.wlW}),children:(0,a.jsx)(x.cC,{id:"Zel0o2"})}),(0,a.jsx)(e1.P,{onClick:()=>s.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{s({title:(0,a.jsx)(x.cC,{id:"DD5mqk"}),description:(0,a.jsx)(x.cC,{id:"R4PZ4k"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,e_.yB)(o)(!1)})}},[v,c,o,m,u,s,j]),publishDoc:C,isPublishing:l}};var i3=n(84538),i4=n(5649),i6=n(91e3),i8=n(56630),i9=n(55655),i7=n(82929),re=n(46692);let rt=e=>{let{onGenerateSuccess:t}=e,[n,i]=(0,g.useState)("createWithAI"),[r,s]=(0,g.useState)([]),[o,l]=(0,g.useState)(void 0),c=(0,g.useMemo)(()=>({goToScreen:(e,t)=>{l(null==t?void 0:t.generateId),s(e=>[...e,n]),i(e)},navEnabled:"createGenerate"!==n,webpageOnly:!0,skipThemeStep:!0,onGenerateSuccess:t}),[n,t]),d=(0,g.useMemo)(()=>{switch(n){case"createWithAI":return i8.B;case"createImport":return i6.j;case"createPaste":return i9.L;case"promptEditor":return function(){return(0,a.jsx)(i7.B,{id:o,children:(0,a.jsx)(i3.N,{})})};case"createGenerate":return function(){return o?(0,a.jsx)(i7.B,{id:o,children:(0,a.jsx)(i4.m,{autosetLocale:!1})}):(0,a.jsx)(i4.m,{autosetLocale:!0})};default:throw Error("invalid page")}},[o,n]);return(0,a.jsx)(re.u$.Provider,{value:c,children:(0,a.jsx)(d,{})})},rn=e=>{let{isOpen:t,onClose:n}=e;return(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsxs)(nj.d,{isOpen:t,placement:"bottom",onClose:n,isFullHeight:!0,children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(nC.s,{h:"calc(var(--100vh) - 24px)",p:0,children:[(0,a.jsx)(nb.o,{zIndex:"sticky"}),(0,a.jsx)(ny.f,{p:0,children:(0,a.jsx)(rt,{onGenerateSuccess:n})})]})]})})},ri=e=>{var t;let{doc:n}=e,i=(0,ec.Yy)(),r=(0,iL.p)(),s=null==n?void 0:null===(t=n.accessLinks)||void 0===t?void 0:t[0],o=(0,g.useMemo)(()=>(0,ew.Gn)({docTitle:null==n?void 0:n.title,docId:null==n?void 0:n.id,token:null==s?void 0:s.token,absolute:!0}),[n,null==s?void 0:s.token]),{onCopy:l}=(0,iz.V)(o),c=(0,g.useCallback)(()=>{(0,iM.J)({docId:null==n?void 0:n.id,source:"docWizardFooter",type:"tokenUrl"}),l(),r({title:(0,a.jsx)(x.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==n?void 0:n.id,l,r]),d=ix();return(0,a.jsxs)(tE.K,{spacing:4,textAlign:"center",children:[(0,a.jsx)(nQ.X,{size:"md",children:(0,a.jsx)(x.cC,{id:"bB+DHs"})})," ",(0,a.jsx)(ev.z,{as:id(),target:(0,ek.Q5)()?"_self":"_blank",variant:"solid",colorScheme:i?"blackAlpha":"whiteAlpha",leftIcon:(0,a.jsx)(D.G,{icon:O.r8p}),href:"/create",children:(0,a.jsx)(x.cC,{id:"xFxi2V"})}),d?(0,a.jsx)(ev.z,{leftIcon:(0,a.jsx)(D.G,{icon:O.Fzb}),variant:"plain",as:id(),target:(0,ek.Q5)()?"_self":"_blank",href:d,children:(0,a.jsx)(x.cC,{id:"550oRP"})}):(0,a.jsx)(ev.z,{leftIcon:(0,a.jsx)(D.G,{icon:O.nNP}),variant:"plain",onClick:c,children:(0,a.jsx)(x.cC,{id:"RGCCrg"})})]})},rr=()=>{let{isOpen:e,onClose:t,onOpen:n}=(0,nK.M)({id:"add-page-ai-modal"}),i=(0,F.CG)(e_.lH),r=(0,eR.Vr)(i),{publishSite:s,isPublishing:o}=i5({site:i}),l=(0,ec.Yy)();return(0,a.jsxs)(tE.K,{spacing:4,textAlign:"center",children:[(0,a.jsx)(nQ.X,{size:"md",children:(0,a.jsx)(x.cC,{id:"bB+DHs"})}),(0,a.jsx)(ev.z,{variant:"solid",colorScheme:l?"blackAlpha":"whiteAlpha",leftIcon:(0,a.jsx)(D.G,{icon:O.r8p}),onClick:n,children:(0,a.jsx)(x.cC,{id:"K3193W"})}),r&&(0,a.jsx)(ev.z,{leftIcon:(0,a.jsx)(D.G,{icon:O.A$k}),variant:"plain",onClick:s,isLoading:o,children:(0,a.jsx)(x.cC,{id:"2uGo/E"})}),(0,a.jsx)(rn,{isOpen:e,onClose:t})]})},rs=()=>(0,a.jsx)(tE.K,{spacing:4,textAlign:"center",children:(0,a.jsx)(nQ.X,{size:"md",children:(0,a.jsx)(x.cC,{id:"v1HDJV"})})}),ro=e=>{var t,n;let{doc:i}=e,r=null==i?void 0:null===(n=i.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType;return i?r===t$.FJd.UploadPptV2?(0,a.jsx)(rs,{}):i.site?i.site&&!(0,ek.s2)()?(0,a.jsx)(rr,{}):null:(0,a.jsx)(ri,{doc:i}):null};var rl=n(35676),ra=n.n(rl),rc=n(3440),rd=n.n(rc),ru=n(46152),rh=n.n(ru),rx=n(15377);let rp=[{key:"content_quality",category:"content",label:(0,a.jsx)(x.cC,{id:"geq9gH"})},{key:"missing_content",category:"content",label:(0,a.jsx)(x.cC,{id:"n4zPFX"})},{key:"wrong_language",category:"content",label:(0,a.jsx)(x.cC,{id:"R2Ly6h"})},{key:"amount_of_text",category:"content",label:(0,a.jsx)(x.cC,{id:"pi+Tez"})},{key:"inaccurate_content",category:"content",label:(0,a.jsx)(x.cC,{id:"Qk+SyG"})},{key:"image_quality",category:"image",label:(0,a.jsx)(x.cC,{id:"ESjmDR"})},{key:"number_of_images",category:"image",label:(0,a.jsx)(x.cC,{id:"x6yr/9"})},{key:"layouts_and_templates",category:"layout",label:(0,a.jsx)(x.cC,{id:"5yz5Kl"})},{key:"theme_styling",category:"layout",label:(0,a.jsx)(x.cC,{id:"nTZNkL"})}],rm={key:"other",category:"other",label:(0,a.jsx)(x.cC,{id:"/IX/7x"})},rf=[{key:"missing_content",category:"content",label:(0,a.jsx)(x.cC,{id:"n4zPFX"})},{key:"inaccurate_content",category:"content",label:(0,a.jsx)(x.cC,{id:"04mUQ2"})},{key:"missing_images",category:"image",label:(0,a.jsx)(x.cC,{id:"CLDdsj"})},{key:"image_quality",category:"image",label:(0,a.jsx)(x.cC,{id:"ESjmDR"})},{key:"wrong-layout",category:"layout",label:(0,a.jsx)(x.cC,{id:"x2M7iY"})},{key:"colors-fonts",category:"layout",label:(0,a.jsx)(x.cC,{id:"nTZNkL"})},{key:"animations",category:"animations",label:(0,a.jsx)(x.cC,{id:"HgWdP3"})},{key:"import_speed",category:"performance",label:(0,a.jsx)(x.cC,{id:"YJPN3F"})},{key:"too-similar",category:"layout",label:(0,a.jsx)(x.cC,{id:"R5upbf"})}],rg=e=>{let{docId:t,isDark:n,generationType:i,interactionId:r}=e,s=(0,g.useMemo)(()=>{let e=i===t$.FJd.UploadPptV2?rf:rp;return ra()(rh()(rd()(rh()(e),"category"))).concat([rm])},[i]),o=(0,g.useCallback)(e=>{(0,td.fM)({rating:e,doc_id:t,interactionId:r,generationType:i})},[t,i,r]),l=(0,g.useCallback)((e,n,s)=>{(0,td.XH)({feedback:n,tags:s,rating:e,doc_id:t,generationType:i,interactionId:r})},[t,i,r]);return(0,a.jsx)(rx.Cn,{feedbackTags:s,trackRating:o,trackFeedback:l,isDark:n})};var rj=n(29944),rv=n(36660),rC=n(55891);let rb=e=>{let[t]=(0,g.useState)(()=>(0,ew.SJ)()[e]);return(0,g.useEffect)(()=>{setTimeout(()=>{(0,rv.lO)({query:{...(0,ew.SJ)(),[e]:void 0},emitChange:!1})})},[]),t},ry=e=>{var t,n,i;let{editor:r}=e,s=r&&null!==(n=null===(t=(0,rC.VA)(r))||void 0===t?void 0:t.generateInfo)&&void 0!==n?n:{},o=rb("source"),l=(0,F.CG)((0,iF.oH)(null==r?void 0:r.gammaDocId)),a=null,c=!0;return o===iW.VY?l&&("complete"===l.status||"error"===l.status)&&(a=l.id,c=!0):o===rj.u&&(c=!0,a=null!==(i=s.interactionId)&&void 0!==i?i:null),{showDocWizardFooter:c,source:o,interactionId:a}},rk=(0,g.memo)(e=>{var t,n,i;let{interactionId:r}=e,s=(0,F.CG)(tV.yx),o=(0,ec.Yy)(),l=null==s?void 0:null===(n=s.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType,[d,u]=(0,g.useState)(!1),h=(0,iL.p)(),p=null==s?void 0:null===(i=s.accessLinks)||void 0===i?void 0:i[0],m=(0,g.useMemo)(()=>(0,ew.Gn)({docTitle:null==s?void 0:s.title,docId:null==s?void 0:s.id,token:null==p?void 0:p.token,absolute:!0}),[s,null==p?void 0:p.token]),{onCopy:f}=(0,iz.V)(m);(0,g.useCallback)(()=>{(0,iM.J)({docId:null==s?void 0:s.id,source:"docWizardFooter",type:"tokenUrl"}),f(),h({title:(0,a.jsx)(x.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==s?void 0:s.id,f,h]);let j=(0,g.useCallback)(()=>{u(!0)},[]);ix();let v=o?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"};return s?(0,a.jsx)(eb.Wk,{isDark:o,children:(0,a.jsx)(c.k,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,ek.s2)()?void 0:"-".concat(iU.m),children:(0,a.jsx)(iG.U,{in:!d,style:{width:"100%"},unmountOnExit:!0,children:(0,a.jsx)(c.k,{pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative",...v,children:(0,a.jsx)(iN.W,{maxW:"450px",children:(0,a.jsxs)(tE.K,{spacing:8,children:[(0,a.jsx)(ro,{doc:s}),(0,a.jsx)(rg,{docId:s.id,isDark:o,interactionId:r,generationType:l}),(0,a.jsx)(tS.M,{pt:[0,0,4],w:"100%",children:(0,a.jsx)(ev.z,{size:"sm",onClick:j,variant:"text",colorScheme:"blackAlpha",children:(0,a.jsx)(x.cC,{id:"vLyv1R"})})})]})})})})})}):null});rk.displayName="DocWizardFooterInner";let rw=e=>{let{editor:t}=e;i$({editor:t});let{showDocWizardFooter:n,interactionId:i}=ry({editor:t});return n&&i?(0,a.jsx)(rk,{interactionId:i}):null};var rS=n(98537),rE=n.n(rS),rI=n(11082),rA=n(71733);let rT=e=>{let{onCloneClick:t,onSignupClick:n,isLoggedIn:i}=e;return(0,a.jsx)(d.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:i?(0,a.jsxs)(ej.U,{children:[(0,a.jsxs)(e5.x,{mr:1,children:[(0,a.jsx)(x.cC,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc},components:{0:(0,a.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,a.jsx)(ev.z,{variant:"solid",onClick:t,children:(0,a.jsx)(x.cC,{id:"he3ygx"})})]}):(0,a.jsxs)(ej.U,{children:[(0,a.jsxs)(e5.x,{mr:1,children:[(0,a.jsx)(x.cC,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc,GAMMA_PROPER_NOUN:Z.N6},components:{0:(0,a.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,a.jsx)(id(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(ev.z,{as:rI.r,onClick:n,variant:"solid",textDecoration:"none !important",children:(0,a.jsx)(x.cC,{id:"e+RpCP"})})})]})})},r_=e=>{let t=!(0,ek.s2)(),{user:n}=(0,eX.SE)(),i=(0,iL.p)(),r=(0,g.useRef)(),s=(0,rA.e)(),o=(0,g.useCallback)(()=>{e&&(null===eM.co||void 0===eM.co||eM.co.track(eM.AA.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),l=(0,g.useCallback)(()=>{s({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,s]);(0,g.useEffect)(()=>()=>{r.current&&i.close(r.current)},[i]);let a=t&&e,c=!!n;(0,tg.vm)(()=>{r.current&&i.close(r.current),a&&(r.current=i({position:"bottom",render:()=>rT({onCloneClick:l,isLoggedIn:c,onSignupClick:o}),isClosable:!0,duration:null}))},[e,t,l,o,a,n,i,c],[a,c])};var rO=n(73281),rD=n(27320),rR=n(24391);let rP="sessionId1",rL=eF.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,F.bh)();return this.storage.user=rE()({},this.storage.user,e),t.dispatch((0,W.MU)({sessionId:rP})),t.dispatch((0,W.Tx)({collaborators:[this.storage.user]})),!0}}}}),rz=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:s}=e,o=(0,F.CG)(tV.yx);r_(o);let[l]=(0,g.useState)(()=>[tO.F,rD.$1.configure({scrollerSelector:r}),rL,rO._g]),{user:u,anonymousUser:h,isUserLoading:x,color:p}=(0,eX.SE)(),[m,f]=(0,g.useState)(),{data:j,loading:v,error:C}=(0,t$.EDv)({variables:{docId:n,snapshotId:i},skip:!i});(0,g.useEffect)(()=>{!x&&m&&m.commands.user({id:(null==u?void 0:u.id)||h.id,color:p.value,sessionId:rP,idleSince:null,name:(null==u?void 0:u.displayName)||h.displayName||"",profileImageUrl:(null==u?void 0:u.profileImageUrl)||"",isReady:!x})},[m,u,p,x,h]);let b=j&&void 0!==j.snapshot&&!v&&o;return(0,a.jsxs)(d.xu,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!b||C?(0,a.jsxs)(c.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!b&&(0,a.jsx)(tI.$,{}),C&&(0,a.jsxs)(tS.M,{h:"100%",children:["There was an error loading this ",Z.Yc,":"," ",C.message]})]}):(0,a.jsx)(d.xu,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:b?1:0,children:(0,a.jsx)(eP.yE,{doc:o,editorId:"main",docId:n,extensions:l,onCreate:e=>{let{editor:t}=e;f(t),setTimeout(()=>{s&&s(t)},10)},readOnly:!0,initialContent:null===(t=j.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),(0,a.jsx)(rR.m,{forceShow:!0,abuseReportingEnabled:!1})]})};var rG=n(332),rN=n(86290);let rM=e=>{var t;let{site:n}=e,i=null==n?void 0:null===(t=n.currentDeployment)||void 0===t?void 0:t.deploymentTime,r=(0,g.useMemo)(()=>({fromNow:(0,rN.Km)(i),calendar:(0,rN.p6)(i,"PPpp")}),[i]);return(0,a.jsx)(x.cC,{id:"ay/UB+",values:{0:r.fromNow},components:{0:(0,a.jsx)(eb.kH,{label:r.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,a.jsx)(e5.x,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})},rU=e=>{let t=(0,F.CG)(e_.lH),n=(0,eR.k2)(t),i=!(0,eR.Vr)(t),r=(0,F.CG)(e_.RM),s=(0,F.CG)(e_.rc),{icon:o,text:l,color:c}=(0,g.useCallback)(()=>e?{icon:(0,a.jsx)(D.G,{icon:O.LM3,height:13,width:13}),text:(0,a.jsx)(x.cC,{id:"mkk40+"}),color:"gray.500"}:i?{icon:(0,a.jsx)(D.G,{icon:O.byT,height:13,width:13}),text:(0,a.jsx)(x.cC,{id:"r5OY1d"}),color:"gray.500"}:n?r>0||s?{icon:(0,a.jsx)(D.G,{icon:O.Pvm,height:13,width:13}),text:(0,a.jsx)(x.cC,{id:"eVV2pl"}),color:"orange.500"}:{icon:(0,a.jsx)(D.G,{icon:O.kd8,height:13,width:13}),text:(0,a.jsx)(x.cC,{id:"Rgbxkx"}),color:"green.500"}:{icon:(0,a.jsx)(D.G,{icon:O.g4A,height:13,width:13}),text:(0,a.jsx)(x.cC,{id:"tpB6bH"}),color:"gray.700"},[e,i,n,r,s])(),d=e?null:i?(0,a.jsx)(x.cC,{id:"u8Rqhk"}):!1===n?(0,a.jsx)(x.cC,{id:"Ys0XoA"}):r>0||s?(0,a.jsx)(x.cC,{id:"Ys0XoA"}):null,u=!1===i&&!e;return{statusText:l,statusIcon:o,statusColor:c,detailText:d,needsPublish:!n||s||r>0,lastPublishedTime:t?(0,a.jsx)(rM,{site:t}):null,publishEnabled:u}},rF=e=>{let{context:t,openSiteSettings:n}=e,i=(0,F.CG)(e_.lH),r=(0,i1.O1)(),{publishSite:s,isPublishing:o}=i5({site:i}),{statusText:l,detailText:c,needsPublish:d,publishEnabled:u}=rU(o),h=(0,eg.ff)(!1,!0);return("pages"!==t||d||o)&&r&&i&&(0,eR.Vr)(i)?(0,a.jsx)(iN.W,{px:0,children:(0,a.jsxs)(tE.K,{w:"100%",bg:h?"gray.800":"gray.50",borderRadius:"md",p:4,align:"pages"===t?"stretch":"center",direction:"pages"===t?"column":"row",spacing:"pages"===t?3:1,children:[(0,a.jsxs)(e2.g,{spacing:0,color:h?"gray.200":void 0,textAlign:"pages"===t?"center":"left",align:"pages"===t?"center":"start",children:[(0,a.jsx)(e5.x,{fontWeight:"500",fontSize:"sm",children:l}),c&&(0,a.jsx)(e5.x,{fontSize:"xs",textColor:"gray.500",css:{textWrap:"balance"},children:c})]}),"pages"!==t&&(0,a.jsx)(e3.L,{}),(0,a.jsx)(ev.z,{flexShrink:"0",size:"sm",variant:"solid",leftIcon:(0,a.jsx)(D.G,{icon:O.A$k}),isDisabled:!u,onClick:s,isLoading:o,children:(0,a.jsx)(x.cC,{id:"1EeNDU"})}),"pages"===t&&(0,a.jsx)(ev.z,{textAlign:"left",color:h?"trueblue.200":"trueblue.600",variant:"link",size:"sm",onClick:n,flex:1,children:(0,a.jsx)(x.cC,{id:"WtsmDd"})})]})}):null};var rW=n(25481),rH=n(80934),rq=n(69024),rB=n(29705),rV=n(92850),rK=n(22226),rY=n(54326);let rZ=e=>{var t;let{onClose:n,isOpen:i,site:r}=e,{replace:s}=(0,ey.useRouter)(),o=(0,iL.p)(),[l,{data:d,loading:u}]=(0,t$.jUI)(),h=null==d?void 0:null===(t=d.archiveSite)||void 0===t?void 0:t.archived,p=(0,g.useCallback)(async()=>{if(null==r?void 0:r.id)try{await l({variables:{id:null==r?void 0:r.id}}),n()}catch(e){console.error("[DeleteGammaModal] Failed to archive site",e.message),o({title:(0,a.jsx)(x.cC,{id:"aBvGpM"}),description:(0,a.jsx)(x.cC,{id:"DVB9Jq"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[l,null==r?void 0:r.id,o]);return((0,g.useEffect)(()=>{h&&(n(),s("/#sites"),o({title:(0,a.jsx)(x.cC,{id:"oGP1Fe"}),description:(0,a.jsx)(x.cC,{id:"sqh0jP"}),status:"success",duration:5e3,isClosable:!0,position:"top"}))},[h,n,s,o,r]),u||h)?(0,a.jsx)(rG.h,{children:(0,a.jsx)(c.k,{w:"100%",h:"100%",zIndex:"overlay",position:"absolute",top:"0",left:"0",background:"whiteAlpha.800",flex:1,children:(0,a.jsx)(nE.AA,{})})}):(0,a.jsxs)(rV.u_,{onClose:n,isOpen:i,size:"lg",children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"cw2uO1",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})}),(0,a.jsx)(nb.o,{isDisabled:u}),(0,a.jsx)(ny.f,{children:(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"87gjhX",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})}),(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"tOGRxi",values:{0:(null==r?void 0:r.name)?'"'.concat(null==r?void 0:r.name,'"'):""}})}),(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"MluQ97",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:Z.aq},components:{0:(0,a.jsx)(rI.r,{color:"trueblue.500",colorScheme:"trueblue",href:"/#trash",textDecoration:"underline",isExternal:!0}),1:(0,a.jsx)(rB.h,{mx:"2px"})}})})]})}),(0,a.jsx)(nk.m,{children:(0,a.jsxs)(eC.h,{children:[(0,a.jsx)(ev.z,{variant:"ghost",onClick:n,children:(0,a.jsx)(x.cC,{id:"dEgA5A"})}),(0,a.jsx)(ev.z,{variant:"ghost",color:"red.600",onClick:p,isLoading:u,children:(0,a.jsx)(x.cC,{id:"cnGeoo"})})]})})]})]})},rJ=e=>{let{site:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,S.q)({id:"trash-site-modal"}),[s]=(0,t$.sJX)(),o=(0,i1.O1)(),l=null==t?void 0:t.archived,c=(0,g.useCallback)(()=>{(null==t?void 0:t.id)&&s({variables:{id:t.id},optimisticResponse:{unarchiveSite:{id:t.id,__typename:"Site"}}})},[null==t?void 0:t.id,s]);return o&&t?l?(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{fixedWidth:!0,icon:e4.XnX}),onClick:c,children:(0,a.jsx)(x.cC,{id:"yKu/3Y"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rW.s,{color:"red.500",icon:(0,a.jsx)(D.G,{fixedWidth:!0,icon:O.XAH}),onClick:()=>{i()},children:(0,a.jsx)(x.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})}),n&&(0,a.jsx)(rZ,{isOpen:n,onClose:r,site:t})]}):(0,a.jsx)(a.Fragment,{})},rX=()=>({[eK.q.DOC_VIEW]:{buttonLabel:(0,a.jsx)(x.cC,{id:"eZb+lw"}),shortcutIcon:e4.zc,shortcutKeys:(0,eb.cE)("Mod+Enter"),shortcutLabel:(0,a.jsx)(x.cC,{id:"tbDuNX"})},[eK.q.SLIDE_VIEW]:{buttonLabel:(0,a.jsx)(x.cC,{id:"ydzS9x"}),shortcutIcon:e4.Bg$,shortcutKeys:"Esc",shortcutLabel:(0,a.jsx)(x.cC,{id:"5Rfo7J"})}});var rQ=n(65610),r$=n(62861),r0=n(1384),r1=n(42616),r2=n(20706),r5=n(48105);let r3=(0,il.ZP)("mod+Enter"),r4=(0,il.ZP)("Esc"),r6=(0,il.ZP)("mod+Esc"),r8=(0,il.ZP)("shift+mod+Enter"),r9=e=>function(t){t((0,W.Qx)({attached:!1})),t((0,W.PM)({mode:e}))},r7=(e,t)=>{let n=document.querySelector(t);if(!n)return;let i=n.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(i.width/2,100),100)},se=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,F.TL)(),[r,s]=(0,g.useState)(!1),[o,l]=(0,g.useState)(!1),{editor:a}=(0,tw._i)(),c=(0,F.CG)(W.gh),d=(0,g.useRef)(c);(0,g.useEffect)(()=>{d.current=c},[c]);let u=(0,F.CG)(W.yq),h=(0,F.CG)(W.JA),x=(0,F.CG)(r$.C),p=(0,eM.z$)(),m=(0,g.useCallback)(e=>{a&&!a.isDestroyed&&(e===eK.q.SLIDE_VIEW?((0,r1.E0)(a.state.doc,i),(0,r2.U6)(a,!1),a.commands.spotlightCurrentCard()):(a.commands.turnOffSpotlight(!0),r7(a,n)),i(r9(e)))},[i,a,n]),f=(0,g.useCallback)(()=>{try{var e,t,n,i;if(null===(e=document.body)||void 0===e?void 0:e.requestFullscreen){null===(n=document.body)||void 0===n||n.requestFullscreen();return}(null===(t=document.body)||void 0===t?void 0:t.webkitRequestFullscreen)&&(null===(i=document.body)||void 0===i||i.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),j=(0,g.useCallback)(()=>{try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),v=(0,y.ye)("realUserMetrics"),{recordExitSlideModePerformance:C,recordEnterSlideModePerformance:b}=(0,r0.wK)(v),k=(0,g.useCallback)(e=>{let{fullscreen:t=!1}=e;d.current!==eK.q.SLIDE_VIEW&&(m(eK.q.SLIDE_VIEW),t&&f(),null==p||p.trackDocEvent(eM.AA.PRESENT_MODE_ENTERED),b({isFullscreen:t}),i((0,W.GV)({zoomLevel:1})),setTimeout(()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[m,f,p,b,i]),w=(0,g.useCallback)(()=>{d.current!==eK.q.DOC_VIEW&&(m(eK.q.DOC_VIEW),r&&j(),null==p||p.trackDocEvent(eM.AA.PRESENT_MODE_EXITED),C({isFullscreen:r}))},[m,r,j,C,d,p]);return(0,g.useEffect)(()=>{let e=()=>{null!==document.fullscreenElement||o||w(),null!==document.webkitCurrentFullScreenElement||o||w(),s(e=>!e),l(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[o,w,j]),(0,rQ.r)(()=>{a&&!a.isDestroyed&&c===eK.q.DOC_VIEW&&requestAnimationFrame(()=>{let e=a.state.selection;e instanceof r5.c&&a.commands.command(t=>{let{tr:n}=t;return n.setSelection(e.createSelectionNear()),!0})})},[a,c]),(0,g.useEffect)(()=>el.F7.on("keydown","PRESENT_BLOCK",e=>{var t,n,i;let r=d.current===eK.q.SLIDE_VIEW;if(!x){if(r3(e)){if(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),k({fullscreen:!1}),!0}if(r8(e)){if(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),k({fullscreen:!0}),!0}if(r6(e)&&r)return w(),!0;if(r4(e)&&r&&!u&&!h){if(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.closest("[data-gamma-child-tiptap-editor]"))return;return w(),!0}}}),[k,w,f,u,h,t,x]),{enterSlideView:k,exitSlideView:w,enterFullscreen:f,exitFullscreen:j,exitedFullscreenByClick:o,isFullscreen:r,setIsFullscreen:s,setExitedFullscreenByClick:l}},st=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,F.CG)(W.gh),r=(0,y.ye)("presentFullScreen"),{shortcutIcon:s,shortcutKeys:o,buttonLabel:l}=rX()[i],{enterSlideView:c,exitSlideView:d}=se({editorWrapperEl:t,scrollingParentSelector:n});return(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:s,fixedWidth:!0}),command:o,onClick:()=>{i===eK.q.SLIDE_VIEW?d():c({fullscreen:r})},children:l})};var sn=n(74008),si=n(78695),sr=n(67109),ss=n(30191),so=n(34308);let sl="gray.700";var sa=n(52929);let sc=e=>{let{error:t,refetch:n,...i}=e;return(0,a.jsx)(d.xu,{px:6,py:4,...i,children:(0,a.jsxs)(ip.b,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,a.jsx)(sa.z,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,a.jsx)(im.C,{mt:4,mb:2,fontSize:"md",children:(0,a.jsx)(x.cC,{id:"uNQm3r"})}),(0,a.jsx)(ig.X,{maxWidth:"md",children:t.message}),(0,a.jsx)(ev.z,{mt:4,onClick:()=>n(),children:(0,a.jsx)(x.cC,{id:"6gRgw8"})})]})})};var sd=n(89099);let su=()=>p.ag._({id:"QbrUIo"}),sh=()=>p.ag._({id:"FbBkvL"}),sx=e=>{let{isAnalyticsLoading:t,hasError:n,view:i,setView:r,description:s}=e;return n?(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"ZlwDi6"})}):(0,a.jsxs)(c.k,{direction:"column",flex:1,children:[(0,a.jsx)(rY.x,{children:t?(0,a.jsx)(sp,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.cC,{id:"ZlwDi6"}),(0,a.jsxs)(e2.g,{align:"stretch",spacing:4,children:[(0,a.jsx)(e5.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:s}),(0,a.jsxs)(sd.E,{children:[(0,a.jsx)(sd.U,{children:(0,a.jsx)(ev.z,{leftIcon:(0,a.jsx)(D.G,{icon:e4.Ma4,"aria-label":su()}),variant:"ghost",fontWeight:"600",bg:"deckView"===i?"trueblue.50":"transparent",color:"deckView"===i?"trueblue.500":sl,onClick:()=>r("deckView"),children:su()})}),(0,a.jsx)(sd.U,{children:(0,a.jsx)(ev.z,{leftIcon:(0,a.jsx)(D.G,{icon:e4.AGo,"aria-label":sh()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===i?"trueblue.50":"transparent",color:"cardEngagement"===i?"trueblue.500":sl,onClick:()=>r("cardEngagement"),children:sh()})})]})]})]})}),(0,a.jsx)(nb.o,{})]})},sp=()=>(0,a.jsxs)(e2.g,{align:"stretch",spacing:4,children:[(0,a.jsx)(sr.O,{h:12,width:"30%"}),(0,a.jsx)(sr.O,{h:4,width:"80%"})]});var sm=n(98621),sf=n.n(sm),sg=n(71600);let sj=e=>{let{degree:t,alpha:n=1,startColor:i="#ECC94B",endColor:r="#38A169"}=e;if(Number.isNaN(t))return sf()("#e5e0df").toHex8String();let s=sf()(i).toHsl(),o=sf()(r).toHsl();return sf()({h:(0,sg.t7)(s.h,o.h,t),s:(0,sg.t7)(s.s,o.s,t),l:(0,sg.t7)(s.l,o.l,t),a:n}).toHex8String()},sv=(e,t)=>e.reduce((e,n)=>(e[n.cardId]=n[t],e),{}),sC=(e,t)=>{let n=0;for(let r in e){var i;n+=(null!==(i=t[r])&&void 0!==i?i:0)+sC(e[r],t)}return n},sb=(e,t)=>{let n=0;for(let r in e){var i;n=Math.max((null!==(i=t[r])&&void 0!==i?i:0)+sC(e[r],t),n)}return n};var sy=n(25195),sk=n(62349),sw=n.n(sk);let sS=e=>{let{cardsViewed:t,totalCards:n}=e,i=sj({degree:t/n}),r=n>0;return(0,a.jsxs)(ej.U,{spacing:3,children:[(0,a.jsxs)(c.k,{flex:1,position:"relative",children:[(0,a.jsx)(sy.E,{h:4,flex:1,borderRadius:"sm",value:t,max:r?n:void 0,bg:"gray.200",sx:{"> div":{bg:i}}}),r&&t===n&&(0,a.jsx)(sI,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,a.jsx)(e5.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:r?"".concat(t,"/").concat(n):(0,a.jsx)(x.cC,{id:"8Va3Pt"})})]})},sE=e=>{let{cardCount:t}=e,n=(0,g.useMemo)(()=>sw()(1,t),[t]);return(0,a.jsxs)(ej.U,{spacing:3,filter:"blur(3px)",children:[(0,a.jsx)(c.k,{flex:1,position:"relative",children:(0,a.jsx)(sy.E,{h:4,flex:1,borderRadius:"sm",value:n,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,a.jsxs)(e5.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[n,"/",t]})]})},sI=e=>{let{...t}=e;return(0,a.jsx)(d.Cd,{bg:"green.500",size:"18px",border:"2px solid white",color:"white",...t,children:(0,a.jsx)(D.G,{icon:e4.LEp,"aria-label":p.ag._({id:"y886Ns"}),size:"xs"})})},sA=e=>t=>(0,sg.t7)(0,100,t/e),sT=e=>{let{cards:t,isColorized:n=!1,scaleToMax:i=!1,includeChildren:r,showViewersPercent:s=!1,leftLabel:o,rightLabel:l,tooltipLabel:c,cardLookupTable:u,onAnalyticsPanelClose:h}=e,x=sA(r?sb(t,u):Math.max(...Object.values(u))),p=(0,g.useCallback)(e=>x(e),[x]);return(0,a.jsxs)(d.xu,{mt:6,mb:4,children:[(0,a.jsxs)(ej.U,{mb:3,children:[(0,a.jsx)(ej.U,{children:(0,a.jsx)(eb.NZ,{children:o})}),(0,a.jsx)(e3.L,{}),(0,a.jsx)(ej.U,{children:(0,a.jsx)(eb.kH,{placement:"top",label:c,children:(0,a.jsx)(ej.U,{children:(0,a.jsx)(eb.NZ,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:l})})})})]}),(0,a.jsx)(d.xu,{width:"100%",children:Object.entries(t).map(e=>{var t;let[o,l]=e;return(0,a.jsx)(s_,{id:o,childCards:l,percentage:null!==(t=u[o])&&void 0!==t?t:0,calculatePercentageScale:p,isColorized:n,cardLookupTable:u,scaleToMax:i,includeChildren:r,showViewersPercent:s,onAnalyticsPanelClose:h},o)})})]})},s_=e=>{let{id:t,cardLookupTable:n,childCards:i,percentage:r,calculatePercentageScale:s,isColorized:o,scaleToMax:l,includeChildren:u,showViewersPercent:h,onAnalyticsPanelClose:p}=e,[m,f]=(0,g.useState)(!1),j=(0,g.useCallback)(()=>{f(!m)},[m]),{title:v}=(0,tn.T)({cardId:t}),C=Object.values(i).length>0,b=0===r,y=u?r+sC(i,n):r,k=m?y:0,w=l?s(y):Math.min(100,k),S=m?r:y,E=l?s(S):Math.min(100,S),I={startColor:"#F6AD55",endColor:"#68D391"},T=o?sj({degree:w/100,...I}):"trueblue.50",_=o?sj({degree:E/100,...I}):"trueblue.100";return(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(c.k,{direction:"column",children:(0,a.jsxs)(c.k,{h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,a.jsxs)(ej.U,{pos:"absolute",zIndex:1,children:[C&&(0,a.jsx)(A.h,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,a.jsx)(D.G,{icon:O._tD}),transform:m?"rotate(90deg)":"",onClick:j,_focus:{shadow:"none"}}),!C&&(0,a.jsx)(c.k,{w:6,justifyContent:"center",alignItems:"center",children:b?(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"s+PDNe"}),children:(0,a.jsx)(d.xu,{color:"blackAlpha.500",children:(0,a.jsx)(D.G,{icon:e4.Aq,size:"sm"})})}):(0,a.jsx)(d.xu,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,a.jsx)(D.G,{icon:e4.nZ9,size:"sm"})})}),(0,a.jsx)(e5.x,{color:b?"blackAlpha.500":void 0,noOfLines:1,children:v||(0,a.jsx)(x.cC,{id:"wja8aL"})})]}),(0,a.jsxs)(d.xu,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,a.jsx)(d.xu,{position:"absolute",h:"100%",bg:b?"blackAlpha.200":T,w:"".concat(w,"%")}),(0,a.jsx)(d.xu,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:b?"blackAlpha.300":_,w:"".concat(E,"%")})]}),o&&100===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e3.L,{}),(0,a.jsx)(sI,{alignSelf:"center",zIndex:1})]})]})}),(0,a.jsx)(d.xu,{pl:8,children:C&&Object.entries(i).map(e=>{var t;let[i,r]=e;return(0,a.jsx)(iG.U,{in:m,children:(0,a.jsx)(s_,{id:i,childCards:r,percentage:null!==(t=n[i])&&void 0!==t?t:0,cardLookupTable:n,calculatePercentageScale:s,scaleToMax:l,isColorized:o,includeChildren:u,showViewersPercent:h,onAnalyticsPanelClose:p})},i)})})]})},sO=()=>(0,a.jsx)(tE.K,{spacing:2,children:(0,a.jsx)(x.cC,{id:"QXJTby",components:{0:(0,a.jsx)(e5.x,{}),1:(0,a.jsx)(e5.x,{}),2:(0,a.jsx)(e5.x,{})}})}),sD=e=>{let{timeInMS:t}=e;return void 0===t?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(x.cC,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},sR=(e,t)=>"viewTimePercent"===e?{chartDescription:(0,a.jsx)(x.cC,{id:"dpTE1c",values:{viewerCount:t}}),leftLabel:(0,a.jsx)(x.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(x.cC,{id:"8R7bfR"})}:{chartDescription:(0,a.jsx)(x.cC,{id:"b2VMTo",values:{viewerCount:t}}),leftLabel:(0,a.jsx)(x.cC,{id:"kTgCTO"}),rightLabel:(0,a.jsx)(x.cC,{id:"AKDcmS"})},sP=e=>{let{docId:t,viewerFilter:n,currentViewerFilterCount:i,onAnalyticsPanelClose:r}=e,s=(0,F.qr)().getState(),o=(0,W.X9)(s),{data:l,error:c,loading:u,refetch:h}=(0,t$.IrH)({variables:{docId:t}}),[p,m]=(0,g.useState)("viewTimePercent"),{chartDescription:f,rightLabel:j,leftLabel:v}=sR(p,i),C="viewersOnly"===n?"viewers":"everyone",b=(0,y.ye)("cardViewedThreshold"),k=(0,g.useMemo)(()=>{var e;return(null==l?void 0:null===(e=l.docCardsStats)||void 0===e?void 0:e[C])||[]},[null==l?void 0:l.docCardsStats,C]),w=(0,g.useMemo)(()=>sv(k,p),[k,p]),S=(0,g.useCallback)(()=>m("viewTimePercent"),[]),E=(0,g.useCallback)(()=>m("viewersPercent"),[]);return(0,a.jsxs)(d.xu,{children:[(0,a.jsxs)(ej.U,{my:4,children:[(0,a.jsx)(ev.z,{leftIcon:(0,a.jsx)(D.G,{icon:O.SZw,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===p?"trueblue.50":"transparent",color:"viewTimePercent"===p?"trueblue.500":sl,onClick:S,children:(0,a.jsx)(x.cC,{id:"XyvAeS"})}),(0,a.jsx)(ev.z,{leftIcon:(0,a.jsx)(D.G,{icon:e4.jGC,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===p?"trueblue.50":"transparent",color:"viewersPercent"===p?"trueblue.500":sl,onClick:E,children:(0,a.jsx)(x.cC,{id:"vXtpAZ"})})]}),(0,a.jsx)(sz,{description:f}),c&&(0,a.jsx)(sc,{error:c,refetch:h}),u&&!c&&(0,a.jsx)(sL,{}),!u&&!c&&(0,a.jsx)(sT,{cards:o.tree,cardLookupTable:w,scaleToMax:"viewTimePercent"===p,isColorized:"viewersPercent"===p,includeChildren:"viewTimePercent"===p,showViewersPercent:"viewersPercent"===p,rightLabel:j,leftLabel:v,tooltipLabel:"viewTimePercent"===p?(0,a.jsx)(sO,{}):(0,a.jsx)(sD,{timeInMS:b}),onAnalyticsPanelClose:r})]})},sL=e=>{let{includeDescription:t=!1}=e;return(0,a.jsx)(c.k,{direction:"column",mt:6,mb:4,children:(0,a.jsxs)(e2.g,{align:"stretch",children:[t&&(0,a.jsx)(sr.O,{h:5,mb:3,w:"70%"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(sr.O,{h:8},t))]})})},sz=e=>{let{description:t}=e;return(0,a.jsx)(e5.x,{color:sl,children:t})};var sG=n(89364),sN=n(78534),sM=n(80774),sU=n(5832),sF=n(64565),sW=n(70189),sH=n(66983),sq=n(79443),sB=n(109),sV=n(16556),sK=n(829),sY=n.n(sK);let sZ=e=>{let{uniqueViewers:t,docCreatedDate:n}=e,i=(0,y.ye)("cardViewedThreshold");return(0,a.jsx)(sN.h,{children:(0,a.jsxs)(sM.Tr,{children:[(0,a.jsx)(sJ,{label:(0,a.jsx)(x.cC,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,a.jsx)(x.cC,{id:"aaiIlJ",values:{docCreatedDate:n}}),width:"40%"}),(0,a.jsx)(sJ,{label:(0,a.jsx)(x.cC,{id:"pRGfP3"}),width:"35%"}),(0,a.jsx)(sJ,{label:(0,a.jsx)(x.cC,{id:"QfqHuz"}),tooltip:(0,a.jsx)(sD,{timeInMS:i}),width:"25%"})]})})},sJ=e=>{let{label:t,width:n,tooltip:i}=e,r=(0,a.jsx)(sU.Th,{w:n,children:(0,a.jsx)(e5.x,{display:"inline",borderBottom:i?"0.125em dashed":void 0,borderBottomColor:i?"gray.400":void 0,children:t})});return i?(0,a.jsx)(eb.kH,{placement:"top",label:i,children:r}):r},sX=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],sQ=e=>{let{viewers:t,currentViewerFilterCount:n,docCreatedDate:i,creatorId:r,contributors:s,cardCount:o,handleTableRowClick:l,hasIndividualAnalytics:c}=e,{user:d}=(0,eX.SE)(),u=c?t:sY()(t,e=>{var t;return[(null===(t=e.user)||void 0===t?void 0:t.id)===(null==d?void 0:d.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,a.jsx)(sF.x,{children:(0,a.jsxs)(sW.i,{colorScheme:"blackAlpha",children:[(0,a.jsx)(sZ,{uniqueViewers:n,docCreatedDate:i}),(0,a.jsx)(sH.p,{children:u.map((e,n)=>{let{user:i,lastOpened:u,visitorId:h}=e,x=(null==i?void 0:i.id)===r,m=s.some(e=>e.user.id===(null==i?void 0:i.id)),f=i?i.displayName+(i.id===(null==d?void 0:d.id)?" "+p.ag._({id:"dDUgzP"}):"")||"":p.ag._({id:"VmjbJY"}),g=u?n6()((0,n5.P9)(u)):p.ag._({id:"/JO3xr"}),j={name:f,id:(null==i?void 0:i.id)||h||"",email:null==i?void 0:i.email,isCreator:x,isContributor:m,profileImg:null==i?void 0:i.profileImageUrl,lastOpened:g},v=n===t.length-1,C=(null==i?void 0:i.id)===(null==d?void 0:d.id),b=!c&&!C;return(0,a.jsxs)(sM.Tr,{cursor:"pointer",onClick:()=>l(j),_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,a.jsx)(sq.Td,{borderBottom:v?"0 none":void 0,children:(0,a.jsx)(s$,{name:f,email:null==i?void 0:i.email,profileImg:null==i?void 0:i.profileImageUrl,isContributor:m,isCreator:x,isAnonymous:!i})}),(0,a.jsx)(sq.Td,{borderBottom:v?"0 none":void 0,children:b?(0,a.jsx)(e5.x,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:sX[n%sX.length]}):(0,a.jsx)(e5.x,{fontSize:"sm",children:g})}),(0,a.jsx)(sq.Td,{borderBottom:v?"0 none":void 0,children:b?(0,a.jsx)(sE,{cardCount:o}):(0,a.jsx)(sS,{cardsViewed:e.cardsViewed||0,totalCards:o||0})})]},(null==i?void 0:i.id)||h)})})]})})},s$=e=>{let{name:t,profileImg:n,email:i="",isCreator:r=!1,isContributor:s=!1,isAnonymous:o=!1,...l}=e;return(0,a.jsxs)(ej.U,{...l,children:[(0,a.jsx)(sB.q,{size:"sm",name:t,src:n}),(0,a.jsxs)(tE.K,{spacing:.5,children:[(0,a.jsxs)(e5.x,{children:[t,o&&(0,a.jsx)(eb.Yq,{label:(0,a.jsx)(x.cC,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}),ml:2})]}),(0,a.jsxs)(ej.U,{mt:1,children:[(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",children:i}),(r||s)&&(0,a.jsx)(sV.Vp,{size:"sm",transform:"translate(0, 1.5px)",children:r?(0,a.jsx)(x.cC,{id:"UE2beD"}):(0,a.jsx)(x.cC,{id:"3L51iw"})})]})]})]})},s0=e=>{var t,n,i,r;let{user:s,onBackClick:o,docId:l,onAnalyticsPanelClose:c}=e,u=(0,F.qr)().getState(),h=(0,W.X9)(u),{data:p,error:m,loading:f,refetch:j}=(0,t$.IrH)({variables:{docId:l,userId:s.id},skip:!l||!s.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),v=null!==(r=null==p?void 0:null===(n=p.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==r?r:0,C=null==p?void 0:null===(i=p.docCardsStats)||void 0===i?void 0:i.cardCount,b=(0,g.useMemo)(()=>{var e;return(null==p?void 0:null===(e=p.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==p?void 0:p.docCardsStats]),y=(0,g.useMemo)(()=>sv(b,"viewTimePercent"),[b]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(ev.z,{"aria-label":"Back",leftIcon:(0,a.jsx)(sG.R,{}),variant:"ghost",onClick:o,children:(0,a.jsx)(x.cC,{id:"iH8pgl"})})}),(0,a.jsx)(nb.o,{}),(0,a.jsx)(sn.i,{}),(0,a.jsx)(ny.f,{children:(0,a.jsxs)(d.xu,{children:[(0,a.jsx)(s1,{user:s,showLastOpened:!0}),C&&(0,a.jsx)(sz,{description:(0,a.jsx)(x.cC,{id:"YJOrjl",values:{cardsViewed:v,totalCards:C}})}),f&&!m&&(0,a.jsx)(sL,{includeDescription:!0}),m&&(0,a.jsx)(sc,{error:m,refetch:j}),!m&&!f&&(0,a.jsx)(sT,{cards:h.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,a.jsx)(x.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(x.cC,{id:"8R7bfR"}),cardLookupTable:y,tooltipLabel:(0,a.jsx)(sO,{}),onAnalyticsPanelClose:c})]})})]})},s1=e=>{let{user:t,showLastOpened:n}=e;return(0,a.jsxs)(ej.U,{align:"center",my:6,children:[(0,a.jsx)(s$,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:n?"50%":void 0}),n&&(0,a.jsxs)(e2.g,{align:"flex-start",spacing:0,children:[(0,a.jsx)(eb.NZ,{children:(0,a.jsx)(x.cC,{id:"pRGfP3"})}),(0,a.jsx)(e5.x,{children:t.lastOpened})]})]})},s2=(e,t,n)=>"everyone"===e?p.ag._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?p.ag._({id:"r/tA4Y",values:{viewersOnly:n}}):p.ag._({id:"V9JX7d"}),s5={everyone:e4.NdV,viewersOnly:e4.Mdf,accessLinkOnly:e4.uWk},s3=e=>{let{selected:t,handleMenuItemChange:n,everyoneCount:i,viewersOnlyCount:r}=e;return(0,a.jsxs)(t4.v,{children:[(0,a.jsx)(t6.j,{leftIcon:(0,a.jsx)(D.G,{size:"xs",icon:s5[t]}),as:ev.z,size:"md",rightIcon:(0,a.jsx)(D.G,{size:"xs",icon:O.ptq}),children:s2(t,i,r)}),(0,a.jsx)(t8.q,{zIndex:2,maxW:"380px",children:(0,a.jsxs)(t9._,{defaultValue:t,value:t,onChange:e=>{Array.isArray(e)||n(e)},children:[(0,a.jsx)(t7.i,{value:"everyone",isDisabled:0===i,children:(0,a.jsxs)(c.k,{align:"center",children:[(0,a.jsx)(D.G,{icon:s5.everyone,size:"xs"}),(0,a.jsxs)(d.xu,{ml:3,children:[(0,a.jsx)(e5.x,{children:s2("everyone",i,r)}),(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(x.cC,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})})]})]})}),(0,a.jsx)(t7.i,{value:"viewersOnly",isDisabled:0===r,children:(0,a.jsxs)(c.k,{align:"center",children:[(0,a.jsx)(D.G,{icon:s5.viewersOnly,size:"xs"}),(0,a.jsxs)(d.xu,{ml:3,children:[(0,a.jsx)(e5.x,{children:s2("viewersOnly",i,r)}),(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(x.cC,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})})]})]})}),!1]})})]})};var s4=n(18e3),s6=n(52521),s8=n(18526),s9=n(6802),s7=n(70258),oe=n(80237),ot=n(59309),on=n(2574),oi=n(92638),or=n(33951),os=n(10897),oo=n(14582),ol=n(75715),oa=n(96492),oc=n(14141),od=n(40837);let ou={top:55,right:20,bottom:40,left:24},oh=e=>Math.round(e).toString(),ox=e=>Math.max(...e.map(e=>(0,ol.Z)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0)),op={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1-5)",paddingLeft:"var(--chakra-space-1-5)",paddingTop:"var(--chakra-space-0-5)",paddingBottom:"var(--chakra-space-0-5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},om="var(--chakra-colors-gray-500)",of="var(--chakra-colors-gray-200)",og=e=>e.map(e=>e.x),oj=e=>e.map(e=>e.y),ov=e=>{let{width:t,height:n,margin:i=ou,chartData:r,TooltipInner:s,showZero:o,shouldRoundYValues:l,showMaxAndMiddle:c,barColor:u,customTooltipStyles:h,onClick:x=()=>{}}=e,{showTooltip:p,tooltipOpen:m,tooltipLeft:f,tooltipTop:j,tooltipData:v,hideTooltip:C}=(0,oa.Z)(),b=(0,g.useRef)(),y=(0,g.useRef)();(0,g.useEffect)(()=>()=>{b.current&&clearTimeout(b.current),y.current&&clearTimeout(y.current)},[]);let k=oj(r),w=Math.max(...k),S=[w,Math.round(w/2)],E=ox(c?S:k),I=i.left+E,A=t-I-i.right,T=n-i.top-i.bottom,_={...oc.j,...op,...h},O=(0,g.useMemo)(()=>(0,oi.Z)({range:[0,A],domain:og(r),padding:.3}),[A,r]),D=(0,g.useMemo)(()=>(0,or.Z)({range:[T,0],round:!0,domain:[0,w]}),[T,w]),R=o?D(Math.min(...k.filter(e=>0!==e))):T,P=o&&T-R>6;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.xu,{children:(0,a.jsxs)("svg",{width:t,height:n,children:[(0,a.jsx)("rect",{x:0,y:0,rx:4,width:t,height:n,fill:"var(--chakra-colors-gray-100)"}),(0,a.jsx)(ot.Z,{top:i.top,left:I,children:r.map(e=>{var t,n;let i=e.y,r=e.x,s="bar-".concat(r,"-").concat(i),l=O.bandwidth(),c=T-(null!==(t=D(i))&&void 0!==t?t:0),d=P&&0===c?6:c,h=null!==(n=O(r))&&void 0!==n?n:0,m=T-d;return(0,a.jsxs)(ot.Z,{children:[(0,a.jsx)(os.Z,{x:h,y:m,width:l,height:d,radius:5,topLeft:!0,topRight:!0,fill:o&&0===i?of:u,onMouseLeave:()=>{b.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{b.current&&clearTimeout(b.current);let n=(0,oe.Z)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})},onClick:t=>x(t,e)}),(0,a.jsx)(oo.Z,{x:h,y:0,width:l,height:Math.max(0,T-d),opacity:0,onMouseLeave:()=>{y.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{y.current&&clearTimeout(y.current);let n=(0,oe.Z)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})}})]},s)})}),(0,a.jsx)(s9.Z,{top:i.top,left:I,scale:D,stroke:of,strokeWidth:2,tickValues:c?S:void 0,numTicks:c?void 0:2,hideZero:!0,tickFormat:l?oh:void 0,tickLength:6,tickStroke:of,tickLabelProps:()=>({fill:om,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4})}),(0,a.jsx)(s7.Z,{top:T+i.top,left:I,scale:O,stroke:of,numTicks:4,tickStroke:of,tickLabelProps:()=>({fill:om,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}),strokeWidth:2,tickLength:6})]})}),m&&v&&(0,a.jsx)(od.Z,{top:j,left:f,style:_,children:(0,a.jsx)(s,{x:v.x,y:v.y})})]})},oC=e=>{let{chartTitle:t,TooltipInner:n,showZero:i=!0,shouldRoundYValues:r=!0,showMaxAndMiddle:s=!0,data:o,barColor:l="var(--chakra-colors-trueblue-200)",customTooltipStyles:c,onClick:u=()=>{},...h}=e;return(0,a.jsxs)(d.xu,{position:"relative",height:"300px",...h,children:[(0,a.jsx)(e5.x,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,a.jsx)(on.Z,{children:e=>{let{width:t,height:d}=e;return t<10?null:(0,a.jsx)(ov,{width:t,height:d,showZero:i,chartData:o,barColor:l,customTooltipStyles:c,onClick:u,TooltipInner:n,shouldRoundYValues:r,showMaxAndMiddle:s})}})]})},ob=(e,t)=>{let n="LLL d",i=new Date;i.setDate(i.getDate()-t+1);let r=[];for(let s=0;s<t;s++){let t=new Date(i);t.setDate(t.getDate()+s);let o=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=(0,s4.Z)(e);if(!(0,s6.Z)(n))throw RangeError("Invalid time value");var i=t||{},r=null==i.format?"extended":String(i.format),s=null==i.representation?"complete":String(i.representation);if("extended"!==r&&"basic"!==r)throw RangeError("format must be 'extended' or 'basic'");if("date"!==s&&"time"!==s&&"complete"!==s)throw RangeError("representation must be 'date', 'time', or 'complete'");var o="",l="",a="extended"===r?"-":"";if("time"!==s){var c=(0,s8.Z)(n.getDate(),2),d=(0,s8.Z)(n.getMonth()+1,2),u=(0,s8.Z)(n.getFullYear(),4);o="".concat(u).concat(a).concat(d).concat(a).concat(c)}if("date"!==s){var h=n.getTimezoneOffset();if(0!==h){var x=Math.abs(h),p=(0,s8.Z)(Math.floor(x/60),2),m=(0,s8.Z)(x%60,2);l="".concat(h<0?"+":"-").concat(p,":").concat(m)}else l="Z";var f=(0,s8.Z)(n.getHours(),2),g=(0,s8.Z)(n.getMinutes(),2),j=(0,s8.Z)(n.getSeconds(),2),v=""===o?"":"T",C=[f,g,j].join("extended"===r?":":"");o="".concat(o).concat(v).concat(C).concat(l)}return o}(t,{representation:"date"}),l=e.find(e=>e.date===o);l?r.push({x:(0,rN.p6)(l.date,n),y:l.uniqueVisitors?l.uniqueVisitors:0}):r.push({x:(0,rN.p6)(o,n),y:0})}return r},oy=e=>{let{viewData:t,dayCount:n}=e,i=ob(t,n);return(0,a.jsx)(oC,{data:i,my:3,chartTitle:(0,a.jsx)(x.cC,{id:"mSEibf"}),TooltipInner:ok})},ok=e=>{let{x:t,y:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e5.x,{children:t}),(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"6MKtHx",values:{y:n}})})]})},ow=e=>e.every(e=>0===e.uniqueVisitors),oS=(e,t)=>t&&t.dailyViews?"everyone"===e?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===e&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],oE=(e,t,n)=>{var i,r,s;if(!n)return 0;let o=null!==(r=n.uniqueViewers)&&void 0!==r?r:0,l=null!==(s=null===(i=e.editors)||void 0===i?void 0:i.length)&&void 0!==s?s:0;return"everyone"===t?o:"viewersOnly"===t?Math.max(0,o-l):0},oI=e=>{var t,n;let{doc:i,handleSharePanelOpen:r,onAnalyticsPanelClose:s,canShare:o}=e,{loading:l,data:d,error:u,refetch:h}=(0,t$.xls)({variables:{memoId:i.id},skip:!i.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),{user:m}=(0,eX.SE)(),[f,j]=(0,g.useState)("deckView"),[v,C]=(0,g.useState)(null),[b,y]=(0,g.useState)("everyone"),k=(0,rN.p6)(i.createdTime,"PPP"),w=i.title||(0,a.jsx)(x.cC,{id:"wja8aL"}),S=(null==d?void 0:d.memoStats.viewers)||[],E=(null==d?void 0:null===(t=d.memoStats.dailyViews)||void 0===t?void 0:t.dayCount)||0,I=oS(b,null==d?void 0:d.memoStats),A=(0,J.Y)("individual_analytics",i.organization),{openUpsellModal:T}=(0,so.z)(),_=ow(I),O=S.filter(e=>{var t;return"everyone"===b||!(null===(t=i.editors)||void 0===t?void 0:t.some(t=>{var n,i;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(i=t.user)||void 0===i?void 0:i.id)}))}),D=oE(i,b,null==d?void 0:d.memoStats),R=(0,g.useCallback)(e=>{y(e)},[]),P=(0,g.useCallback)(e=>{j(e)},[]),L=(0,g.useCallback)(e=>{if(!A&&e.id!==(null==m?void 0:m.id)){T({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}C(e)},[T,A,m]),z=(0,g.useCallback)(()=>{C(null)},[]),G=void 0!==u;return(0,a.jsxs)(a.Fragment,{children:[v&&(0,a.jsx)(s0,{user:v,onBackClick:z,docId:i.id,onAnalyticsPanelClose:s}),!v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sx,{hasError:G,isAnalyticsLoading:l,setView:P,view:f,description:(0,a.jsx)(x.cC,{id:"uEtUah",values:{docTitle:w,docCreatedDate:k}})}),G&&(0,a.jsx)(sc,{error:u,refetch:h}),!G&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sn.i,{}),(0,a.jsxs)(ny.f,{children:[l&&(0,a.jsx)(oA,{}),!l&&S.length<=1&&o&&(0,a.jsx)(oT,{handleSharePanelOpen:r}),!l&&(0,a.jsxs)(tE.K,{direction:"column",mt:4,spacing:4,children:[(0,a.jsxs)(c.k,{direction:"row",justify:"space-between",align:"center",children:[(0,a.jsx)(nQ.X,{as:"h2",size:"md",children:"cardEngagement"===f?sh():su()}),(0,a.jsx)(s3,{selected:b,handleMenuItemChange:R,everyoneCount:oE(i,"everyone",null==d?void 0:d.memoStats),viewersOnlyCount:oE(i,"viewersOnly",null==d?void 0:d.memoStats)})]}),"deckView"===f&&_&&(0,a.jsx)(o_,{handleSharePanelOpen:r,dayCount:E}),"deckView"===f&&!_&&(0,a.jsx)(oy,{viewData:I,dayCount:E}),"cardEngagement"===f&&(0,a.jsx)(sP,{docId:i.id,viewerFilter:b,currentViewerFilterCount:D,onAnalyticsPanelClose:s}),(0,a.jsx)(sQ,{creatorId:(null===(n=i.createdBy)||void 0===n?void 0:n.id)||"",viewers:O,currentViewerFilterCount:D,docCreatedDate:k,contributors:i.editors||[],cardCount:(null==d?void 0:d.memoStats.cardCount)||0,handleTableRowClick:L,hasIndividualAnalytics:A}),O.length>3&&!A&&(0,a.jsx)(ev.z,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:()=>T({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS}),children:(0,a.jsx)(x.cC,{id:"BKBX4n",values:{0:O.length-3}})}),!A&&(0,a.jsx)(ss.m,{title:(0,a.jsx)(x.cC,{id:"h5AmZ4"}),segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:p.ag._({id:"GYgPBy"})})]})]})]})]})]})},oA=()=>(0,a.jsxs)(c.k,{direction:"column",py:2,children:[(0,a.jsx)(sr.O,{h:10,width:"40%",mb:4}),(0,a.jsx)(sr.O,{h:40,mb:4}),(0,a.jsx)(e2.g,{align:"stretch",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(sr.O,{h:12},t))})]}),oT=e=>{let{handleSharePanelOpen:t}=e;return(0,a.jsx)(c.k,{p:3,px:4,mt:2,bg:"gray.100",color:sl,borderRadius:"base",children:(0,a.jsxs)(c.k,{align:"baseline",fontSize:"sm",children:[(0,a.jsx)(d.xu,{pr:2,children:(0,a.jsx)(D.G,{icon:e4.ILF,"aria-label":"user-icon",size:"sm"})}),(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"FNMh4I",components:{0:(0,a.jsx)(e5.x,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},o_=e=>{let{handleSharePanelOpen:t,dayCount:n}=e;return(0,a.jsxs)(ip.b,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,a.jsx)(d.Cd,{size:"30px",bg:"gray.500",children:(0,a.jsx)(D.G,{icon:e4.ImE,color:"white"})}),(0,a.jsx)(im.C,{mt:4,mb:2,fontSize:"md",children:(0,a.jsx)(x.cC,{id:"2OzAI5"})}),n>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ig.X,{maxWidth:"sm",children:(0,a.jsx)(x.cC,{id:"qQLmo7",values:{dayCount:n}})}),(0,a.jsx)(ev.z,{mt:4,onClick:t,children:(0,a.jsx)(x.cC,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})})]})]})},oO=e=>{var t,n,i,r,s,o;let{doc:l,onAnalyticsPanelClose:c}=e,u=(0,F.qr)().getState(),h=(0,W.X9)(u),{user:p}=(0,eX.SE)(),{data:m,error:f,loading:j,refetch:v}=(0,t$.IrH)({variables:{docId:l.id,userId:null==p?void 0:p.id},skip:!(null==p?void 0:p.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),C=null!==(o=null==m?void 0:null===(n=m.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==o?o:0,b=null==m?void 0:null===(i=m.docCardsStats)||void 0===i?void 0:i.cardCount,y=(0,g.useMemo)(()=>{var e;return(null==m?void 0:null===(e=m.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==m?void 0:m.docCardsStats]),k=(0,g.useMemo)(()=>sv(y,"viewTimePercent"),[y]);if(!p)return null;let w=p.id===(null===(r=l.createdBy)||void 0===r?void 0:r.id),S=null===(s=l.editors)||void 0===s?void 0:s.some(e=>e.user.id===p.id),E={name:p.displayName,id:p.id,profileImg:p.profileImageUrl,email:p.email,isContributor:S,isCreator:w};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(rY.x,{children:[(0,a.jsx)(x.cC,{id:"ZlwDi6"}),(0,a.jsx)(e5.x,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:l.title||(0,a.jsx)(x.cC,{id:"wja8aL"})})]}),(0,a.jsx)(nb.o,{}),(0,a.jsx)(sn.i,{}),(0,a.jsx)(ny.f,{children:(0,a.jsxs)(d.xu,{children:[(0,a.jsx)(s1,{user:E}),void 0!==b&&(0,a.jsx)(sz,{description:(0,a.jsx)(x.cC,{id:"YJOrjl",values:{cardsViewed:C,totalCards:b}})}),j&&!f&&(0,a.jsx)(sL,{includeDescription:!0}),f&&(0,a.jsx)(sc,{error:f,refetch:v,px:0}),!f&&!j&&(0,a.jsx)(sT,{cards:h.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,a.jsx)(x.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(x.cC,{id:"8R7bfR"}),cardLookupTable:k,tooltipLabel:(0,a.jsx)(sO,{}),onAnalyticsPanelClose:c}),(0,a.jsxs)(ip.b,{children:[(0,a.jsx)(sa.z,{}),(0,a.jsx)(x.cC,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:Z.N6,GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})]})]})})]})},oD=(0,si.Z)(e=>{let{doc:t,mode:n,isAnalyticsPanelOpen:i,onAnalyticsPanelClose:r,onSharePanelOpen:s}=e,o=(0,ed.iq)({base:"sm",md:"2xl",lg:"4xl"}),l=!!s&&"full"==n,d=(0,g.useCallback)(()=>{s&&(s(),r())},[s,r]);return(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsxs)(rV.u_,{onClose:r,isOpen:i,size:o,blockScrollOnMount:!1,children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{mx:2,minW:0,children:["full"===n?(0,a.jsx)(oI,{doc:t,handleSharePanelOpen:d,onAnalyticsPanelClose:r,canShare:l}):(0,a.jsx)(oO,{doc:t,onAnalyticsPanelClose:r}),(0,a.jsx)(sn.i,{my:4}),(0,a.jsx)(nk.m,{children:(0,a.jsxs)(c.k,{justifyContent:l?"space-between":"flex-end",flex:1,children:[l&&(0,a.jsx)(ev.z,{leftIcon:(0,a.jsx)(D.G,{icon:O.zBy}),variant:"ghost",onClick:d,children:(0,a.jsx)(x.cC,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})}),(0,a.jsx)(ev.z,{variant:"solid",onClick:r,children:(0,a.jsx)(x.cC,{id:"DPfwMq"})})]})})]})]})})}),oR=e=>{let{doc:t,mode:n}=e,i=(0,eM.z$)(),{isOpen:r,onClose:s,onOpen:o}=(0,nK.M)({id:"analyticsPanelDisclosure"}),l=(0,g.useCallback)(()=>{null==i||i.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:"toolbar_doc_menu",type:"personal"}),o()},[i,null==t?void 0:t.id,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.Ma4,fixedWidth:!0}),onClick:l,children:(0,a.jsx)(x.cC,{id:"ZlwDi6"})}),t&&r&&(0,a.jsx)(oD,{doc:t,isAnalyticsPanelOpen:r,onAnalyticsPanelClose:s,mode:n})]})},oP=e=>{let{toggleCommentsPanel:t}=e;return(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.Mzg,fixedWidth:!0}),onClick:t,children:(0,a.jsx)(x.cC,{id:"VbyRUy"})})};var oL=n(82554),oz=n(35183),oG=n(97166),oN=n(99793),oM=n(16003);let oU=e=>{let{label:t,initialValue:i="",updateValue:r,helperText:s,language:o,...l}=e,[c,u]=(0,g.useState)(i),[h,x]=(0,g.useState)(null),p=(0,tg.Kt)(r,100),[m,f]=(0,g.useState)();(0,g.useEffect)(()=>{"css"===o?Promise.all([n.e(8917),n.e(7120),n.e(6214)]).then(n.bind(n,96214)).then(e=>{f(e.css())}):"html"===o&&Promise.all([n.e(8917),n.e(7120),n.e(6214),n.e(4100),n.e(2163)]).then(n.bind(n,22163)).then(e=>{f(e.html())})},[o]),(0,tg.vm)(()=>{x(null),p(c)},[c,p],[c]);let j=[m].filter(Boolean);return(0,a.jsxs)(oz.NI,{isInvalid:!!h,children:[(0,a.jsx)(oG.l,{children:t}),h&&(0,a.jsx)(oN.J1,{children:h}),s&&(0,a.jsx)(oz.Q6,{children:s}),(0,a.jsx)(d.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,a.jsx)(g.Suspense,{fallback:(0,a.jsx)("span",{}),children:(0,a.jsx)(oM.B,{value:c,extensions:j,onChange:u,...l})})})]})};var oF=n(55338);let oW=(0,g.memo)(e=>{let{isOpen:t,onClose:n,editor:i}=e,r=(0,oF.A)(i),{bodyStart:s}=(0,F.CG)(W.$p),o=(0,g.useCallback)(e=>{null==i||i.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[i]);return(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsxs)(nj.d,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:n,size:"lg",children:[(0,a.jsx)(nv.Z,{background:"none"}),(0,a.jsxs)(nC.s,{onKeyDown:r,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,a.jsx)(nb.o,{}),(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"E16GGw"})}),(0,a.jsx)(ny.f,{overflowX:"hidden",children:(0,a.jsx)(oU,{label:p.ag._({id:"fC5kYg"}),helperText:p.ag._({id:"0AZNtw"}),initialValue:s,updateValue:o,language:"html",height:"600px"})}),(0,a.jsx)(nk.m,{children:(0,a.jsx)(ev.z,{w:"100%",variant:"solid",onClick:n,children:(0,a.jsx)(x.cC,{id:"DPfwMq"})})})]})]})})});oW.displayName="CustomCodeDrawer";let oH=e=>{let{editor:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,nK.M)({id:"codeEditor"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.dT$,fixedWidth:!0}),onClick:i,children:(0,a.jsxs)(ej.U,{children:[(0,a.jsx)(x.cC,{id:"cnlGIm"}),(0,a.jsx)(e3.L,{}),(0,a.jsx)(oL.C,{colorScheme:"green",ml:2,children:(0,a.jsx)(x.cC,{id:"YBt9YP"})})]})}),(0,a.jsx)(oW,{editor:t,isOpen:n,onClose:r})]})},oq=e=>{let{doc:t}=e,[n]=(0,t$.LT4)(),[i]=(0,t$.iX9)(),r=(0,g.useCallback)(e=>()=>{if(!t.id)return;let r={id:t.id};e?n({variables:r,optimisticResponse:{archiveDoc:{...r,archived:e,__typename:"Doc"}}}):i({variables:r,optimisticResponse:{unarchiveDoc:{...r,archived:e,__typename:"Doc"}}})},[n,t.id,i]);return t.archived?(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.ZeM,fixedWidth:!0}),onClick:r(!1),children:(0,a.jsx)(x.cC,{id:"yKu/3Y"})}):(0,a.jsx)(rW.s,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,a.jsx)(D.G,{icon:O.XAH,fixedWidth:!0}),onClick:r(!0),children:(0,a.jsx)(x.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})})};var oB=n(45441),oV=n(1997),oK=n(91998);let oY=e=>{var t,n;let{doc:i}=e,r=(null==i?void 0:i.createdTime)&&(0,oB.Z)((0,oV.Z)(i.createdTime),"PPP"),s=(0,oK.$)(null==i?void 0:i.title);return(0,a.jsxs)(d.xu,{px:4,py:2,maxW:"300px",children:[(0,a.jsx)(e5.x,{noOfLines:6,children:s}),(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(x.cC,{id:"jlWdji",values:{createdTime:r}})}),(0,a.jsx)(eb.kH,{label:null==i?void 0:null===(t=i.createdBy)||void 0===t?void 0:t.email,children:(0,a.jsx)(e5.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(x.cC,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})})]})},oZ=e=>{let{doc:t,editor:n}=e,i=(0,rA.e)(),r=(0,g.useCallback)(()=>{if(!n)return;let e=n.getJSON();i({docId:t.id,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,ek.Q5)()})},[t.id,i,n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.kZ_,fixedWidth:!0}),onClick:r,children:(0,a.jsx)(x.cC,{id:"0Fcoqv",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})})})};var oJ=n(41521);let oX=()=>(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.kwI,fixedWidth:!0}),onClick:()=>{oJ.T.emit("openSharePanel",{view:"export"})},children:(0,a.jsx)(x.cC,{id:"U8WPSi"})}),oQ=e=>{let{site:t,path:n}=e,i=(0,eR.AR)({site:t,path:n});return i?(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"kcKqQj"}),placement:"top",children:(0,a.jsx)(A.h,{ml:-1,href:i,as:id(),target:"_blank","aria-label":p.ag._({id:"WklWxF"}),variant:"ghost",color:"gray.500",size:"xs",icon:(0,a.jsx)(D.G,{icon:O.ZE5}),pointerEvents:"auto",onClick:e=>{e.stopPropagation()}})}):null},o$=e=>{var t,n;let{doc:i,site:r,showCreatedInfo:s}=e,o=(0,oK.$)(null==i?void 0:i.title),l=null===(t=r.routes)||void 0===t?void 0:t.find(e=>e.docId===i.id),c=(0,eR.jl)(i,r);return(0,a.jsxs)(d.xu,{px:4,pb:2,maxW:"300px",children:[(0,a.jsxs)(ej.U,{align:"start",children:[(0,a.jsx)(e5.x,{noOfLines:2,children:o}),c&&(0,a.jsx)(oQ,{site:r,path:null==l?void 0:l.path})]}),l&&(0,a.jsx)(o0,{path:l.path}),s&&"createdTime"in i&&(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",noOfLines:1,mt:2,children:(0,a.jsx)(x.cC,{id:"oJFw5Q",values:{0:(0,rN.Dw)(i.createdTime)}})}),"createdBy"in i&&s&&(0,a.jsx)(e5.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(x.cC,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})]})},o0=e=>{let{path:t}=e;return"/"===t?(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(x.cC,{id:"wFCbbC"})}):(0,a.jsx)(e5.x,{fontFamily:"mono",fontSize:"sm",color:"gray.500",children:t})},o1=e=>{let{onClick:t,icon:n,label:i}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(rW.s,{icon:n||(0,a.jsx)(D.G,{icon:O.gr5,fixedWidth:!0}),onClick:t||(()=>{oJ.T.emit("openPageSetup","cards")}),children:i||(0,a.jsx)(x.cC,{id:"Kx2GmY"})})})},o2=e=>{let{site:t}=e,n=(0,oB.Z)((0,oV.Z)(t.createdTime),"PPP");return(0,a.jsxs)(d.xu,{px:4,pb:2,maxW:"300px",children:[(0,a.jsx)(e5.x,{noOfLines:6,children:t.name}),(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(x.cC,{id:"jlWdji",values:{createdTime:n}})})]})};var o5=n(4476),o3=n(99507),o4=n(85573),o6=n(35534);let o8=e=>{let{onClose:t,domainName:n,onDelete:i,isDeleting:r}=e;return(0,a.jsxs)(rV.u_,{isOpen:!0,onClose:t,trapFocus:!1,size:"xl",isCentered:!0,closeOnOverlayClick:!1,children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(tE.K,{spacing:0,children:(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"T3exbL",values:{domainName:n}})})})}),(0,a.jsx)(ny.f,{children:(0,a.jsx)(tE.K,{spacing:4,children:(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"DkFGZj"})})})}),(0,a.jsx)(nk.m,{children:(0,a.jsxs)(eC.h,{children:[(0,a.jsx)(ev.z,{isDisabled:r,variant:"ghost",colorScheme:"gray",onClick:t,children:(0,a.jsx)(x.cC,{id:"dEgA5A"})}),(0,a.jsx)(ev.z,{variant:"hazardous",isLoading:r,onClick:i,loadingText:p.ag._({id:"EF2EU9"}),children:(0,a.jsx)(x.cC,{id:"cnGeoo"})})]})})]})]})};var o9=n(56453),o7=n(75397),le=n(97010),lt=n(44438);let ln=e=>{let{code:t,data:n}=e;switch(t){case t$.ec5.AddARecord:return(0,a.jsx)(x.cC,{id:"ZIfa5n",values:{0:n.ip},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(lt.E,{})}});case t$.ec5.AddCnameRecordSubdomain:return(0,a.jsx)(x.cC,{id:"edcjuc",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(lt.E,{}),2:(0,a.jsx)(lt.E,{})}});case t$.ec5.EditCnameRecordSubdomain:return(0,a.jsx)(x.cC,{id:"ngCUo8",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,a.jsx)(lt.E,{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)(lt.E,{})}});case t$.ec5.RemoveARecord:return(0,a.jsx)(x.cC,{id:"GLzRh5",values:{0:n.ip},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(lt.E,{})}});case t$.ec5.RemoveAaaaRecord:return(0,a.jsx)(x.cC,{id:"g1KLfp",values:{0:n.ip},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(lt.E,{})}});case t$.ec5.AddCnameRecordWww:return(0,a.jsx)(x.cC,{id:"hFQUqJ",values:{0:n.cnameDomain},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(lt.E,{})}});case t$.ec5.EditCnameRecordWww:return(0,a.jsx)(x.cC,{id:"LmV2TD",values:{0:n.cnameDomain},components:{0:(0,a.jsx)(lt.E,{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)(lt.E,{})}});case t$.ec5.ContactGammaSupport:return(0,a.jsx)(x.cC,{id:"pGrCiS"});case t$.ec5.SslModeFullCloudflare:return(0,a.jsx)(x.cC,{id:"D61i6v"});case t$.ec5.CheckDnsCloudflare:return(0,a.jsx)(x.cC,{id:"gYfbYc"})}return(0,a.jsx)(a.Fragment,{})};var li=n(12194);let lr=e=>{let{isOpen:t,onClose:n,domain:i,siteId:r}=e,s=(0,iL.p)(),o=null==i?void 0:i.name,l=null==o?void 0:o.split(".")[0].split("-").slice(-1)[0],[c,d]=(0,g.useState)(null==o?void 0:o.split(".")[0].split("-").slice(0,-1).join("-")),u=null==o?void 0:o.split(".").slice(1).join("."),[h,{loading:m}]=(0,t$.gVY)(),f=(0,g.useCallback)(()=>{h({variables:{input:{siteId:r,name:c}}}).then(()=>{s({title:(0,a.jsx)(x.cC,{id:"oMgC5V"}),description:(0,a.jsx)(x.cC,{id:"tIBLtD"}),duration:3e3,position:"top",isClosable:!1,status:"success"}),n()}).catch(e=>{s({title:(0,a.jsx)(x.cC,{id:"YoFYYT"}),description:(0,a.jsx)(x.cC,{id:"Wd0ucu"}),duration:3e3,position:"top",isClosable:!1,status:"error"}),console.error("[BuiltInDomainEditModal] Failed to change domain name:",e)})},[h,r,c,s,n]);return(0,a.jsxs)(rV.u_,{isOpen:t,onClose:n,size:"md",closeOnOverlayClick:!1,children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"VMKg48"})}),(0,a.jsx)(nb.o,{}),(0,a.jsx)(ny.f,{children:(0,a.jsxs)(oz.NI,{children:[(0,a.jsxs)(ej.U,{children:[(0,a.jsx)(o4.I,{value:c,onKeyDown:e=>{"Enter"===e.key&&f()},onChange:e=>{d((0,li.IR)(e.target.value))},placeholder:p.ag._({id:"dcSbw0"})}),(0,a.jsxs)(oG.l,{whiteSpace:"nowrap",children:["-",l,".",u]})]}),(0,a.jsx)(oz.Q6,{lineHeight:"normal",children:(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"bvN4Vx"})})})]})}),(0,a.jsxs)(nk.m,{children:[(0,a.jsx)(ev.z,{onClick:n,mr:3,variant:"ghost",children:(0,a.jsx)(x.cC,{id:"dEgA5A"})}),(0,a.jsx)(ev.z,{variant:"solid",onClick:f,isLoading:m,isDisabled:c.length<3,children:(0,a.jsx)(x.cC,{id:"tfDRzk"})})]})]})]})},ls={pending:{tooltip:(0,a.jsx)(x.cC,{id:"/BjVEU"}),badgeText:(0,a.jsx)(x.cC,{id:"bl9677"}),badgeColorScheme:"yellow"},failed:{tooltip:(0,a.jsx)(x.cC,{id:"7Bj3x9"}),badgeText:(0,a.jsx)(x.cC,{id:"7Bj3x9"}),badgeColorScheme:"red"}},lo=e=>{let{status:t,onClick:n}=e;if("verified"===t)return null;let{tooltip:i,badgeText:r,badgeColorScheme:s}=ls[t];return(0,a.jsx)(eb.kH,{label:i,placement:"top",children:(0,a.jsx)(oL.C,{display:"flex",justifyContent:"center",colorScheme:s,cursor:n?"pointer":"default",onClick:n||void 0,children:r})})},ll=e=>{var t,n,i;let{domain:r,onDomainSetupClick:s,path:o,onDeleteClick:l,numDomains:c,siteId:u}=e,h=(0,eR.mn)({domain:r,path:o}),m=(0,iL.p)(),f=!r.builtin,j=r.builtin,v=f&&("verified"!==r.status||"verified"===r.status&&c>1),[C]=(0,t$.NEQ)(),{data:b}=(0,t$.pKQ)({variables:{name:r.name},skip:r.builtin||"failed"===r.status}),y=(0,g.useCallback)(async()=>{await C({variables:{id:r.id}}),m({title:(0,a.jsx)(x.cC,{id:"LIAJwx"}),status:"success",duration:3e3,position:"top",isClosable:!0})},[C,r.id,m]),{isOpen:k,onOpen:w,onClose:E}=(0,S.q)({id:"edit-domain-modal"});return(0,a.jsxs)(o9.Z,{variant:"outline",children:[(0,a.jsx)(o7.e,{children:(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsxs)(ej.U,{children:[(0,a.jsx)(tE.K,{children:"verified"===r.status?(0,a.jsx)(eb.kH,{label:h,placement:"top",children:(0,a.jsx)(ev.z,{as:rI.r,variant:"link",href:h,wordBreak:"break-all",target:"_blank",rightIcon:(0,a.jsx)(d.xu,{ml:2,children:(0,a.jsx)(D.G,{icon:e4.wlW,size:"xs"})}),whiteSpace:"normal",children:r.name})}):(0,a.jsx)(e5.x,{children:r.name})}),(0,a.jsx)(e3.L,{}),(0,a.jsx)(ej.U,{children:(0,a.jsx)(lo,{status:r.status,onClick:"failed"===r.status?y:null})}),(0,a.jsxs)(eC.h,{children:[j&&(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"VMKg48"}),placement:"top",children:(0,a.jsx)(A.h,{onClick:w,"aria-label":p.ag._({id:"VMKg48"}),size:"sm",variant:"ghost",icon:(0,a.jsx)(D.G,{icon:O.Xcf})})}),f&&(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"UqSZMD"}),placement:"top",children:(0,a.jsx)(A.h,{onClick:()=>{s(r.name)},"aria-label":p.ag._({id:"UqSZMD"}),size:"sm",variant:"ghost",colorScheme:"blackAlpha",icon:(0,a.jsx)(D.G,{icon:O.DBf})})}),v&&(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"C2YqXi"}),placement:"top",children:(0,a.jsx)(A.h,{onClick:()=>{l(null==r?void 0:r.id)},"aria-label":p.ag._({id:"C2YqXi"}),size:"sm",variant:"hazardous",icon:(0,a.jsx)(D.G,{icon:O.Vui})})})]})]}),j&&(0,a.jsx)(d.xu,{children:(0,a.jsxs)(e5.x,{fontSize:"xs",color:"gray.500",as:"span",children:[(0,a.jsx)(x.cC,{id:"Zzuxg+"})," ",(0,a.jsx)(eb.Yq,{label:(0,a.jsx)(x.cC,{id:"FdwjYK"})})]})}),(null==b?void 0:b.checkDomain)&&(null===(t=b.checkDomain.actions)||void 0===t?void 0:t.length)&&(null===(i=b.checkDomain)||void 0===i?void 0:null===(n=i.dns)||void 0===n?void 0:n.status)!==t$.lK9.Ok&&(0,a.jsxs)(tE.K,{spacing:2,fontSize:"xs",color:"gray.500",children:[(0,a.jsxs)(e5.x,{children:[(0,a.jsx)(x.cC,{id:"ezr3/E"})," "]}),(0,a.jsx)(le.QI,{pl:"0",spacing:"2",children:((null==b?void 0:b.checkDomain.actions)||[]).map(e=>(0,a.jsx)(le.HC,{sx:{code:{fontSize:"xxs",bg:"gray.100",color:"gray.800"}},children:ln(e)},e.code))})]})]})}),(0,a.jsx)(lr,{isOpen:k,onClose:E,domain:r,siteId:u})]})},la=()=>{let e=(0,g.useRef)(!1),[t,n]=(0,g.useState)(()=>void 0!==window.entri);return(0,tg.Gq)("https://cdn.goentri.com/entri.js",{predicate:()=>void 0===window.entri,onload:()=>{n(!0),e.current=!0}}),{entriReady:t}};var lc=n(95405),ld=n(60628),lu=n(22411),lh=n(20342);let lx=async()=>{if(!window.entri)throw Error("Entri not found");return fetch("/api/domains/connectToken").then(e=>e.json()).then(e=>{if(!e.auth_token)throw Error("No auth token returned");return e.auth_token})},lp=async e=>{let t=await lx();if(!window.entri)throw Error("Entri not found");let{dnsRecords:n}=(0,eR.Yd)(""),i={applicationId:"gamma",applicationName:"Gamma",token:t,dnsRecords:n,sellVersion:"v2",...ld.VH.get("entriV3")?{sellVersion:"v3",whiteLabel:{theme:{primary:"#f7f3f2",onPrimary:"#3c3838",secondary:"#2208cc",onSecondary:"#ffffff",headerBackground:"#F2E7DE",interactive:"#2208cc",premiumBadge:"#d5ceff",onPremiumBadge:"#110466",priceBadge:"#C6F6D5",onPriceBadge:"#22543D",activating:"#2208cc",onActivating:"#ffffff"},sell:{flowTarget:"_blank",overlayScreenHeight:"60%",partnerName:"Gamma",partnerLogo:"".concat(lc.v.FRONTEND_URL,"/").concat(lu.Z.src),partnerIcon:"".concat(lc.v.FRONTEND_URL,"/").concat(lh.Z.src),contact:{firstName:e.firstName,lastName:e.lastName,email:e.email}}}}:{}};return console.log("[launchEntri] Purchasing Entri with config",i),window.entri.purchaseDomain(i),lf()},lm=async e=>{let t=await lx(),{domain:n,dnsRecords:i}=(0,eR.Yd)(e),r={applicationId:"gamma",token:t,prefilledDomain:n,dnsRecords:i};return console.log("[launchEntri] Launching Entri with config",r),window.entri.showEntri(r),lf()},lf=()=>new Promise((e,t)=>{let n=i=>{if(window.removeEventListener("onEntriClose",n),i.detail.success)e(i.detail);else{var r,s,o;t((null==i?void 0:null===(r=i.detail)||void 0===r?void 0:r.error)?"".concat((null===(s=i.detail.error)||void 0===s?void 0:s.title)?"".concat(i.detail.error.title,": "):""," ").concat((null===(o=i.detail.error)||void 0===o?void 0:o.details)?i.detail.error.details:""):void 0)}};window.addEventListener("onEntriClose",n,!1)}),lg=e=>{let{siteId:t}=e,n=(0,eM.z$)(),{user:i}=(0,ih.SE)(),{entriReady:r}=la(),s=(0,iL.p)(),[o,l]=(0,g.useState)(!1),[c,{loading:d}]=(0,t$.kui)(),u=(0,g.useCallback)(async()=>{t&&(l(!0),lp({firstName:(null==i?void 0:i.firstName)||"",lastName:(null==i?void 0:i.lastName)||"",email:(null==i?void 0:i.email)||""}).then(e=>{if(e&&"purchase"===e.setupType&&e.domain){let i=e.domain;null==n||n.track(eM.AA.SITE_DOMAIN_PURCHASED,{domain:i,siteId:t}),c({variables:{input:{name:i,siteId:t,method:t$.Q0V.Purchase}}}).then(()=>{null==n||n.track(eM.AA.SITE_DOMAIN_ADDED,{domain:i,siteId:t,source:"entriSell"}),s({title:(0,a.jsx)(x.cC,{id:"5Ae0kE"}),description:(0,a.jsx)(x.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}).catch(e=>{console.error("[DomainListWrapper] error adding domain error",e),s({title:(0,a.jsx)(x.cC,{id:"JXFM3z"}),description:(null==e?void 0:e.message)&&e.message,status:"error",duration:null,position:"top",isClosable:!0})})}}).catch(e=>{console.error("[DomainListWrapper] entriPurchaseDomain error",e),s({title:e?(0,a.jsx)(x.cC,{id:"H7PVmT"}):(0,a.jsx)(x.cC,{id:"vr6nIz"}),description:e||void 0,status:"error",duration:e?null:3e3,position:"top",isClosable:!0})}).finally(()=>{l(!1)}))},[c,n,t,s,i]);return t?(0,a.jsx)(ev.z,{variant:"outline",size:"md",onClick:u,isLoading:o,isDisabled:!r,children:(0,a.jsx)(x.cC,{id:"+VODT0"})}):null},lj=e=>{let{isOpen:t,onClose:n,domainName:i,onTransferConfirm:r,onTransferCancel:s,domainToTransfer:o,isTransferring:l}=e,c=(0,g.useCallback)(()=>{s(),n()},[n,s]),d=(0,g.useCallback)(async()=>{r(),n()},[n,r]);return o?(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsxs)(rV.u_,{isOpen:t,onClose:c,size:"lg",children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"hqplvI"})}),(0,a.jsx)(nb.o,{}),(0,a.jsx)(ny.f,{children:(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(e5.x,{children:o.siteArchived?(0,a.jsx)(x.cC,{id:"SeHn75",values:{domainName:i,0:o.siteName}}):(0,a.jsx)(x.cC,{id:"tX38ij",values:{domainName:i,0:o.siteName}})}),(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"rKH6wM"})})]})}),(0,a.jsxs)(nk.m,{children:[(0,a.jsx)(ev.z,{variant:"ghost",mr:3,onClick:c,children:(0,a.jsx)(x.cC,{id:"yz7wBu"})}),(0,a.jsx)(ev.z,{isLoading:l,variant:"hazardous",onClick:d,children:(0,a.jsx)(x.cC,{id:"vTZxnA"})})]})]})]})}):(0,a.jsx)(a.Fragment,{})},lv=e=>{var t;let{site:n,path:i,onDomainSetupClick:r,onAddDomain:s,isAddingDomain:o,refetchSites:l}=e,c=(0,y.ye)("purchaseDomain"),d=(0,iL.p)(),{currentWorkspace:u}=(0,eX.SE)(),[h,m]=(0,g.useState)(),[f,j]=(0,g.useState)(),[v,C]=(0,g.useState)(""),{isOpen:b,onOpen:k,onClose:w}=(0,S.q)({id:"delete-domain-modal"}),{isOpen:E,onOpen:I,onClose:A}=(0,nK.M)({id:"transferDomainModal"}),[T,{loading:_}]=(0,t$.KtP)({fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),O=n.domains.find(e=>e.id===h),D=(0,eR.m6)(v)&&void 0===n.domains.find(e=>e.name===v),[R,{loading:P}]=(0,t$.Yqv)(),[L,{loading:z}]=(0,t$.dLz)(),[G,N]=(0,g.useState)(void 0),M=(0,g.useCallback)(async e=>{var t;let i=await T({variables:{name:e,workspaceId:null==u?void 0:u.id}}),r=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.domains,o=null==r?void 0:r[0];if(n&&o){j(o),I();return}s(e),j(void 0),C("")},[null==u?void 0:u.id,T,s,I,n]);(0,tg.vm)(()=>{h?N(null==O?void 0:O.name):N(void 0)},[h,null==O?void 0:O.name],[h]);let U=(0,g.useCallback)(()=>{w(),m(()=>void 0)},[w]),F=(0,g.useCallback)(async()=>{O&&(await R({variables:{id:h}}),await l(),d({title:(0,a.jsx)(x.cC,{id:"V4fbcv",values:{0:O.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),U())},[l,R,h,O,U,d]),W=(0,o6.Y)("custom_domains"),H=W&&c,q=(0,eR.Zz)(n.domains),B=(0,g.useCallback)(()=>{j(void 0)},[]),V=(0,g.useCallback)(async()=>{f&&(await L({variables:{id:null==f?void 0:f.id,siteId:n.id},refetchQueries:["GetSite"]}),d({title:(0,a.jsx)(x.cC,{id:"dHhDGG",values:{0:f.name}}),position:"top",status:"success",duration:5e3}),C(""),j(void 0))},[f,n.id,d,L]);return(0,a.jsxs)(tE.K,{spacing:8,p:2,children:[W&&(0,a.jsxs)(tE.K,{spacing:4,mb:2,children:[H&&(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(e5.x,{fontSize:"md",children:(0,a.jsx)(x.cC,{id:"gBiND0"})}),(0,a.jsx)(lg,{siteId:null==n?void 0:n.id})]}),(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(e5.x,{children:H?(0,a.jsx)(x.cC,{id:"9UtMWk"}):(0,a.jsx)(x.cC,{id:"ssWCSl"})}),(0,a.jsxs)(ej.U,{children:[(0,a.jsx)(o4.I,{bg:"white",placeholder:(null==n?void 0:null===(t=n.domains)||void 0===t?void 0:t.length)?p.ag._({id:"jt/2Ky"}):p.ag._({id:"1y9z1r"}),value:v,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&D&&(e.preventDefault(),M(v))}}),(0,a.jsx)(tE.K,{children:(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:D,children:(0,a.jsx)(ev.z,{isDisabled:!D,variant:"plain",onClick:()=>{M(v)},isLoading:o||_,children:(0,a.jsx)(x.cC,{id:"EdEpYN"})})})})]})]})]}),(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(x.cC,{id:"bwl+tv"}),q.map(e=>(0,a.jsx)(ll,{domain:e,onDomainSetupClick:r,path:i,onDeleteClick:e=>{m(e),k()},numDomains:n.domains.length||0,siteId:n.id},e.id))]}),!W&&(0,a.jsx)(ss.m,{segmentEvent:eM.AA.GAMMA_PRO_UPSELL_DOMAINS,title:(0,a.jsx)(x.cC,{id:"m6aLo0"}),description:(0,a.jsx)(x.cC,{id:"xFELnF",values:{GAMMA_PRO_PROPER_NOUN:Z.x8,GAMMA_PROPER_NOUN:Z.N6}})}),b&&(0,a.jsx)(o8,{onClose:U,onDelete:F,domainName:G,isDeleting:P}),(0,a.jsx)(lj,{isOpen:E,onClose:A,onTransferCancel:B,domainName:v,domainToTransfer:f,onTransferConfirm:V,isTransferring:z})]})};var lC=n(69419);let lb=e=>{let{isOpen:t,onClose:n,domainName:i,onDomainConfirmed:r}=e,[s,o]=(0,g.useState)("initial"),{entriReady:l}=la(),[d,u]=(0,g.useState)(!1),h=(0,iL.p)(),{dnsRecords:p,isRootDomain:m,subdomain:f}=(0,g.useMemo)(()=>(0,eR.Yd)(i||""),[i]);return(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsxs)(rV.u_,{isOpen:t,onClose:n,size:"3xl",trapFocus:!1,children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"xQMU8T",values:{domainName:i}})}),(0,a.jsx)(nb.o,{}),(0,a.jsxs)(ny.f,{children:["initial"===s&&(0,a.jsx)(o9.Z,{variant:"filled",children:(0,a.jsx)(o7.e,{children:(0,a.jsxs)(tE.K,{spacing:4,py:4,mx:"auto",children:[(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsx)(e5.x,{textAlign:"center",fontSize:"2xl",children:(0,a.jsx)(D.G,{icon:O.g4A,size:"lg"})}),(0,a.jsx)(e5.x,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:(0,a.jsx)(x.cC,{id:"w5l5pM"})})]}),(0,a.jsx)(e5.x,{textAlign:"center",maxW:"unset",children:(0,a.jsx)(x.cC,{id:"MhdvBQ"})})]}),(0,a.jsx)(c.k,{align:"center",justify:"center",w:"100%",children:(0,a.jsxs)(tE.K,{w:64,maxW:"100%",children:[(0,a.jsx)(ev.z,{size:"md",variant:"solid",isDisabled:!l,isLoading:d,onClick:()=>{i&&(u(!0),lm(i).then(e=>{console.log("[ENTRI] Successfully setup domain",e),null==r||r({domainName:i,source:"automatic"})}).catch(e=>{e&&nt.Tb("[entri.showEntri] Error setting up domain: ".concat(e)),h({title:e?(0,a.jsx)(x.cC,{id:"l/2jzv"}):(0,a.jsx)(x.cC,{id:"FZ1Qqq"}),description:e,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(()=>{u(!1)}))},children:(0,a.jsx)(x.cC,{id:"qu+sXe"})}),(0,a.jsxs)(ej.U,{children:[(0,a.jsx)(sn.i,{}),(0,a.jsx)(e5.x,{color:"gray.600",children:(0,a.jsx)(x.cC,{id:"BzEFor"})}),(0,a.jsx)(sn.i,{})]}),(0,a.jsx)(ev.z,{size:"md",variant:"plain",onClick:()=>{o("manualSetup")},children:(0,a.jsx)(x.cC,{id:"ANIrop"})})]})})]})})}),"manualSetup"===s&&(0,a.jsx)(o9.Z,{variant:"filled",children:(0,a.jsx)(o7.e,{children:(0,a.jsxs)(tE.K,{spacing:6,children:[(0,a.jsx)(e5.x,{fontWeight:"semibold",fontSize:"lg",children:(0,a.jsx)(x.cC,{id:"L5N7HX"})}),(0,a.jsxs)(sW.i,{variant:"simple",children:[(0,a.jsx)(sN.h,{children:(0,a.jsxs)(sM.Tr,{children:[(0,a.jsx)(sU.Th,{children:(0,a.jsx)(x.cC,{id:"6YtxFj"})}),(0,a.jsx)(sU.Th,{children:(0,a.jsx)(x.cC,{id:"+zy2Nq"})}),(0,a.jsx)(sU.Th,{isNumeric:!0,children:(0,a.jsx)(x.cC,{id:"HKH+W+"})})]})}),(0,a.jsx)(sH.p,{children:(p||[]).map(e=>(0,a.jsxs)(sM.Tr,{children:[(0,a.jsx)(sq.Td,{fontFamily:"mono",children:e.host}),(0,a.jsx)(sq.Td,{fontFamily:"mono",children:e.type}),(0,a.jsx)(sq.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value))})]}),(0,a.jsxs)(ip.b,{status:"info",colorScheme:"orange",children:[(0,a.jsx)(sa.z,{}),(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(e5.x,{fontWeight:"bold",fontSize:"md",children:(0,a.jsx)(x.cC,{id:"NxHkkp"})}),(0,a.jsxs)(le.GS,{pl:"4",spacing:"2",children:[m?1===lC.Co.length?(0,a.jsx)(le.HC,{children:(0,a.jsx)(x.cC,{id:"wz2Cgq",values:{0:lC.Co[0]},components:{0:(0,a.jsx)(lt.E,{colorScheme:"gray"}),1:(0,a.jsx)(lt.E,{colorScheme:"gray"})}})}):(0,a.jsx)(le.HC,{children:(0,a.jsx)(x.cC,{id:"+kOqFW",values:{0:lC.Co.slice(0,-1).map(e=>(0,a.jsx)(lt.E,{colorScheme:"gray",children:e},e)),1:lC.Co.slice(-1)[0]},components:{0:(0,a.jsx)(lt.E,{colorScheme:"gray"}),1:(0,a.jsx)(ej.U,{display:"inline",divider:(0,a.jsx)("span",{children:", "})}),2:(0,a.jsx)(lt.E,{colorScheme:"gray"})}})}):null,m&&(0,a.jsx)(le.HC,{children:(0,a.jsx)(x.cC,{id:"vLov0O",components:{0:(0,a.jsx)(lt.E,{colorScheme:"gray"}),1:(0,a.jsx)(lt.E,{colorScheme:"gray"})}})}),(0,a.jsx)(le.HC,{children:(0,a.jsx)(x.cC,{id:"Jmb6Yp",values:{subdomain:f,GAMMA_SITES_HOST:lC.ax},components:{0:(0,a.jsx)(lt.E,{colorScheme:"gray"}),1:(0,a.jsx)(lt.E,{colorScheme:"gray"}),2:(0,a.jsx)(lt.E,{colorScheme:"gray"})}})})]})]})]}),r&&(0,a.jsxs)(ej.U,{justifyContent:"space-between",children:[(0,a.jsx)(ev.z,{variant:"plain",onClick:()=>o("initial"),children:(0,a.jsx)(x.cC,{id:"iH8pgl"})}),(0,a.jsx)(ev.z,{variant:"solid",onClick:()=>{n(),null==r||r({domainName:i,source:"manual"})},size:"md",mx:"auto",children:(0,a.jsx)(x.cC,{id:"RyhVuk"})})]})]})})})]}),(0,a.jsx)(nk.m,{})]})]})})},ly=e=>{let{children:t,shouldWrap:n=!1}=e;return n?(0,a.jsx)(iN.W,{py:16,maxW:"container.md",children:t}):(0,a.jsx)(a.Fragment,{children:t})},lk=e=>{let{showHeadings:t=!0}=e,n=(0,eM.z$)(),i=(0,F.CG)(e_.lH),r=(0,iL.p)(),{refetch:s}=(0,i0.ZUZ)({variables:{id:null==i?void 0:i.id},fetchPolicy:"cache-first",skip:!(null==i?void 0:i.id)}),{isOpen:o,onOpen:l,onClose:d}=(0,nK.M)({id:"domainSetupModal"}),u=null==i?void 0:i.domains.find(e=>"pending"===e.status),[h,p]=(0,g.useState)(null),[m,{loading:f}]=(0,i0.kui)(),[j,v]=(0,g.useState)();(0,g.useEffect)(()=>{if(!u)return;let e=setInterval(()=>{s()},1e4);return()=>{clearInterval(e)}},[u,s,i]);let C=(0,g.useCallback)(e=>{v(e),l()},[l]),b=(0,g.useCallback)(e=>{let{domainName:t,source:s}=e;"addDomain"===h&&m({variables:{input:{siteId:null==i?void 0:i.id,name:t,method:"automatic"===s?i0.Q0V.Automatic:i0.Q0V.Manual}}}).then(()=>{null==n||n.track(eM.AA.SITE_DOMAIN_ADDED,{domain:t,siteId:null==i?void 0:i.id,source:s}),r({title:(0,a.jsx)(x.cC,{id:"p8Oc6N"}),description:(0,a.jsx)(x.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),d()}).catch(e=>{let t=(0,o3.uc)(e).some(e=>"max_domains_reached"===e);r({title:t?(0,a.jsx)(x.cC,{id:"634yzf"}):(0,a.jsx)(x.cC,{id:"HugOMA"}),description:t?(0,a.jsx)(x.cC,{id:"aMKkZK"}):(0,a.jsx)(x.cC,{id:"PZCqeW"}),status:"error",isClosable:!0,position:"top"})})},[m,n,h,d,null==i?void 0:i.id,r]);return console.debug("%cDomainsPanel debug","background-color: #cc00ff",{site:i}),(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",mt:4,children:(0,a.jsxs)(ly,{shouldWrap:t,children:[t&&(0,a.jsxs)(tE.K,{spacing:1,mb:4,children:[(0,a.jsx)(nQ.X,{children:(0,a.jsx)(x.cC,{id:"AZ4xlc"})}),(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"KuoJwF"})})]}),i?(0,a.jsx)(lv,{site:i,onDomainSetupClick:C,onAddDomain:e=>{l(),v(e),p("addDomain")},isAddingDomain:f,refetchSites:s}):(0,a.jsx)(nE.AA,{}),o&&j&&(0,a.jsx)(lb,{domainName:j,isOpen:o,onClose:()=>{d(),p(null)},onDomainConfirmed:h?b:null})]})})};var lw=n(20437),lS=n(72842),lE=n(9355),lI=n(77742),lA=n(62935),lT={src:"/_next/static/media/no-navbar.e9d28333.png"},l_={src:"/_next/static/media/top-navbar.97a69a83.png"};let lO=e=>{let t=(0,F.CG)(e_.lH);return t?(0,a.jsx)(lD,{site:t,...e}):null},lD=e=>{let{site:t,showHeadings:n=!0,doc:i}=e,r=(0,iL.p)(),s=(0,y.ye)("sitesNav"),[o,l]=(0,g.useState)(t.name),[d,u]=(0,g.useState)(t.gtmContainerId),[h,m]=(0,g.useState)(t.navEnabled),[f,j]=(0,g.useState)(!1),[v,C]=(0,g.useState)(!1),[b,k]=(0,g.useState)(null),{currentWorkspace:w}=(0,eX.SE)(),[S]=(0,t$.Iyu)(),E=(0,g.useCallback)(async()=>{if(!(null==t?void 0:t.id))return;j(!0);let e={siteId:null==t?void 0:t.id,name:o,navEnabled:h,gtmContainerId:d};!h||(null==t?void 0:t.navContent)||(e.navContent=(0,eG.JB)()),await S({variables:{input:e}}),r({title:(0,a.jsx)(x.cC,{id:"bZn5Ok"}),status:"success",isClosable:!0,position:"top"}),j(!1)},[d,o,h,t,r,S]),I=(0,g.useCallback)(async e=>{(null==t?void 0:t.id)&&(C(!0),await S({variables:{input:{siteId:null==t?void 0:t.id,faviconUrl:e}}}),r({title:e?(0,a.jsx)(x.cC,{id:"64GEyu"}):(0,a.jsx)(x.cC,{id:"/K2cLG"}),status:"success",isClosable:!0,position:"top"}),C(!1))},[null==t?void 0:t.id,r,S]),T=o!==(null==t?void 0:t.name)||h!==(null==t?void 0:t.navEnabled)||d!==(null==t?void 0:t.gtmContainerId);return(0,a.jsxs)(c.k,{w:"100%",flex:1,direction:"column",px:2,children:[(0,a.jsxs)(ly,{shouldWrap:n,children:[n&&(0,a.jsx)(nQ.X,{fontSize:"3xl",letterSpacing:"tight",fontWeight:"800",mb:12,children:(0,a.jsx)(x.cC,{id:"Tz0i8g"})}),(0,a.jsxs)(tE.K,{spacing:4,mt:6,children:[(0,a.jsxs)(oz.NI,{children:[(0,a.jsx)(ej.U,{justifyContent:"center",children:(0,a.jsx)(oG.l,{flex:"1",children:(0,a.jsx)(x.cC,{id:"Lve3H6"})})}),(0,a.jsx)(o4.I,{onChange:e=>{l(e.currentTarget.value)},placeholder:p.ag._({id:"ZiMSMQ"}),value:o})]}),(0,a.jsxs)(oz.NI,{children:[(0,a.jsx)(ej.U,{justifyContent:"center",children:(0,a.jsx)(oG.l,{flex:"1",children:(0,a.jsx)(x.cC,{id:"+Qaboy"})})}),(0,a.jsx)(c.k,{h:"150px",w:"100%",position:"relative",justify:"center",align:"center",children:(null==t?void 0:t.faviconUrl)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.k,{align:"center",justify:"center",w:"128px",h:"128px",border:"1px solid var(--chakra-colors-blackAlpha-200)",children:(0,a.jsx)(nX.E,{src:null==t?void 0:t.faviconUrl,maxW:"100px",maxH:"100px",borderRadius:"sm"})}),(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"XyBdok"}),children:(0,a.jsx)(A.h,{zIndex:2,position:"absolute",top:0,right:0,isRound:!0,isDisabled:v,size:"sm",icon:(0,a.jsx)(D.G,{icon:O.XAH}),"aria-label":p.ag._({id:"XyBdok"}),onClick:()=>I(null)})})]}):v||b===lE.D.Uploading?(0,a.jsx)(tI.$,{}):(0,a.jsx)(lS.un,{orgId:null==w?void 0:w.id,uploadType:"icon",editType:"icon",dropHereText:p.ag._({id:"hVCCpY",values:{0:"%{browse}"}}),customHeight:"150px",customFontSize:"xs",onUploadStart:()=>{k(lE.D.Uploading)},onUploadSuccess:async(e,t)=>{let{src:n,uploadResultStep:i}=e;"optimized"===i&&(await I(n),k(lE.D.Done))},onUploadFailed:e=>{k(lE.D.Error),r({title:(0,a.jsx)(x.cC,{id:"aECahe"})}),console.error("[Site SettingsPanel] Favicon upload error",e)},sx:{width:"100%",".uppy-Root":{border:"1px solid var(--chakra-colors-gray-200)",borderRadius:"md",width:"100%"},".uppy-DragDrop-label":{fontSize:"xs",color:"gray.500"},".uppy-DragDrop--isDragDropSupported":{border:"none"},".uppy-DragDrop-arrow":{transform:"scale(0.85)"}}})}),(0,a.jsx)(e5.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,a.jsx)(x.cC,{id:"ifTGl2"})})]}),s&&(0,a.jsxs)(oz.NI,{children:[(0,a.jsx)(ej.U,{justifyContent:"center",children:(0,a.jsx)(oG.l,{flex:"1",children:(0,a.jsx)(x.cC,{id:"UxKoFf"})})}),(0,a.jsxs)(lw.M,{columns:2,spacing:6,flex:1,children:[(0,a.jsx)(lR,{name:p.ag._({id:"Nom9QG"}),src:l_.src,isSelected:h,onClick:()=>{m(!0)}}),(0,a.jsx)(lR,{name:p.ag._({id:"BvDFuc"}),src:lT.src,isSelected:!h,onClick:()=>{m(!1)}})]})]}),(0,a.jsxs)(oz.NI,{children:[(0,a.jsx)(ej.U,{justifyContent:"center",children:(0,a.jsx)(oG.l,{flex:"1",children:(0,a.jsx)(x.cC,{id:"d4WWfP"})})}),(0,a.jsxs)(c.k,{sx:{".gtm-prefix::before":{content:'"GTM\\2009-"'}},children:[(0,a.jsx)(c.k,{className:"gtm-prefix",position:"absolute",alignItems:"center",color:(null==d?void 0:d.length)?"gray.800":"gray.500",fontWeight:"400",h:10,pl:4}),(0,a.jsx)(o4.I,{pl:16,placeholder:"XXXXXX",value:d||"",onChange:e=>{u(lA.R.sanitize(e.currentTarget.value).replace(/[\W_]+/g,"").toUpperCase().slice(0,10))}})]}),(0,a.jsx)(e5.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,a.jsx)(x.cC,{id:"6LEeiE",components:{0:(0,a.jsx)("br",{}),1:(0,a.jsx)(ev.z,{"aria-label":"Learn more about Google Tag Manager",as:"a",px:1,textDecoration:"underline",variant:"ghost",href:"https://support.google.com/tagmanager/answer/6103696?hl=en",target:"_blank",size:"xs",rightIcon:(0,a.jsx)(rB.h,{ml:-1})})}})})]}),i&&(0,a.jsx)(lI.V,{label:(0,a.jsx)(x.cC,{id:"SDyz5I"}),segmentEvent:tx.AA.GAMMA_PRO_UPSELL_SITE_REMOVE_WATERMARK,doc:i})]})]}),(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",pos:"sticky",bottom:0,children:(0,a.jsxs)(c.k,{mx:-2,flex:1,mb:-2,py:4,bg:"white",children:[(0,a.jsx)(e3.L,{}),(0,a.jsx)(ev.z,{variant:"solid",isDisabled:!T,onClick:E,isLoading:f,children:(0,a.jsx)(x.cC,{id:"tfDRzk"})})]})})]})},lR=e=>{let{name:t,src:n,onClick:i,isSelected:r,...s}=e;return(0,a.jsxs)(tE.K,{p:2,bg:r?"trueblue.50":"transparent",_hover:{bg:"trueblue.50",cursor:"pointer"},borderRadius:"md",spacing:2,...s,transitionProperty:"common",transitionDuration:"normal",onClick:i,children:[(0,a.jsx)(d.xu,{height:"80px",bg:"gray.50",borderRadius:"md",borderWidth:"1px",overflow:"hidden",children:n&&(0,a.jsx)(nX.E,{src:n,width:"100%",height:"100%",objectFit:"contain",borderRadius:"md"})}),(0,a.jsxs)(ej.U,{children:[r&&(0,a.jsx)(d.xu,{children:(0,a.jsx)(D.G,{icon:O.LEp})}),(0,a.jsx)(e5.x,{fontSize:"sm",fontWeight:"500",children:t})]})]})},lP=(0,g.memo)(e=>{let{editor:t}=e,{bodyStart:n}=(0,F.CG)(W.$p),i=(0,g.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[t]);return(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",p:2,pt:6,children:(0,a.jsx)(oU,{label:p.ag._({id:"fC5kYg"}),helperText:p.ag._({id:"0AZNtw"}),initialValue:n,updateValue:i,language:"html",height:"600px"})})});lP.displayName="CustomCodePanel";let lL=(0,g.memo)(e=>{let{selectedPanel:t,setSelectedPanel:n}=e,i=(0,y.ye)("docCustomCode");return(0,a.jsx)(tE.K,{spacing:4,children:(0,a.jsx)(tE.K,{spacing:8,children:(0,a.jsxs)(eC.h,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,a.jsx)(ev.z,{borderRadius:"md",leftIcon:(0,a.jsx)(D.G,{icon:O.ovd,fixedWidth:!0}),"data-website-panel-active-view-button":"domains",colorScheme:"domains"===t?"trueblue":"gray",bg:"domains"===t?"trueblue.100":void 0,onClick:()=>n("domains"),flex:1,children:(0,a.jsx)(x.cC,{id:"AZ4xlc"})}),(0,a.jsx)(ev.z,{borderRadius:"md",leftIcon:(0,a.jsx)(D.G,{icon:O.gr5,fixedWidth:!0}),"data-website-panel-active-view-button":"website",colorScheme:"website"===t?"trueblue":"gray",bg:"website"===t?"trueblue.100":void 0,onClick:()=>n("website"),flex:1,children:(0,a.jsx)(x.cC,{id:"Tz0i8g"})}),i&&(0,a.jsx)(ev.z,{borderRadius:"md",leftIcon:(0,a.jsx)(D.G,{icon:O.dT$,fixedWidth:!0}),"data-website-panel-active-view-button":"code",colorScheme:"code"===t?"trueblue":"gray",bg:"code"===t?"trueblue.100":void 0,onClick:()=>n("code"),flex:1,children:(0,a.jsx)(x.cC,{id:"E16GGw"})})]})})})});lL.displayName="SettingsPanelHeader";var lz=n(37164);let lG=e=>{var t;let{title:n,site:i}=e,r="/".concat((0,li.IR)(n||"untitled"));return(null==i?void 0:null===(t=i.routes)||void 0===t?void 0:t.find(e=>e.path===r))&&(r="".concat(r,"-").concat((0,lz.x0)(6))),r},lN={variant:"outline",transitionProperty:"all",transitionDuration:"normal",cursor:"pointer",boxShadow:"none",tabIndex:0,_hover:{shadow:"lg",borderColor:"trueblue.300",bg:"trueblue.50"},_focusVisible:{boxShadow:"none",outline:"none"},_focus:{boxShadow:"outline"}},lM=e=>{let{sites:t}=e,n=(0,F.CG)(W.yx),i=(0,eM.z$)(),{currentWorkspace:r}=(0,eX.SE)(),[s]=(0,t$.qbt)(),[o,l]=(0,g.useState)(!1),d=(0,iL.p)(),{push:u,reload:h}=(0,ey.useRouter)(),p=(0,g.useCallback)(async e=>{if(!n)return;l(!0);let o=null==t?void 0:t.find(t=>t.id===e),c=n.id;if(!(null==r?void 0:r.id)){console.error("[MoveToSiteModal] No currentWorkspace found");return}let u=lG({title:n.title,site:o});if(await (0,eR.iL)(c),!c){console.error("[MoveToSiteModal] No docId found");return}null==i||i.track(eM.AA.DOC_MOVED_TO_SITE,{doc_id:c,site_id:e}),s({variables:{input:{siteId:e,docId:c,path:u}},refetchQueries:["GetSite"]}).then(()=>{(0,ew.yQ)({docId:c}),console.debug("[MoveToSiteModal] Doc moved to site. Adding route then navigating to editor",c),d({position:"top",title:(0,a.jsx)(x.cC,{id:"oMgC5V"}),description:(0,a.jsx)(x.cC,{id:"rYG2u6"}),status:"success",duration:5e3}),h()}).catch(e=>{d({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),l(!1)}).finally(()=>{l(!1)})},[i,null==r?void 0:r.id,n,h,s,t,d]);return(0,a.jsxs)(a.Fragment,{children:[o&&(0,a.jsx)(c.k,{w:"100",h:"400px",maxH:"30vh",children:(0,a.jsx)(nE.AA,{})}),!o&&(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsx)(tE.K,{pt:2,pb:2,children:(0,a.jsxs)(e5.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:[(0,a.jsx)(x.cC,{id:"1osTfm",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc},components:{0:(0,a.jsx)("strong",{})}})," ",(0,a.jsxs)(rI.r,{href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",textDecoration:"underline",isExternal:!0,color:"trueblue.500",children:[(0,a.jsx)(x.cC,{id:"Px95UX"}),(0,a.jsx)(rB.h,{mx:"2px"})]})," "]})}),t&&t.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e5.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:(0,a.jsx)(x.cC,{id:"kjbPb3",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})}),null==t?void 0:t.map(e=>(0,a.jsx)(o9.Z,{onClick:()=>p(e.id),onKeyPress:t=>{"Enter"===t.key&&p(e.id)},...lN,children:(0,a.jsx)(o7.e,{children:(0,a.jsxs)(ej.U,{children:[(0,a.jsx)(tE.K,{spacing:0,children:(0,a.jsxs)(ej.U,{children:[e.faviconUrl&&(0,a.jsx)(nX.E,{w:"4",src:e.faviconUrl}),(0,a.jsx)(e5.x,{fontWeight:"600",children:e.name})]})}),(0,a.jsx)(e3.L,{}),(0,a.jsx)(D.G,{icon:O.eFW})]})})},e.id))]})]})]})},lU=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,nK.M)({id:"MoveToSiteDisclosure"}),{currentWorkspace:i}=(0,eX.SE)(),{data:r,loading:s}=(0,t$.bBo)({variables:{workspaceId:null==i?void 0:i.id},skip:!(null==i?void 0:i.id),fetchPolicy:"cache-first"}),o=null==r?void 0:r.sites;return s?(0,a.jsx)(tI.$,{size:"xs"}):o&&0===o.length?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ev.z,{variant:"plain",onClick:t,colorScheme:"trueblue",children:(0,a.jsx)(x.cC,{id:"hsMvVQ"})}),(0,a.jsxs)(rV.u_,{isOpen:e,onClose:n,size:"3xl",children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"i4b0iJ"})}),(0,a.jsx)(nb.o,{}),(0,a.jsx)(ny.f,{maxH:"80vh",overflowY:"auto",children:(0,a.jsx)(lM,{sites:o})}),(0,a.jsx)(nk.m,{children:(0,a.jsx)(ev.z,{mr:3,onClick:n,children:(0,a.jsx)(x.cC,{id:"yz7wBu"})})})]})]})]})},lF=e=>{let{onEnable:t,isLoading:n}=e;return(0,a.jsxs)(tE.K,{align:"center",justify:"center",spacing:4,flex:1,p:6,mt:8,bg:"gray.50",borderRadius:"md",children:[(0,a.jsx)(nX.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/9f0b4d71d10f4d388e50febe89bb1853/optimized/Sal-Chill-Cloud.svg",w:"200px"}),(0,a.jsx)(nQ.X,{fontFamily:"p22-mackinac-pro",fontWeight:"700",size:"md",textAlign:"center",css:{textWrap:"pretty"},children:(0,a.jsx)(x.cC,{id:"0864Ii",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})}),(0,a.jsx)(e5.x,{fontSize:"sm",children:(0,a.jsx)(x.cC,{id:"JOJtWL",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)("code",{})}})}),(0,a.jsxs)(tE.K,{w:"100%",children:[(0,a.jsx)(ev.z,{variant:"solid",onClick:t,isLoading:n,children:(0,a.jsx)(x.cC,{id:"oL6HHo"})}),(0,a.jsx)(lU,{})]}),(0,a.jsx)(ev.z,{as:rI.r,variant:"ghost",isExternal:!0,href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",rightIcon:(0,a.jsx)(D.G,{icon:O.gJF,size:"sm"}),children:(0,a.jsx)(x.cC,{id:"Px95UX"})})]})};var lW=n(28165),lH=n(38045),lq=n(25925);let lB=(0,lH.E)(d.xu),lV={initial:{opacity:0,translateY:-40},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:40},transition:{duration:.3}},lK=e=>{let{isLoading:t,onChange:n,isChecked:i,isDisabled:r,enabledText:s,disabledText:o}=e;return(0,a.jsxs)(c.k,{cursor:r?"not-allowed":"pointer",className:(0,u.cx)("gamma-switch-container",t&&"loading",i?"active":""),opacity:r?.6:1,children:[(0,a.jsx)(d.xu,{as:"label",className:"text",fontSize:"sm",justifyContent:"center",htmlFor:"gamma-checkbox",position:"relative",overflow:"hidden",children:(0,a.jsx)(lq.M,{initial:!1,children:t?(0,a.jsx)(lB,{as:"span",position:"absolute",...lV,children:(0,a.jsx)(tI.$,{size:"sm"})},"loading"):i?(0,a.jsx)(lB,{as:"span",position:"absolute",...lV,children:s},"checked"):(0,a.jsx)(lB,{as:"span",position:"absolute",...lV,children:o},"unchecked")})}),(0,a.jsxs)(d.xu,{as:"label",className:"switch",pointerEvents:r?"none":"auto",children:[(0,a.jsx)("input",{id:"gamma-checkbox",type:"checkbox",onChange:n,disabled:t||r}),(0,a.jsx)("span",{className:"slider round"})]})]})},lY=(0,lW.F4)({"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),lZ=(0,lW.F4)({"0%":{transform:"scale(1)",opacity:1},"15%":{transform:"scale(1)",opacity:1},"60%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),lJ=(0,lW.F4)({"0%":{transform:"scale(1)"},"30%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"70%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),lX=e=>{let{icon:t,showDisabled:n=!1,shouldPulse:i=!1,bg:r="gray.200",color:s="gray.800"}=e;return(0,a.jsx)(d.Cd,{color:s,textAlign:"center",bg:r,size:8,opacity:n?.5:1,position:"relative",animation:i?"".concat(lJ," 2.7s infinite"):"none",sx:{":before":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 3px #6910D166",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(lY," 2.7s infinite")}:{},":after":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 2px #6910D133",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(lZ," 2.7s infinite")}:{}},children:n?(0,a.jsxs)("span",{className:"fa-stack",children:[(0,a.jsx)(D.G,{icon:O.u6k,className:"fa-stack-1x"}),(0,a.jsx)(D.G,{icon:t,className:"fa-stack-1x"})]}):(0,a.jsx)(D.G,{size:"1x",icon:t})})},lQ=e=>{let{isLoading:t=!1,site:n,onChange:i,disabledText:r,doc:s}=e,o=(0,eR.Vr)(n),l=(0,i1.Lu)(),u=(0,eX.py)("manage",s),h=l||u,p=!!(t||r||!h),m=(0,eR.k2)(n),f=h?r||(t?(0,a.jsx)(x.cC,{id:"mkk40+"}):o?(0,a.jsx)(x.cC,{id:"f4CBNf"}):(0,a.jsx)(x.cC,{id:"5G4vd5"})):(0,a.jsx)(x.cC,{id:"Z2uNdQ"});return n?(0,a.jsxs)(ej.U,{w:"100%",justify:"space-between","data-testid":"toggle-website-settings",children:[(0,a.jsx)(d.xu,{children:(0,a.jsxs)(c.k,{alignItems:"center",children:[(0,a.jsx)(lX,{shouldPulse:m,bg:m?"#6910D1":"gray.200",color:m?"white":"gray.800",icon:m?O.cL$:O.g4A}),(0,a.jsxs)(d.xu,{ml:3,children:[(0,a.jsx)(ej.U,{children:(0,a.jsx)(e5.x,{children:m?(0,a.jsx)(x.cC,{id:"MuDTSp"}):o?(0,a.jsx)(x.cC,{id:"AAm5jh"}):(0,a.jsx)(x.cC,{id:"HzFHhy"})})}),(0,a.jsx)(c.k,{align:"center",children:(0,a.jsx)(ej.U,{spacing:1,align:"center",children:(0,a.jsx)(e5.x,{fontSize:"xs",color:"gray.500",css:{textWrap:"balance"},children:n&&m?(0,a.jsx)(rM,{site:n}):o?(0,a.jsx)(x.cC,{id:"N4VTXP"}):(0,a.jsx)(x.cC,{id:"1bmqGL"})})})})]})]})}),(0,a.jsx)(d.xu,{children:(0,a.jsx)(eb.kH,{label:f,placement:"top",shouldWrapChildren:!0,children:(0,a.jsx)(lK,{isChecked:o,isDisabled:p,isLoading:t,onChange:i})})})]}):null},l$=e=>{var t,n;let{doc:i,isOpen:r,onOpen:s,onPublishSettingsClose:o}=e,l=(0,iL.p)(),d=(0,F.TL)(),u=(0,F.CG)(e_.lH),h=(0,F.CG)(e_.$U),{editor:p}=(0,tw._i)(),{currentWorkspace:m}=(0,eX.SE)(),[f,j]=(0,g.useState)(!1),[v]=(0,t$.V$$)(),[C]=(0,t$.cxO)(),[b]=(0,t$.A0Z)(),[y]=(0,t$.UoQ)(),[k,w]=(0,g.useState)("domains"),S=i.id,E=i.title,I=null==m?void 0:m.id,A=null==i?void 0:null===(t=i.theme)||void 0===t?void 0:t.id,T=!1==!!i.site?null:(null===(n=i.site)||void 0===n?void 0:n.enabled)?"enabled":"disabled",_=(null==u?void 0:u.archived)?(0,a.jsx)(x.cC,{id:"VAyYv6"}):null,{query:O}=(0,ey.useRouter)();(0,iH.i)("showDomains"),(0,g.useEffect)(()=>{let e=oJ.T.on("openSiteSettings",e=>{w(e),s()});return()=>{e()}},[s]),(0,g.useEffect)(()=>{"true"===O.showDomains&&oJ.T.emit("openSiteSettings","domains")},[]);let D=(0,g.useCallback)(async()=>{if(I){j(!0),y({variables:{id:S,themeId:null}});try{await v({variables:{input:{workspaceId:I,name:E,themeId:A,routes:[{docId:S,path:"/"}]}},refetchQueries:["GetDoc"]}).then(e=>{let{data:t}=e;(0,e_.zs)(d)({site:null==t?void 0:t.createSite,docId:S})})}catch(e){console.error("[WebsiteSettingsModal] Failed to create site",e.message),l({title:(0,a.jsx)(x.cC,{id:"Pdboh4"}),description:(0,a.jsx)(x.cC,{id:"8wxFbh"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[v,d,S,E,A,l,y,I]),R=(0,g.useCallback)(async()=>{if(h){j(!0);try{await C({variables:{id:h},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:t$.yE1,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.disableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to deactivate site",e.message),l({title:(0,a.jsx)(x.cC,{id:"ksq4sM"}),description:(0,a.jsx)(x.cC,{id:"VE0YVl"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[C,S,h,l]),P=(0,g.useCallback)(async()=>{if(h){j(!0);try{await b({variables:{id:h},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:t$.yE1,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.enableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to re-activate site",e.message),l({title:(0,a.jsx)(x.cC,{id:"aQnYTJ"}),description:(0,a.jsx)(x.cC,{id:"E2sPQM"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[S,b,h,l]),L=(0,g.useCallback)(()=>{null===T?D():"enabled"===T?R():"disabled"===T&&P()},[D,R,P,T]);return(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsx)(nj.d,{isOpen:r,onClose:o,size:"md",trapFocus:!1,blockScrollOnMount:!1,children:(0,a.jsxs)(nC.s,{p:0,shadow:"xl",children:[(0,a.jsxs)(rY.x,{children:[(0,a.jsx)(x.cC,{id:"WtsmDd"})," ",(0,a.jsx)(oL.C,{colorScheme:"green",ml:2,fontSize:"sm",letterSpacing:"normal",children:(0,a.jsx)(x.cC,{id:"YBt9YP"})})]}),(0,a.jsx)(nb.o,{}),(0,a.jsxs)(ny.f,{children:[(0,a.jsxs)(e2.g,{spacing:4,align:"stretch",children:[(0,a.jsx)(lQ,{isLoading:f,site:u,doc:i,onChange:L,disabledText:_}),!!u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rF,{context:"settings"}),(0,a.jsx)(sn.i,{}),"disabled"===T&&(0,a.jsxs)(ip.b,{status:"warning",mb:6,children:[(0,a.jsx)(sa.z,{}),(0,a.jsx)(x.cC,{id:"CHu+l0"})]}),(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(lL,{selectedPanel:k,setSelectedPanel:w}),"website"===k?(0,a.jsx)(lO,{showHeadings:!1,doc:i}):"domains"===k?(0,a.jsx)(lk,{showHeadings:!1}):"code"===k?(0,a.jsx)(lP,{editor:p}):null]})]})]}),!u&&(0,a.jsx)(lF,{onEnable:L,isLoading:f})]})]})})})},l0=e=>{let{doc:t,label:n=(0,a.jsx)(x.cC,{id:"sAalO9"}),showUpsellBadge:i}=e,{isOpen:r,onClose:s,onOpen:o}=(0,nK.M)({id:"PublishSettingsDisclosure"}),{openUpsellModal:l}=(0,so.z)(),c=(0,g.useCallback)(()=>l({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SITE_ADD_CUSTOM_DOMAIN}),[l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.g4A,fixedWidth:!0}),onClick:i?c:o,children:(0,a.jsxs)(ej.U,{justifyContent:"space-between",alignItems:"center",children:[n,i&&(0,a.jsx)(d.xu,{children:(0,a.jsx)(o5.ER,{})})]})}),t&&(0,a.jsx)(l$,{isOpen:r,onOpen:o,doc:t,onPublishSettingsClose:s})]})};var l1=n(2969),l2=n(73582),l5=n(36371),l3=n(32099),l4=n(90935),l6=n(65050);let l8=(e,t)=>{let n=[],i=e=>{if(t(e)&&n.push(e),e.content)for(let t of e.content)i(t)};return i(e),n},l9=()=>({today:p.ag._({id:"ecUA8p"}),thisWeek:p.ag._({id:"yByRxz"}),earlier:p.ag._({id:"HGg4T/"})}),l7=()=>(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(sr.O,{w:"max(350px, 30%)",h:10}),(0,a.jsx)(sr.O,{w:"max(320px, 22%)",h:5})]}),ae=e=>{let{createdTime:t,editors:n,isLatest:i,onClick:r,showPaywall:s,paywallCount:o}=e;if(!n||!n.length)return(0,a.jsx)(a.Fragment,{});let l=s?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",u=(0,a.jsxs)(l1.O,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:l,maskImage:l},border:"none",isDisabled:s,opacity:"1 !important",onClick:r,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,a.jsxs)(c.k,{w:"100%",direction:"column",children:[(0,a.jsx)(e5.x,{fontSize:"sm",children:n6()((0,n5.P9)(t))}),(0,a.jsx)(e5.x,{fontSize:"xs",flex:1,children:n[0].displayName})]}),i&&(0,a.jsx)(oL.C,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,a.jsx)(x.cC,{id:"wL3cK8"})})]});return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eb.kH,{placement:"top",isDisabled:!s,label:s?(0,a.jsx)(x.cC,{id:"PYTBm5",values:{paywallCount:o}}):void 0,children:(0,a.jsx)(d.xu,{mb:4,children:u})}),(0,a.jsx)(ss.m,{isNarrow:!0,segmentEvent:eM.AA.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,a.jsx)(x.cC,{id:"mVKYtH"})})]}):u},at=e=>{var t;let n=[];return{groupedSnapshots:(0,g.useMemo)(()=>(0,n5.yd)({items:e,sortBy:"createdTime"}),[e]),paywalledSnapshotId:null===(t=n[0])||void 0===t?void 0:t.id,paywallCount:n.length}},an=e=>{let{groupedSnapshots:t,paywalledSnapshotId:n,paywallCount:i,onClick:r,showFetchMore:s,onFetchMoreClick:o,isFetchingMore:l}=e;return(0,a.jsxs)(l2.t,{w:"100%",children:[Object.entries(t).filter(e=>{let[,t]=e;return t.length}).map((e,t)=>{let[s,o]=e;return(0,a.jsxs)(g.Fragment,{children:[(0,a.jsx)(eb.NZ,{px:4,py:2,mx:0,mt:2,children:l9()[s]}),o.map((e,s)=>{let{createdTime:o,editors:l,id:c}=e;return(0,a.jsx)(ae,{onClick:()=>r(c),isLatest:0===t&&0===s,createdTime:o,editors:l,showPaywall:n===c,paywallCount:i},c)})]},s)}),s&&(0,a.jsx)(ev.z,{isLoading:l,onClick:o,children:(0,a.jsx)(x.cC,{id:"yQ2kGp"})})]})},ai=()=>(0,a.jsxs)(l2.t,{w:"100%",children:[(0,a.jsx)(sr.O,{h:16}),(0,a.jsx)(sr.O,{h:16,mt:2}),(0,a.jsx)(sr.O,{h:16,mt:2}),(0,a.jsx)(sr.O,{h:16,mt:2}),(0,a.jsx)(sr.O,{h:16,mt:2}),(0,a.jsx)(sr.O,{h:16,mt:2}),(0,a.jsx)(sr.O,{h:16,mt:2}),(0,a.jsx)(sr.O,{h:16,mt:2})]}),ar=e=>{let{title:t,createdBy:n,createdTime:i,numSnapshots:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e5.x,{mt:1,children:(0,a.jsx)(x.cC,{id:"yf//Op",values:{numSnapshots:r,0:(0,rN.Dw)(i),1:(0,rN.Dw)(i)}})}),(0,a.jsx)(e5.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,a.jsx)(x.cC,{id:"JVHTIo",values:{title:t,0:(null==n?void 0:n.displayName)?null==n?void 0:n.displayName:"Unknown",1:(0,rN.p6)(i,"PPp")}})})]})},as="snapshot-editor-root",ao=e=>{let{id:t,doc:n,content:i}=e,r=(0,g.useMemo)(()=>{if(i)return l8(i,e=>e.type===l6.W4).map(e=>{var t;return{__typename:"Card",id:(null===(t=e.attrs)||void 0===t?void 0:t.id)||"",docId:n.id,title:(0,l3.getCardTitle)(e),createdTime:n.createdTime,updatedTime:n.updatedTime,archived:!1}})},[i,n]);return(0,a.jsx)(eP.fb,{reduxData:{cards:r},initialContent:i,doc:n,docId:n.id,scrollingParentSelector:".".concat(as),isInsideDrawer:!0},t)},al=e=>{var t;let{isOpen:n,onClose:i,doc:r}=e,s=(0,iL.p)(),{getCollaborativeEditorInstance:o}=(0,tw._i)(),[l,u]=(0,g.useState)(!1),[h,{data:p}]=(0,t$.e8E)();(0,tg.vm)(()=>{h({variables:{id:r.id}})},[r.id,h,n],[n]);let m=null==p?void 0:null===(t=p.doc)||void 0===t?void 0:t.currentSnapshotId,{loading:f,data:j,called:v,fetchMore:C}=(0,t$.pfN)({variables:{docId:r.id,first:25},skip:!r||!n,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),[b,{loading:y,data:k}]=(0,t$.opq)({nextFetchPolicy:"cache-only"}),w=(null==j?void 0:j.snapshots.edges.map(e=>e.node))||[],{groupedSnapshots:S,paywalledSnapshotId:E,paywallCount:I}=at(w),A=null==j?void 0:j.snapshots.pageInfo,T=!!(!E&&v&&(null==A?void 0:A.hasNextPage)&&(null==A?void 0:A.endCursor)),_=(0,g.useCallback)(()=>{(null==A?void 0:A.hasNextPage)&&(null==A?void 0:A.endCursor)&&(u(!0),C({variables:{after:A.endCursor}}).finally(()=>{u(!1)}))},[C,null==A?void 0:A.endCursor,null==A?void 0:A.hasNextPage]),O=w[0];(0,g.useEffect)(()=>{(null==O?void 0:O.id)&&b({variables:{snapshotId:O.id,docId:r.id}})},[r.id,b,null==O?void 0:O.id]);let D=(0,oK.$)(null==r?void 0:r.title),R="createdBy"in r?r.createdBy:void 0,P=null==r?void 0:r.createdTime,L=null==k?void 0:k.snapshot,z=L&&L.id===m,G=(0,tz.S)(l4._o);return(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsxs)(nj.d,{placement:"bottom",onClose:i,isOpen:n,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(nC.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,a.jsx)(nb.o,{}),(0,a.jsxs)(rY.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[f&&(0,a.jsx)(l7,{}),!f&&r&&w&&(0,a.jsx)(ar,{numSnapshots:(null==w?void 0:w.length)||0,createdBy:R,createdTime:P,title:D})]}),(0,a.jsx)(ny.f,{p:0,h:"100%",children:(0,a.jsxs)(c.k,{direction:"row",h:"100%",children:[(0,a.jsx)(d.xu,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,a.jsxs)(l5.m,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[f&&(0,a.jsx)(ai,{}),!f&&w&&(0,a.jsx)(an,{onClick:e=>{b({variables:{snapshotId:e,docId:r.id}})},groupedSnapshots:S,paywalledSnapshotId:E,paywallCount:I,showFetchMore:T,onFetchMoreClick:_,isFetchingMore:l})]})}),(0,a.jsx)(c.k,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:as,css:{"--editor-width":"100%","--editor-font-size":G},children:(0,a.jsxs)(c.k,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,a.jsx)(nR.Y,{}),(!L||y)&&(0,a.jsx)(nE.AA,{}),L&&!y&&(0,a.jsx)(ao,{id:L.id,doc:r,content:null==L?void 0:L.content.default})]})})]})}),(0,a.jsx)(nk.m,{borderTop:"1px solid #000",borderColor:"gray.200",bg:"var(--drawer-bg)",zIndex:1,children:(0,a.jsxs)(eC.h,{spacing:4,children:[(0,a.jsx)(ev.z,{variant:"ghost",onClick:i,children:(0,a.jsx)(x.cC,{id:"dEgA5A"})}),(0,a.jsx)(eb.kH,{label:z?(0,a.jsx)(x.cC,{id:"HJo72u"}):(0,a.jsx)(x.cC,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,a.jsx)(ev.z,{variant:"solid",isDisabled:!L||z,onClick:()=>{var e;if(!L)return;let t=null==w?void 0:null===(e=w.find(e=>e.id===L.id))||void 0===e?void 0:e.createdTime,n=o();if(!n)return;n.commands.setContent(L.content.default,!0);let{annotationsAbsolute:r}=L.content;r?n.commands.restoreAnnotations(r):n.commands.clearAnnotations(),i(),s({title:(0,a.jsx)(x.cC,{id:"7ovf4C"}),description:(0,a.jsx)(x.cC,{id:"DTim6X",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc,0:t?(0,rN.p6)(t,"PPp"):"selected snapshot"}}),status:"success",duration:5e3,isClosable:!0})},children:(0,a.jsx)(x.cC,{id:"yKu/3Y"})})})]})})]})]})})},aa=e=>{let{doc:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,nK.M)({id:"snapshotsDrawer"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.SZw,fixedWidth:!0}),onClick:r,children:(0,a.jsx)(x.cC,{id:"6Z5x06"})}),t&&(0,a.jsx)(al,{doc:t,isOpen:n,onClose:i})]})},ac=()=>{let e=ix();return e?(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.Fzb,fixedWidth:!0}),as:rI.r,textDecoration:"none !important",href:e,target:(0,ek.Q5)()?"_self":"_blank",children:(0,a.jsx)(x.cC,{id:"7U0bM7"})}):null},ad=()=>(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.q2v,fixedWidth:!0}),onClick:()=>nJ.pw.emit(nJ.TI.OPEN_THEME_DRAWER,{}),children:(0,a.jsx)(x.cC,{id:"90/Rx7"})}),au=e=>{let{editor:t}=e,n=(0,g.useCallback)(()=>{t&&t.commands.undo()},[t]);return(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.paY,fixedWidth:!0}),onClick:n,command:(0,eb.cE)("Mod+Z"),children:(0,a.jsx)(x.cC,{id:"9uI/rE"})})},ah=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e,{isConnected:s,isInOfflineMode:o}=(0,C.$)(),l=(0,y.ye)("editDocAI"),{user:c}=(0,eX.SE)(),u=(0,eX.py)("view",t),h=(0,eX.py)("comment",t),p=(0,eX.py)("edit",t),m=(0,eX.py)("manage",t),f=(0,F.CG)(e_.lH),g=(0,i1.lP)(),j=(0,F.CG)(W.gh)===eK.q.SLIDE_VIEW,{editor:v}=(0,e0._)(),b=(0,F.CG)(W.hN),k=!!l||!m,w=!!c&&k&&!t.site,S=!!l&&h,E=!!(c&&0!==c.workspaceMemberships.length&&!t.site),I=(0,y.ye)("docCustomCode")&&p,A=p&&v;if(!s){let e=A&&o&&!f,i=b&&o&&!f,r=S&&o&&!f,s=i||e||r;return(0,a.jsx)(ax,{children:(0,a.jsxs)(rq.k,{children:[f?(0,a.jsx)(d.xu,{pt:2,children:(0,a.jsx)(o2,{site:f})}):(0,a.jsx)(oY,{doc:t}),s&&(0,a.jsx)(ne.R,{}),i&&(0,a.jsx)(au,{editor:v}),e&&(0,a.jsx)(o1,{}),r&&(0,a.jsx)(oP,{toggleCommentsPanel:n})]})})}let T=t.site?(0,a.jsx)(x.cC,{id:"gKmuNS"}):void 0;return(0,a.jsxs)(t8.q,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,a.jsxs)(rq.k,{children:[f?(0,a.jsx)(o$,{doc:t,site:f}):(0,a.jsx)(oY,{doc:t}),(0,a.jsx)(ne.R,{}),b&&(0,a.jsx)(au,{editor:v}),p&&(0,a.jsx)(aa,{doc:t}),t.site&&(0,a.jsx)(st,{editorWrapperEl:i,scrollingParentSelector:r}),(0,a.jsx)(ac,{}),g&&!j&&(0,a.jsx)(ad,{}),A&&(0,a.jsx)(o1,{}),u&&!!c&&(0,a.jsx)(oX,{}),I&&(0,a.jsx)(oH,{editor:v})]}),f?(0,a.jsx)(ne.R,{}):null,(0,a.jsxs)(rq.k,{children:[f&&(0,a.jsx)(o2,{site:f}),f?null:(0,a.jsx)(ne.R,{}),S&&(0,a.jsx)(oP,{toggleCommentsPanel:n}),w&&(0,a.jsx)(oR,{doc:t,mode:m?"full":"personal"}),m&&(0,a.jsx)(l0,{doc:t,label:T}),E&&(0,a.jsx)(oZ,{doc:t,editor:v}),m&&(0,a.jsx)(rJ,{site:f}),!t.site&&m?(0,a.jsx)(oq,{doc:t}):null]})]})},ax=e=>{let{children:t}=e;return(0,a.jsxs)(t8.q,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,a.jsx)(X.V,{description:(0,a.jsx)(x.cC,{id:"0CAvhs"}),isConnected:!1,maxWidth:"300px"}),t]})};var ap=n(82729);let am=e=>{let{length:t,idealLength:n,maxLength:i}=e;return(0,a.jsxs)(e5.x,{fontSize:"xs",color:t>=i?"red.400":"gray.500",children:[t>=i&&(0,a.jsx)(D.G,{icon:e4.e7M})," ",t,"/",n]})};var af=n(40914),ag=n(92768),aj=n(37733);let av=(e,t)=>{var n;return null==e?void 0:null===(n=e.routes.find(e=>e.docId===t))||void 0===n?void 0:n.path},aC=e=>{let{openOtherDocModal:t}=e,n=(0,eg.ff)("gray.200","gray.600"),i=(0,iL.p)(),[r,s]=(0,g.useState)(!1),o=(0,o6._O)(),l=(0,F.CG)(tV.yx),c=(0,F.CG)(e_.lH),[u,{loading:h}]=(0,t$.qbt)(),p=av(c,null==l?void 0:l.id),[m,f]=(0,g.useState)(()=>(0,eR.es)(p||"")),[j,v]=(0,g.useState)(()=>(0,eR.es)(p||"")),C=(0,eR.gT)({routes:(null==c?void 0:c.routes)||[],path:(0,eR.fJ)(m),docId:null==l?void 0:l.id}),b=!!C,y=j!==m&&!b,k=(0,g.useCallback)(()=>{f(j)},[j]),w=(0,g.useCallback)(()=>{if(!y)return;if(!(null==c?void 0:c.id)||!(null==l?void 0:l.id)){console.error("Missing site or doc");return}let e=(0,eR.Is)(m);u({variables:{input:{siteId:c.id,docId:l.id,path:e}},refetchQueries:["GetSite"]}).then(()=>{v((0,eR.es)(e)),f((0,eR.es)(e)),s(!0)}).catch(e=>{i({status:"error",title:(0,a.jsx)(x.cC,{id:"dl5vwx"}),description:e.message}),console.error("[UrlSlugForm] Error setting route",e.message)})},[y,null==l?void 0:l.id,m,u,null==c?void 0:c.id,i]);return o?(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(tE.K,{direction:"row",children:(0,a.jsxs)(e5.x,{children:[(0,a.jsx)(x.cC,{id:"dq8+qI"})," "]})}),(0,a.jsx)(e3.L,{}),(0,a.jsx)(tE.K,{spacing:2,children:(0,a.jsx)(ej.U,{spacing:1,children:(0,a.jsxs)(oz.NI,{as:"fieldset",isInvalid:b,children:[(0,a.jsx)(ej.U,{children:(0,a.jsxs)(ib.B,{children:[(0,a.jsx)(ag.Ui,{children:"/"}),(0,a.jsx)(o4.I,{isDisabled:h,flex:2,value:m,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w())},onChange:e=>{f((0,li.IR)(e.currentTarget.value))},borderColor:n}),(0,a.jsx)(aj.R,{in:y,unmountOnExit:!0,children:(0,a.jsx)(d.xu,{ml:2,children:(0,a.jsxs)(eC.h,{w:"100%",children:[(0,a.jsx)(ev.z,{variant:"solid",isLoading:h,isDisabled:b,onClick:w,children:(0,a.jsx)(x.cC,{id:"tfDRzk"})}),(0,a.jsx)(ev.z,{onClick:k,children:(0,a.jsx)(x.cC,{id:"dEgA5A"})})]})})})]})}),C?(0,a.jsx)(oN.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,a.jsx)(e5.x,{fontSize:"xs",children:(0,a.jsx)(x.cC,{id:"DQaTdC",components:{0:(0,a.jsx)(rI.r,{textDecoration:"underline",onClick:()=>t&&t(C.docId)})}})})}):(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(oz.Q6,{fontSize:"sm",children:(0,a.jsx)(x.cC,{id:"ZMlbHK"})}),r&&(0,a.jsxs)(ip.b,{status:"warning",variant:"left-accent",fontSize:"sm",children:[(0,a.jsx)(sa.z,{}),(0,a.jsx)(ig.X,{children:(0,a.jsx)(x.cC,{id:"ZyBxCy"})})]})]})]})})})]}):(0,a.jsx)(a.Fragment,{})},ab=e=>{var t;let{inModal:n=!1,openOtherDocModal:i}=e,{editor:r}=(0,e0._)(),{isInOfflineMode:s}=(0,C.$)(),o=(0,g.useCallback)((e,t)=>{null==r||r.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[r]),{metaDescription:l}=(0,F.CG)(W.B_),c=(0,F.CG)(W.yx),d=(0,F.CG)((0,af.cn)(null==c?void 0:c.id)),u=(0,F.CG)(af.$4),[h,m]=(0,g.useState)(()=>(null==c?void 0:c.title)||""),[f,j]=(0,g.useState)(()=>l||""),v=c&&!!c.site&&(0,eR.Vr)(c.site),[b]=(0,t$.D1_)(),y=(0,g.useCallback)(e=>{c&&b({variables:{id:c.id,title:e,titleEdited:!0}})},[c,b]),k=(0,tg.Kt)(y,300),S=(0,g.useCallback)(e=>{m(e.target.value.substring(0,lC.S8)),k(e.target.value.substring(0,lC.S8))},[k]),E=(0,g.useCallback)(e=>{o("metaDescription",e)},[o]),I=(0,tg.Kt)(E,300),A=null==c?void 0:null===(t=c.titleCard)||void 0===t?void 0:t.previewUrl,T=(0,J.dU)(null==c?void 0:c.organization),_=(0,w.U)(h||d,T),O=(0,w.V)(f||u,T),D=(0,eg.ff)("gray.200","gray.600");return(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(oz.NI,{children:[(0,a.jsxs)(ej.U,{justifyContent:"center",children:[(0,a.jsx)(oG.l,{flex:"1",children:(0,a.jsx)(x.cC,{id:"MHrjPM"})}),(0,a.jsx)(am,{length:h.length||0,idealLength:lC.si,maxLength:lC.S8})]}),(0,a.jsx)(o4.I,{value:h,placeholder:d||p.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&y(h)},onChange:S,isDisabled:s,"data-title-input":!0,borderColor:D})]}),(null==c?void 0:c.site)&&(0,a.jsx)(aC,{openOtherDocModal:i}),(0,a.jsxs)(oz.NI,{children:[(0,a.jsxs)(ej.U,{justifyContent:"center",children:[(0,a.jsx)(oG.l,{flex:"1",pt:0,children:(0,a.jsx)(x.cC,{id:"Nu4oKW"})}),(0,a.jsx)(am,{length:f.length||0,idealLength:lC.cl,maxLength:lC.Us})]}),(0,a.jsx)(iy.g,{rows:n?2:4,value:f,placeholder:(null==u?void 0:u.trim())||p.ag._({id:"2VBqT4"}),onChange:e=>{j(e.target.value.substring(0,lC.Us)),I(e.target.value.substring(0,lC.Us))},borderColor:D})]}),(0,a.jsx)(ay,{previewTitle:_,previewDescription:O,screenshotUrl:A,isInOfflineMode:s,isSiteOn:v,inModal:n}),!s&&(0,a.jsx)(lI.V,{label:(0,a.jsx)(x.cC,{id:"SDyz5I"}),segmentEvent:tx.AA.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:c})]})},ay=e=>{let{previewTitle:t,previewDescription:n,screenshotUrl:i,isInOfflineMode:r,isSiteOn:s,inModal:o}=e,l=(0,ec.Yy)();return(0,a.jsxs)(tE.K,{p:4,pt:3,bg:l?"gray.800":"gray.100",borderRadius:"md",direction:o?"row":"column",spacing:3,children:[(0,a.jsxs)(tE.K,{spacing:2,flex:1,children:[(0,a.jsx)(e5.x,{size:"sm",children:(0,a.jsx)(x.cC,{id:"h8sMnd"})}),(0,a.jsx)(ak,{title:t,description:n,screenshotUrl:i,isOffline:r})]}),s&&(0,a.jsxs)(tE.K,{spacing:2,flex:1,pl:o?3:void 0,pt:o?void 0:3,borderLeft:o?"1px solid":void 0,borderTop:o?void 0:"1px solid",borderColor:l?"gray.700":"gray.200",children:[(0,a.jsx)(e5.x,{size:"sm",children:(0,a.jsx)(x.cC,{id:"d3xOlk"})}),(0,a.jsx)(aw,{title:t,description:n,screenshotUrl:i,isOffline:r}),(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(x.cC,{id:"Ubf8D8"})})]})]})},ak=e=>{let{title:t,description:n,screenshotUrl:i,isOffline:r}=e,s=(0,ec.Yy)();return(0,a.jsxs)(d.xu,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:s?"gray.700":"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,a.jsx)(ap.o,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,a.jsx)(d.xu,{bgColor:"gray.200",bgImage:"url(".concat(i,")"),backgroundSize:"cover",position:"relative",children:r&&(0,a.jsx)(D.G,{icon:O.bKP,size:"lg"})})}),(0,a.jsxs)(tE.K,{px:4,py:3,spacing:1,children:[(0,a.jsx)(e5.x,{color:"gray.800",fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,a.jsx)(e5.x,{color:"gray.800",fontSize:"xs",noOfLines:2,children:n})]})]})},aw=e=>{let{title:t,description:n}=e;return(0,a.jsxs)(tE.K,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,a.jsx)(e5.x,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,a.jsx)(e5.x,{color:"gray.700",fontSize:"sm",noOfLines:3,children:n})]})},aS=e=>{let{onPageMetadataModalClose:t,isPageMetadataModalOpen:n,openOtherDocModal:i}=e,r=(0,ec.Yy)();return(0,a.jsx)(eb.Wk,{isDark:r,children:(0,a.jsxs)(rV.u_,{onEsc:t,isOpen:n,onClose:t,size:"3xl",returnFocusOnClose:!1,children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{color:r?"white":"gray.800",bg:r?"gray.900":"white",mx:2,borderColor:r?"gray.700":"gray.200",children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"aBZSpm"})}),(0,a.jsx)(nb.o,{"data-share-panel-close-button":!0,onClick:e=>{e.preventDefault(),t()}}),(0,a.jsx)(sn.i,{}),(0,a.jsx)(ny.f,{children:(0,a.jsx)(ab,{inModal:!0,openOtherDocModal:i})}),(0,a.jsx)(sn.i,{}),(0,a.jsx)(nk.m,{children:(0,a.jsx)(ev.z,{onClick:e=>{e.preventDefault(),t()},variant:"solid",children:(0,a.jsx)(x.cC,{id:"DPfwMq"})})})]})]})})},aE=e=>{let{isDisabled:t,onClick:n,isPublishing:i}=e;return(0,a.jsx)(eb.kH,{placement:"top",label:(0,a.jsx)(x.cC,{id:"Bq2yPr"}),shouldWrapChildren:!0,isDisabled:!t,children:(0,a.jsx)(rW.s,{icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(D.G,{icon:O.PQh,fixedWidth:!0})}),onClick:n,closeOnSelect:!1,isDisabled:i||t,children:(0,a.jsxs)(c.k,{direction:"row",w:"100%",justify:"space-between",align:"center",children:[(0,a.jsx)(x.cC,{id:"jNnwuI"}),i&&(0,a.jsx)(tI.$,{size:"xs"})]})})})},aI=e=>{let{title:t,path:n}=e;return(0,a.jsxs)(a.Fragment,{children:[t?"".concat(t," "):"",n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lt.E,{as:"span",fontFamily:"mono",children:n})," "]})]})},aA=e=>{let{onClose:t,doc:n,site:i,path:r}=e,{push:s}=(0,ey.useRouter)(),[o,{loading:l}]=(0,t$.nRC)(),c=(0,iL.p)(),d=(0,F.CG)(e_.B$),u=(0,g.useCallback)(async()=>{if((null==n?void 0:n.id)&&i){if(await o({variables:{id:n.id},refetchQueries:["GetSite","GetDoc"]}),c({title:(0,a.jsx)(x.cC,{id:"oMgC5V"}),description:(0,a.jsx)(x.cC,{id:"gw6aHP",components:{0:(0,a.jsx)(aI,{title:null==n?void 0:n.title,path:r})}}),status:"success",duration:1e4,position:"top",isClosable:!0}),d===n.id){let e=(0,ew.hm)({site:i,docId:n.id});e&&await s(e)}t()}},[null==n?void 0:n.id,null==n?void 0:n.title,i,d,o,c,r,t,s]);return(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsxs)(rV.u_,{onClose:t,isOpen:!0,size:"xl",children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"kbKU/5"})}),(0,a.jsx)(nb.o,{isDisabled:l}),(0,a.jsx)(ny.f,{children:(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"YOtIqx",values:{0:null==n?void 0:n.title,1:r&&(0,a.jsx)(lt.E,{as:"span",fontFamily:"mono",colorScheme:"blackAlpha",children:r})}})}),(0,a.jsx)(e5.x,{color:"red.500",children:(0,a.jsx)(x.cC,{id:"2xOCJW"})})]})}),(0,a.jsx)(nk.m,{children:(0,a.jsxs)(eC.h,{children:[(0,a.jsx)(ev.z,{variant:"ghost",onClick:t,children:(0,a.jsx)(x.cC,{id:"dEgA5A"})}),(0,a.jsx)(ev.z,{variant:"hazardous",onClick:u,isLoading:l,children:(0,a.jsx)(x.cC,{id:"O1M1zi"})})]})})]})]})})},aT=e=>{var t;let{site:n,doc:i,path:r}=e,{isOpen:s,onOpen:o,onClose:l}=(0,S.q)({id:"confirm-remove-page-modal"}),c=(null==n?void 0:n.routes)&&(null==n?void 0:null===(t=n.routes)||void 0===t?void 0:t.length)>1;return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(aA,{site:n,doc:i,path:r,onClose:l}),(0,a.jsx)(eb.kH,{placement:"top",isDisabled:c,label:(0,a.jsx)(x.cC,{id:"PBFhJK"}),shouldWrapChildren:!0,children:(0,a.jsx)(rW.s,{color:"red.500",isDisabled:!c,icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(D.G,{icon:O.XAH,fixedWidth:!0})}),onClick:o,children:(0,a.jsx)(x.cC,{id:"cnGeoo"})})})]})},a_=e=>{let{site:t,doc:n,route:i,isTopToolbar:r=!1,hasChanges:s,onToggleOffline:o,...l}=e,c=(0,rH.b)(),{openPageSetup:u}=(0,t2.AA)(),{editor:h}=(0,e0._)(),{replace:p}=(0,ey.useRouter)(),{isConnected:m}=(0,t$.$gs)(),f=(null==n?void 0:n.id)&&(0,eR.Rh)({site:t,docId:n.id}),{publishDoc:j,isPublishing:v}=i5({doc:n,site:t,path:f}),C=(0,eR.Vr)(t),b=(0,F.CG)(W.yx),y=(0,eX.py)("edit",b),k=(0,eX.py)("edit",b),w=(0,eX.py)("manage",b),S=(0,i1.O1)(),E=(0,F.CG)(W.hN),I=(0,g.useCallback)(()=>{(null==n?void 0:n.id)&&c({path:"".concat((0,eR.Is)(i.path),"-copy"),siteId:t.id,routes:t.routes,sourceDocId:n.id})},[c,null==n?void 0:n.id,i.path,t.id,t.routes]),{isOpen:A,onClose:T,onOpen:_}=(0,nK.M)({id:"page-metadata-modal"});return m?(0,a.jsx)(rG.h,{children:n&&(0,a.jsxs)(t8.q,{...l,zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"380px",overflow:"auto",children:[(0,a.jsx)(o$,{doc:n,site:t,showCreatedInfo:!0}),(0,a.jsx)(ne.R,{}),k&&h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.Lc0,fixedWidth:!0}),onClick:()=>u(i.docId,_),children:(0,a.jsx)(x.cC,{id:"aBZSpm"})}),(0,a.jsx)(aS,{isPageMetadataModalOpen:A,onPageMetadataModalClose:T,openOtherDocModal:e=>u(e,_)})]}),k&&h&&(0,a.jsx)(o1,{onClick:()=>u(i.docId,()=>oJ.T.emit("openPageSetup","cards"))})," ",(0,a.jsx)(ne.R,{}),S&&!i.offline&&(s||v)&&(0,a.jsx)(aE,{onClick:j,isDisabled:!C,isPublishing:v}),(0,a.jsx)(rW.s,{icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(D.G,{icon:e4.sl_,fixedWidth:!0})}),onClick:()=>{p((0,ew.yQ)({docId:n.id,preview:!0}),void 0,{shallow:!0})},children:(0,a.jsx)(x.cC,{id:"rdUucN"})}),!!o&&(0,a.jsx)(rW.s,{onClick:o,icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(D.G,{icon:i.offline?O.gMD:O.uoY,fixedWidth:!0})}),children:i.offline?(0,a.jsx)(x.cC,{id:"i/zQgj"}):(0,a.jsx)(x.cC,{id:"ySCSAn"})}),(0,a.jsx)(ne.R,{}),k&&h&&(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.kZ_,fixedWidth:!0}),onClick:I,children:(0,a.jsx)(x.cC,{id:"IVskn1"})}),E&&r&&(0,a.jsx)(au,{editor:h}),y&&r&&(0,a.jsx)(aa,{doc:n}),w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ne.R,{}),(0,a.jsx)(aT,{site:t,doc:n,path:f})]})]})}):(0,a.jsx)(ax,{})},aO=e=>{if(!e)return{path:"untitled-page",title:p.ag._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:p.ag._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:p.ag._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},aD=e=>{let{site:t}=e,n=(0,rH.b)(),{isOpen:i,onClose:r,onOpen:s}=(0,nK.M)({id:"add-page-ai-modal"}),[o,l]=(0,g.useState)(!1),c=(0,g.useCallback)(()=>{s()},[s]),d=(0,g.useCallback)(()=>{let{path:e}=aO(null==t?void 0:t.routes);l(!0),n({path:(0,eR.Is)(e),siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes}).then(()=>{l(!1)})},[n,null==t?void 0:t.id,null==t?void 0:t.routes]);return(0,a.jsxs)(t4.v,{children:[(0,a.jsx)(eb.kH,{label:p.ag._({id:"yLRlZm"}),placement:"bottom",children:(0,a.jsx)(t6.j,{as:A.h,isRound:!0,size:"xs",isLoading:o,onFocus:e=>e.preventDefault(),"data-testid":"add-page",icon:(0,a.jsx)(D.G,{icon:O.r8p}),sx:{span:{flexGrow:0}}})}),(0,a.jsx)(rG.h,{children:(0,a.jsx)(t8.q,{maxW:"350px",zIndex:"tooltip",children:(0,a.jsxs)(rq.k,{title:p.ag._({id:"yLRlZm"}),children:[(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:e4.JyM,fixedWidth:!0}),onClick:c,children:(0,a.jsxs)(ej.U,{align:"flex-start",children:[(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"OppH33"})}),(0,a.jsx)(e5.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(x.cC,{id:"P/o+t+"})})]}),(0,a.jsx)(e3.L,{}),(0,a.jsx)(oL.C,{h:"fit-content",colorScheme:"trueblue",ml:2,children:(0,a.jsx)(x.cC,{id:"jsQZMk"})})]})}),(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.r8p,fixedWidth:!0}),onClick:d,children:(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"SSZKB9"})}),(0,a.jsx)(e5.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(x.cC,{id:"S65lUr"})})]})})]})})}),(0,a.jsx)(rn,{isOpen:i,onClose:r})]})},aR=e=>{if(!e)return{path:"untitled-page",title:p.ag._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:p.ag._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:p.ag._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},aP=e=>{let{isOpen:t,onClose:n,site:i}=e,r=(0,rH.b)(),[s,o]=(0,g.useState)(()=>aR(null==i?void 0:i.routes).title),[l,c]=(0,g.useState)(()=>aR(null==i?void 0:i.routes).path),d=(0,g.useRef)(null),[u,h]=(0,g.useState)(!1),m=((null==i?void 0:i.routes.map(e=>e.path))||[]).includes("/".concat(l)),f=(0,eg.ff)("gray.900","gray.50"),j=(0,g.useCallback)(()=>{u||m||(h(!0),r({title:s,path:(0,eR.Is)(l),siteId:null==i?void 0:i.id,routes:null==i?void 0:i.routes}).then(()=>{h(!1),n()}))},[r,m,u,n,l,null==i?void 0:i.id,null==i?void 0:i.routes,s]);return((0,g.useEffect)(()=>{t&&setTimeout(()=>{d.current&&d.current.select()},50)},[t]),i)?(0,a.jsxs)(rV.u_,{isOpen:t,onClose:n,size:"xl",children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{color:f,children:[(0,a.jsx)(rY.x,{children:(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"yLRlZm"})}),(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",fontWeight:"normal",letterSpacing:"normal",children:(0,a.jsx)(x.cC,{id:"7TUZvz"})})]})}),(0,a.jsx)(nb.o,{}),(0,a.jsx)(ny.f,{children:(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(oz.NI,{children:[(0,a.jsxs)(ej.U,{justifyContent:"center",children:[(0,a.jsx)(oG.l,{flex:"1",children:(0,a.jsx)(x.cC,{id:"MHrjPM"})}),(0,a.jsx)(am,{length:s.length||0,idealLength:lC.si,maxLength:lC.S8})]}),(0,a.jsx)(o4.I,{ref:d,value:s,onChange:e=>{o(e.target.value),c((0,li.IR)(e.target.value))},_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&j()}})]}),(0,a.jsxs)(oz.NI,{isInvalid:m,children:[(0,a.jsx)(ej.U,{justifyContent:"center",children:(0,a.jsx)(oG.l,{flex:"1",children:(0,a.jsx)(x.cC,{id:"dq8+qI"})})}),(0,a.jsxs)(ib.B,{children:[(0,a.jsx)(ag.Ui,{children:"/"}),(0,a.jsx)(o4.I,{fontFamily:"mono",value:l,onKeyDown:e=>{"Enter"===e.key&&j()},onChange:e=>{c((0,li.IR)(e.target.value))},placeholder:p.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"}})]}),m&&!u&&(0,a.jsx)(oN.J1,{children:(0,a.jsx)(x.cC,{id:"hw1fjn"})})]})]})}),(0,a.jsx)(nk.m,{children:(0,a.jsxs)(eC.h,{children:[(0,a.jsx)(ev.z,{colorScheme:"gray",variant:"ghost",onClick:n,children:(0,a.jsx)(x.cC,{id:"dEgA5A"})}),(0,a.jsx)(ev.z,{onClick:j,isDisabled:m,variant:"solid",isLoading:u,children:(0,a.jsx)(x.cC,{id:"yLRlZm"})})]})})]})]}):(0,a.jsx)(a.Fragment,{})},aL=e=>{let{site:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,S.q)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.xu,{bgColor:"gray.50",textAlign:"center",p:4,m:2,children:[(0,a.jsx)(e5.x,{fontSize:"sm",children:(0,a.jsx)(x.cC,{id:"6TCEnS"})}),(0,a.jsx)(e5.x,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,a.jsx)(rI.r,{color:"trueblue.600",href:"#",onClick:r,children:(0,a.jsx)(x.cC,{id:"S0WoXy"})})})]}),n&&(0,a.jsx)(aP,{isOpen:n,onClose:i,site:t})]})},az=e=>{let{icon:t,isSelected:n,children:i,href:r}=e,s=(0,g.useRef)(null),o=(0,eg.ff)("gray.600","gray.50"),l=(0,eg.ff)("trueblue.50","whiteAlpha.100"),c=(0,eg.ff)("gray.900","gray.50"),u=(0,eg.ff)("blackAlpha.50","whiteAlpha.100"),h=(0,eg.ff)("gray.600","gray.50"),x=(0,eg.ff)("trueblue.400","trueblue.200");(0,g.useEffect)(()=>{if(!n||!(null==s?void 0:s.current))return;let{inView:e}=(0,eq.v4)(s.current)||{};e||s.current.scrollIntoView()},[n]);let p=(0,g.useCallback)(e=>{e.target.closest('[data-id="sidebar-item-menu-button"]')&&e.preventDefault(),e.target.closest('[data-id="sidebar-item-menu-list"]')&&e.stopPropagation()},[]);return(0,a.jsx)(id(),{href:r,passHref:!0,shallow:!0,children:(0,a.jsx)(ev.z,{ref:s,onClick:p,variant:"ghost",justifyContent:"flex-start",fontWeight:"500",w:"100%",size:"sm",color:n?c:o,bgColor:n?l:"transparent",_hover:{bgColor:n?l:u,color:n?c:h},h:"auto",py:1.5,px:2,role:"group",children:(0,a.jsxs)(ej.U,{alignItems:"start",justify:"flex-start",w:"100%",spacing:2,children:[(0,a.jsx)(d.xu,{color:n?x:o,mt:"0.2em",w:4,children:t}),(0,a.jsx)(tE.K,{flex:1,direction:"row",minW:0,align:"start",justifyContent:"flex-start",children:i})]})})})},aG=e=>{let{title:t,children:n}=e;return(0,a.jsxs)(ej.U,{justify:"space-between",children:[(0,a.jsx)(e5.x,{fontSize:"sm",fontWeight:"600",px:1,py:1.5,color:"gray.500",children:t}),n&&n]})},aN=(e,t,n)=>n?(0,a.jsx)(tI.$,{size:"xs"}):e?(0,a.jsx)(D.G,{icon:O.t22,fixedWidth:!0}):t?(0,a.jsx)(D.G,{icon:O.BKg,fixedWidth:!0}):(0,a.jsx)(D.G,{icon:O.gMD,fixedWidth:!0}),aM=e=>{let{site:t,isSelected:n,doc:i,route:r,hasChanges:s,onToggleOffline:o}=e,l=(0,eg.ff)("trueblue.50","whiteAlpha.200"),c=(0,eg.ff)("trueblue.100","whiteAlpha.200");return(0,a.jsx)(t4.v,{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["right"]}}],children:e=>{let{isOpen:u}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t6.j,{"data-id":"sidebar-item-menu-button",ml:3,as:A.h,isRound:!0,variant:"ghost",py:2,size:"xs",_hover:{bgColor:n?c:l},icon:(0,a.jsx)(d.xu,{className:"ellipsis-icon",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1},_hover:{opacity:1},_active:{opacity:1},opacity:u?1:0,children:(0,a.jsx)(D.G,{icon:O.S6C,fixedWidth:!0})})}),(0,a.jsx)(rG.h,{children:(0,a.jsx)(a_,{site:t,doc:i,route:r,hasChanges:s,"data-id":"sidebar-item-menu-list",onToggleOffline:o})})]})}})},aU=e=>{var t;let{route:n,isHome:i,isSelected:r}=e,{docId:s,doc:o}=n,l=(0,tg.gF)(),d=(0,F.CG)(e_.lH),u=(0,F.CG)((0,e_.hZ)(s)),h=(0,g.useRef)(null),p=(0,F.CG)(e_.B$),[m,{loading:f}]=(0,t$.qbt)(),j=aN(i,u,f),v="currentColor",C=(0,eg.ff)("gray.500","gray.400"),b=(0,eg.ff)("trueblue.400","trueblue.200"),y=(0,g.useCallback)(async()=>{if(!(null==o?void 0:o.id)||!d)return;let e=!(null==n?void 0:n.offline);await m({variables:{input:{siteId:d.id,docId:o.id,offline:e,path:null==n?void 0:n.path}}})},[null==o?void 0:o.id,n,m,d]);(0,g.useEffect)(()=>{if(!h.current||p!==s)return;let{inView:e}=(0,eq.v4)(h.current)||{};e||h.current.scrollIntoView()},[p,s]);let k=(0,ew.yQ)({docId:s});return(0,a.jsxs)(az,{icon:j,"data-sidebar-doc":s,isSelected:r,href:k,children:[(0,a.jsxs)(tE.K,{flex:1,spacing:"3px",alignItems:"flex-start",justifyContent:"flex-start",w:"100%",minW:0,children:[(0,a.jsx)(e5.x,{textAlign:"left",color:r?b:v,noOfLines:2,maxW:"100%",whiteSpace:"normal",children:(0,oK.$)(null===(t=n.doc)||void 0===t?void 0:t.title)}),(0,a.jsxs)(ej.U,{color:C,children:[u&&!n.offline?(0,a.jsx)(eb.kH,{label:(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"cFW7WD"})}),(0,a.jsx)(e5.x,{fontSize:"xs",color:"whiteAlpha.700",children:(0,a.jsx)(x.cC,{id:"qliBJ3"})})]}),placement:"top",children:(0,a.jsx)(c.k,{bg:r?b:v,minW:1.5,minH:1.5,borderRadius:"full"})}):null,(0,a.jsx)(e5.x,{mt:"-1px",textAlign:"left",noOfLines:1,fontFamily:i?void 0:"mono",fontSize:"xs",whiteSpace:"normal",wordBreak:"break-all",dir:"ltr",children:i?(0,a.jsx)(x.cC,{id:"i0qMbr"}):n.path})]})]}),y&&l&&d&&(0,a.jsx)(aM,{site:d,doc:o,route:n,hasChanges:u,isSelected:r,onToggleOffline:y})]})},aF=()=>{let e=(0,F.CG)(e_.lH),{openSiteSettings:t}=(0,t2.AA)(),n=(0,F.CG)(e_.B$),{onlineRoutes:i,offlineRoutes:r}=(0,g.useMemo)(()=>{let t=((null==e?void 0:e.routes)?[...e.routes]:[]).sort(function(e,t){return e.path<t.path?-1:e.path>t.path?1:0}).sort((e,t)=>"/"===e.path?-1:"/"===t.path?1:0);return{onlineRoutes:t.filter(e=>!e.offline),offlineRoutes:t.filter(e=>e.offline)}},[null==e?void 0:e.routes]);return e?(0,a.jsxs)(tE.K,{spacing:2,w:"100%",p:0,children:[(0,a.jsx)(rF,{context:"pages",openSiteSettings:()=>t("website")}),(0,a.jsxs)(aG,{title:(0,a.jsx)(x.cC,{id:"wRR604"}),children:[(0,a.jsx)(e3.L,{}),(0,a.jsx)(aD,{site:e})]}),(0,a.jsxs)(tE.K,{spacing:1,px:0,children:[0===i.length&&(0,a.jsx)(aL,{site:e}),i.map(e=>{let t=e.docId===n;return(0,a.jsx)(aU,{route:e,isHome:"/"===e.path,isSelected:t},e.id)}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aG,{title:(0,a.jsx)(x.cC,{id:"1DdXjE"})}),r.map(e=>{let t=e.docId===n;return(0,a.jsx)(aU,{route:e,isHome:"/"===e.path,isSelected:t},e.id)})]})]})]}):(0,a.jsx)(a.Fragment,{})},aW=()=>{let e=(0,ec.Yy)();return(0,a.jsx)(eb.Wk,{isDark:e,children:(0,a.jsx)(e8.s,{bg:e?"gray.900":"white",borderRight:"1px solid",borderColor:e?"gray.800":"gray.200","data-panelid":"pages-panel",overflowX:"hidden",px:6,pt:4,children:(0,a.jsx)(aF,{})})})};aW.panelPosition="left",aW.panelName="pages";let aH=()=>{let{togglePanel:e,isPanelOpen:t}=ei(aW,(0,i1.O1)()),n=(0,j.v9)(W.gh),i=(0,F.CG)(e_.lH),{editor:r}=(0,tw._i)(),s=(0,F.CG)(eS.tv),o=!!(i&&!(null!==s)&&i.routes.length>1&&r);return(0,tg.vm)(()=>{o&&e({override:"open",disableTransition:!1})},[e,o],[o]),(0,g.useEffect)(()=>{n===eK.q.SLIDE_VIEW&&e({override:"closed",disableTransition:!0})},[n,e]),{togglePagesPanel:e,isPagesPanelOpen:t}};var aq=n(20816),aB=n(71508);let aV=[{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"}],aK={duration:400,easing:"ease-in-out"},aY=e=>{var t;let{docId:n}=e,{onClose:i}=(0,S.q)(),{onPasswordSubmitted:r}=(0,e0._)(),[s,o]=(0,g.useState)(!1),[l,d]=(0,g.useState)(""),[u,h]=(0,g.useState)(!1),[m,f]=(0,g.useState)(""),j=(0,g.useRef)(null),[v,{data:C}]=(0,t$.VEy)();(0,g.useEffect)(()=>{v({variables:{docId:n}})},[n,v]);let b=(0,g.useCallback)(()=>{u||null==r||r(l).then(e=>{var t;let[n]=e;(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.doc)?h(!0):(j.current&&j.current.animate(aV,aK),f(p.ag._({id:"jvNV6s",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})))})},[l,u,f,h,r]);return(0,a.jsxs)(rV.u_,{isOpen:!0,onClose:i,isCentered:!0,size:"xl",children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{ref:j,p:8,children:[(0,a.jsx)(rY.x,{children:(0,a.jsxs)(tE.K,{alignItems:"center",children:[(0,a.jsx)(sB.q,{src:(null==C?void 0:null===(t=C.publicDoc)||void 0===t?void 0:t.logoUrl)||aB.Z.src,size:"lg"}),(0,a.jsx)(nQ.X,{children:(0,a.jsx)(x.cC,{id:"GZ6qi2"})}),(0,a.jsx)(e5.x,{fontSize:"md",letterSpacing:"normal",fontWeight:"500",children:(0,a.jsx)(x.cC,{id:"rp/zfh"})})]})}),(0,a.jsx)(ny.f,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,a.jsx)(tE.K,{as:"form",spacing:4,onSubmit:e=>{e.preventDefault(),l.length&&b()},w:"100%",children:(0,a.jsxs)(oz.NI,{isInvalid:!!m,children:[(0,a.jsx)(oG.l,{children:(0,a.jsx)(x.cC,{id:"8ZsakT"})}),(0,a.jsxs)(ib.B,{children:[(0,a.jsx)(o4.I,{type:s?"text":"password",placeholder:"Enter the password",value:l,onChange:e=>{d(e.target.value)},borderColor:m?"red":"gray.200"}),(0,a.jsx)(aq.x,{children:(0,a.jsx)(A.h,{variant:"ghost",size:"sm",onClick:()=>o(!s),"aria-label":p.ag._({id:"tniYMG"}),icon:s?(0,a.jsx)(D.G,{icon:O.Aq}):(0,a.jsx)(D.G,{icon:O.Mdf}),_focus:{outline:"none"}})})]}),m&&(0,a.jsx)(oN.J1,{children:m}),!m&&(0,a.jsx)(oz.Q6,{color:"gray.600",children:(0,a.jsx)(x.cC,{id:"tSTf2H",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})})]})})}),(0,a.jsx)(nk.m,{flex:1,w:"100%",children:(0,a.jsx)(c.k,{flex:1,align:"center",justify:"center",textAlign:"center",children:(0,a.jsx)(ev.z,{w:"100%",variant:"solid",isDisabled:!l.length,onClick:b,children:(0,a.jsx)(x.cC,{id:"xGVfLh"})})})})]})]})},aZ=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=(0,F.TL)(),i=(0,eq.As)("editor"),r=et(),s=(0,F.CG)(W.yn,tt()),o=(0,F.CG)(W.k8,tt()),l=!!(null==o?void 0:o.pos);(0,g.useEffect)(()=>{if(!e)return;let t=eT()(()=>{s&&n((0,W.Qx)({attached:!1}))},500,{leading:!0}),i=(0,eV.B$)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),()=>{i(),t.cancel(),document.removeEventListener("wheel",t,!0)}},[e,n,s,l,t]);let a=(0,F.CG)(W.ks,tt());(0,g.useEffect)(()=>{if(!e||a)return;let t=eT()(()=>{if(i.inProgress)return;let t=(0,nc.lI)(e,100,r);if(!t){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}n((0,W.Us)(t))},250,{trailing:!0,maxWait:500}),s=eT()(()=>{if(e.state.selection instanceof r5.c)return;let t=document.querySelector(i.scrollSelector||""),r=null==t?void 0:t.getBoundingClientRect(),s=e.state.selection.from,o=(0,nc.Sh)(e,s);if(!t||!r||!o){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:o});return}let l=o.getBoundingClientRect(),a=parseFloat(((e.view.coordsAtPos(s).top-l.y)/l.height).toFixed(2));n((0,W.Us)({pos:s,pct:a}))},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",s),window.addEventListener("scroll",t,!0),()=>{e.off("selectionUpdate",s),window.removeEventListener("scroll",t,!0)}},[e,n,i,a,r])},aJ=()=>{let e=(0,iL.p)(),t=(0,F.TL)();return(0,g.useCallback)(n=>{let{collaborator:i,localIsFollowing:r,localIsAttached:s}=n,o={attached:!0};r?s?o.following=null:e.closeAll():(o.following=i.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(sB.q,{size:"sm",src:i.profileImageUrl,border:"solid 2px ".concat(i.color),color:sf()(i.color).isDark()?"white":"black",bg:i.color}),(0,a.jsx)(e5.x,{ml:2,children:(0,a.jsx)(x.cC,{id:"lULvWe",values:{0:i.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(i.name,". Setting following to ").concat(o)),t((0,W.Qx)(o))},[e,t])},aX=e=>{let{editor:t,collaborators:n,user:i}=e,r=(0,g.useRef)(!1),s=aJ(),o=new URLSearchParams(window.location.search),l=o.get("following_id"),a=o.get("follow_on_start");(0,g.useEffect)(()=>{if(r.current||!a||(null==i?void 0:i.id)===l||!t)return;let e=n.find(e=>e.id===l);e&&(s({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),r.current=!0)},[l,a,t,n,i,s])},aQ="sessionId1",a$=eF.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,F.bh)();return this.storage.user=rE()({},this.storage.user,e),t.dispatch((0,W.MU)({sessionId:aQ})),t.dispatch((0,W.Tx)({collaborators:[this.storage.user]})),!0}}}}),a0=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:s,theme:o,hideMadeWithGammaBadge:l=!1}=e,[u]=(0,g.useState)(()=>[tO.F,rD.$1.configure({scrollerSelector:r}),a$,rO._g]),{user:h,isUserLoading:x,anonymousUser:p,color:m}=(0,eX.SE)(),[f]=(0,H.I)(q.H.gammaDocPasswords,{}),[j,v]=(0,g.useState)(),{data:C,loading:b,error:y}=(0,t$.EDv)({variables:{docId:n,snapshotId:i,password:f[n]},skip:!i}),k=(0,F.CG)(tV.yx);(0,g.useEffect)(()=>{!x&&j&&j.commands.user({id:(null==h?void 0:h.id)||p.id,color:m.value,sessionId:aQ,idleSince:null,name:(null==h?void 0:h.displayName)||p.displayName||"",profileImageUrl:(null==h?void 0:h.profileImageUrl)||"",isReady:!x})},[j,h,m,x,p]);let w=C&&void 0!==C.snapshot&&!b&&k;return(0,a.jsxs)(d.xu,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!w||y?(0,a.jsxs)(c.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!w&&(0,a.jsx)(tI.$,{}),y&&(0,a.jsxs)(tS.M,{h:"100%",children:["There was an error loading this ",Z.Yc,":"," ",y.message]})]}):(0,a.jsx)(d.xu,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:w?1:0,children:(0,a.jsx)(eP.yE,{doc:k,editorId:"main",docId:n,theme:o||void 0,extensions:u,onCreate:e=>{let{editor:t}=e;v(t),setTimeout(()=>{s&&s(t)},10)},readOnly:!0,initialContent:null===(t=C.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),j&&(0,a.jsx)(eJ,{editor:j,backoffFactor:2}),!l&&(0,a.jsx)(rR.m,{docWorkspace:null==k?void 0:k.organization})]})},a1={[eK.q.DOC_VIEW]:"doc",[eK.q.SLIDE_VIEW]:"present"},a2=e=>{let t=(0,j.I0)(),n=(0,ew.SJ)().mode,i=(0,F.CG)(W.gh),r=(0,g.useCallback)(e=>{let t=e||i,{mode:n}=(0,ew.SJ)(),r=a1[t];n!==r&&(0,rv.lO)({query:{...(0,ew.SJ)(),mode:r},emitChange:!1})},[i]);(0,rQ.r)(r,[i]),(0,g.useEffect)(()=>rv.fI.on("changed",()=>r()),[r]),(0,tg.vm)(function(){if(!e)return;let i=n===a1.SLIDE_VIEW?eK.q.SLIDE_VIEW:eK.q.DOC_VIEW,{cardId:s}=(0,ew.sY)();i===eK.q.SLIDE_VIEW&&(s?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",s),e.commands.spotlightCardById(s)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),t((0,W.PM)({mode:i})),r(i)},[e,t,n,r],[e])};var a5=n(68015),a3=n.n(a5),a4=n(42634);let a6=(e,t)=>e.docChanged?(0,a4.Z)(e).flatMap(n=>{let i={from:n.newStart,to:n.newEnd};return function(e,t,n){let i=[];if(t.from===t.to){let n=e.nodeAt(t.from);n&&i.push({node:n,pos:t.from})}return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&i.push({node:e,pos:t})}),i}(e.doc,i,t)}):[];var a8=n(31335),a9=n(25412);let a7=nd.rU,ce="disable-card-size-animations",ct=e=>{let{editor:t}=e,n=(0,F.CG)(W.MK),i=(0,nr.n)(),r=(0,F.CG)(W.Pu),s=(0,g.useCallback)(e=>{var s,o;let{transaction:l}=e;if(!l.docChanged||l.getMeta("scaleContentToFit")||(0,a9.nq)(l))return;let a=null===(o=l.doc.content)||void 0===o?void 0:null===(s=o.content)||void 0===s?void 0:s[0].attrs.settings;if(!a)return;let c=a6(l,a8.KH),d=l.steps.some(e=>"settings"===e.attr&&a.scaleContentToFit&&"fluid"!==a.cardDimensions);console.log("[SCALE_CONTENT_TO_FIT]: doc settingsChanged",d);let u=function(e){let{docSettingsFromTransaction:t,zoomLevel:n,viewportScaleFactor:i,theme:r}=e,s=null==t?void 0:t.cardDimensions,o=s?h.tX[s]:16/9;if(o)return na({zoomLevel:n,docSettingsFontSize:null==t?void 0:t.fontSize,defaultContentWidth:null==t?void 0:t.defaultContentWidth,viewportScaleFactor:i,theme:r})/o}({docSettingsFromTransaction:a,zoomLevel:n,viewportScaleFactor:i,theme:r});if(u){if(d){let e=(0,eF.b5)(l.doc,{from:0,to:l.doc.lastChild.nodeSize},e=>(0,a8.KH)(e));requestAnimationFrame(()=>{e.forEach(e=>{let{pos:n,node:i}=e;cn({pos:n,editor:t,idealCardHeight:u,cardFontScale:i.attrs.fontScale,isTopLayout:"top"===i.attrs.layout})})})}else(null==a?void 0:a.scaleContentToFit)&&c.length&&(console.log("[SCALE_CONTENT_TO_FIT]:changedCards",c),c.forEach(e=>{let{pos:n,node:i}=e;cn({pos:n,editor:t,idealCardHeight:u,cardFontScale:i.attrs.fontScale,isTopLayout:"top"===i.attrs.layout})}))}},[t,r,i,n]);return(0,g.useEffect)(()=>{if(!t||t.isThumbnail)return;let e=z()(s,200,{leading:!0});return t.on("update",e),()=>{t.off("update",e)}},[t,s]),null},cn=async e=>{let{pos:t,editor:n,idealCardHeight:i,cardFontScale:r,isTopLayout:s}=e;if(!n)return;let o=(0,nc.Sh)(n,t);if(!o)return;let l=ci({cardElt:o,idealCardHeight:i,cardFontScale:r,isTopLayout:s});n.chain().updateAttributesAtPos(t,{fontScale:l}).setMeta("scaleContentToFit",!0).setMeta("addToHistory",!1).run()},ci=e=>{let{cardElt:t,idealCardHeight:n,cardFontScale:i,isTopLayout:r}=e,s=1,o=null==t?void 0:t.querySelector("[data-card-id]"),l=null==t?void 0:t.querySelector("[data-card-body]");if(!o||!l)return i||s;let a=function(e,t){let n=e.querySelector('[data-layout-item-id="body"]'),i=null==n?void 0:n.querySelector("[data-node-view-content]"),r=e.querySelector('[data-layout-item-id="accent"]');if(t&&r){let e=r.clientHeight,t=null==i?void 0:i.clientHeight;return t?t+e:0}return(null==i?void 0:i.clientHeight)||0}(t,r),c=1.01*n-n/1.01,d=Math.abs(n-a);if(d<c)return console.log("[SCALE_CONTENT_TO_FIT]: return early",{fudgeWindow:c,heightDiff:d,cardFontScale:i}),i;for(document.body.classList.add(ce),s+=.05;s>a7&&(s=a3()(s-.05,2),o.style.setProperty("--card-font-scale",s.toString()),console.log("[SCALE_CONTENT_TO_FIT]: decrementing",{targetScale:s,contentHeight:a,idealCardHeight:n}),!(l.scrollHeight<=1.01*n)););return document.body.classList.remove(ce),requestAnimationFrame(()=>{o.style.removeProperty("--card-font-scale")}),s};var cr=n(76643),cs=n(56960),co=n(46007),cl=n(83091),ca=n(94207),cc=n(62502),cd=n(9237),cu=n(42156);let ch=e=>{let{isOpen:t,onClose:n,onSaveSuccess:i,docId:r}=e,s=(0,iL.p)(),o=(0,g.useRef)(null),[l,c]=(0,g.useState)(""),[d,{loading:u}]=(0,t$.D1_)(),h=()=>{d({variables:{id:r,title:l}}).then(()=>{c(()=>""),i()}).catch(e=>{console.error(e),s({title:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(x.cC,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,a.jsxs)(rV.u_,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:o,children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})}),(0,a.jsx)(nb.o,{}),(0,a.jsx)(ny.f,{children:(0,a.jsx)(o4.I,{ref:o,value:l,required:!0,placeholder:(0,oK.$)(),onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h()}})}),(0,a.jsx)(nk.m,{children:(0,a.jsx)(tE.K,{spacing:2,direction:"row",align:"center",children:(0,a.jsx)(ev.z,{isLoading:u,isDisabled:u||!l||!l.length,onClick:()=>{h()},children:(0,a.jsx)(x.cC,{id:"tfDRzk"})})})})]})]})},cx=(0,g.memo)(e=>{let{doc:t}=e,n=(0,g.useCallback)(()=>oJ.T.emit("openSharePanel",{view:"invite"}),[]),{isOpen:i,onClose:r,onOpen:s}=(0,nK.M)({id:"analyticsModalDisclosure"}),{isOpen:o,onOpen:l,onClose:d}=(0,nK.M)({id:"titleModalDisclosure"}),{isInOfflineMode:u}=(0,C.$)(),h=(0,eM.z$)(),{user:m}=(0,eX.SE)(),f=(0,eX.py)("manage",t)&&!!m,j=(0,y.ye)("editDocAI"),v=(0,g.useCallback)(()=>{t&&(t.title&&""!==t.title?n():l())},[t,n,l]),b=(0,g.useCallback)(e=>()=>{null==h||h.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full"}),s()},[h,null==t?void 0:t.id,s]);return f&&t&&!j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.k,{children:(0,a.jsx)(eb.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsx)(x.cC,{id:"YaUqUV"}),children:(0,a.jsx)(cu.r,{"data-guider-highlight":"view-analytics-button","aria-label":p.ag._({id:"YaUqUV"}),isDisabled:u,onMouseDown:cd.br,onClick:b("toolbar_analytics_block"),icon:(0,a.jsx)(D.G,{icon:O.Ma4})})})}),o&&(0,a.jsx)(ch,{onClose:d,isOpen:o,onSaveSuccess:()=>{d(),n()},docId:null==t?void 0:t.id}),i&&(0,a.jsx)(oD,{doc:t,onSharePanelOpen:v,onAnalyticsPanelClose:r,isAnalyticsPanelOpen:i,mode:"full"})]}):null});var cp=n(58905),cm=n(75230),cf=n(64951),cg=n(25215),cj=n(58450),cv=n(41421),cC=n(14304),cb=n.n(cC),cy=n(48869),ck=n(19210);let cw=(0,lH.E)(c.k),cS=e=>{let{doc:t}=e;return(0,a.jsx)(cw,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(lq.M,{initial:!1,children:(0,a.jsx)(c_,{doc:t})})})},cE=(0,g.memo)(e=>{let{doc:t}=e,{editor:n}=(0,tw._i)(),{isConnected:i}=(0,C.$)(),r=(0,iL.p)(),s=(0,g.useRef)(null),o=(0,g.useRef)(null),[l,{loading:c}]=(0,t$.D1_)(),[u,h]=(0,g.useState)(null),[m,f]=(0,g.useState)(!1),[j,v]=(0,g.useState)(!1),b=(0,eX.py)("edit",t),y=b?300:500,k=(0,g.useCallback)(()=>{if(!n)return"";let[e]=(0,eF.N2)(n.state.doc,eB.KH);return e&&(0,l3.getCardTitle)(e.node.toJSON())||""},[n]);(0,g.useEffect)(()=>{!t||m||c||(h(t.title||""),v(!!t.titleEdited))},[t,m,c]);let w=()=>{s.current.style.width=o.current.offsetWidth+0+"px"},S=(0,eg.ff)("gray.800","gray.200");return(0,a.jsx)(eb.kH,{label:b?i?(0,a.jsx)(x.cC,{id:"2wxgft"}):(0,a.jsx)(x.cC,{id:"Cb+Bgk"}):null,"aria-label":p.ag._({id:"2wxgft"}),children:(0,a.jsxs)(cp.C,{value:u||"",placeholder:u||k(),isDisabled:c||!b||!i,isPreviewFocusable:b,maxW:y,width:"100%",fontWeight:"normal",onCancel:()=>{w(),f(!1)},onFocus:()=>{w(),t&&!c&&f(!0)},onChange:e=>{w(),m&&(h(e),v(!!e))},onSubmit:()=>{if(!t||c)return;f(!1);let e=u||k();l({variables:{id:t.id,title:e,titleEdited:j}}).catch(e=>{console.error(e),r({title:(0,a.jsx)(x.cC,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})},children:[(0,a.jsx)(cm.w,{px:1,py:.5,display:m?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:j?S:"inherit"}),(0,a.jsx)(cf.V,{ref:s,px:1,py:.5,color:j?S:"inherit",maxW:y,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,a.jsx)(d.xu,{ref:o,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:cb().sanitize((u||"").replace(/\s/g,"&nbsp;"))}})]})})});cE.displayName="EditableDocTitle";let cI=e=>{let{cardId:t,isEllipsis:n,value:i,onClick:r}=e,s=(0,F.CG)((0,af.A9)(t||""));return n?(0,a.jsx)(D.G,{icon:O.cNd}):t||i?(0,a.jsx)(e5.x,{noOfLines:1,onClick:r,maxW:180,fontWeight:"normal",children:i||s||""}):null},cA=e=>{let{isPresentModeFlat:t}=e;return e=>{let n=(0,W.gh)(e),i=(0,W.i2)(e)||"",r=(0,W.X9)(e).parents[i]||[];if("DOC_VIEW"===n||t)return[{isHome:!0},{isDocTitle:!0}];let s=r[0],o=r[r.length-1];return[{isHome:!0},r.length>1?{cardId:s}:null,r.length>2?{isEllipsis:!0}:null,r.length>0?{cardId:o}:null,{cardId:i}]}},cT=()=>{let e=(0,y.ye)("presentModeFlat");return(0,F.CG)(cA({isPresentModeFlat:e}),(e,t)=>JSON.stringify(e)===JSON.stringify(t))},c_=(0,g.memo)(e=>{let{doc:t}=e,n=(0,eo.E)(),i=cT(),[r]=(0,ck.X)(q.H.lastHomeUrl,"/"),{user:s}=(0,eX.SE)(),{isConnected:o,isInOfflineMode:l}=(0,C.$)(),{confirmNavigation:u}=(0,tw._i)(),{push:h}=(0,ey.useRouter)(),m=(0,ed.iq)({base:"xs",sm:"sm"}),f=(0,eg.ff)("gray.500","gray.400"),g=(0,eg.ff)("gray.800","gray.100");return(0,a.jsxs)(ej.U,{spacing:0,as:ev.z,textAlign:"left",px:0,_hover:{color:g},h:8,bg:"transparent",boxShadow:"none",border:"none",children:[(0,a.jsx)(cg.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:m,spacing:["4px","8px"],separator:(0,a.jsx)(d.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,a.jsx)(D.G,{icon:n?O.A35:O._tD})}),children:i.map((e,n)=>{if(!e)return null;let o=n===i.length-1,{cardId:l,isEllipsis:c,isDocTitle:d,isHome:x,value:p}=e,m=x?"home":c?"ellipsis":l||p||n;if(x&&!s)return null;let g={as:id(),href:r||"/",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,a.jsx)(cj.g,{children:(0,a.jsx)(cw,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,a.jsx)(cv.A,{isCurrentPage:o,pointerEvents:o&&!d?"none":"inherit",color:o?f:"inherit",...x?{...g}:{},children:d?(0,a.jsx)(cE,{doc:t}):x?(0,a.jsx)(rI.r,{marginInlineStart:-3,as:cu.h,href:g.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),u().then(()=>{h(g.href)}))},marginInlineEnd:-1,children:(0,a.jsx)(D.G,{size:"1x",icon:O.J9Y})}):(0,a.jsx)(cI,{cardId:l,value:p,isEllipsis:c,onClick:()=>{l&&(0,cy.D)({cardId:l,method:"push"})}})})},m)},m)})}),!o&&(0,a.jsx)(eb.kH,{label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e5.x,{marginInlineEnd:2,children:(0,a.jsx)(x.cC,{id:"ysdDIA"})}),l&&(0,a.jsx)(e5.x,{color:"gray.300",children:(0,a.jsx)(x.cC,{id:"+QNhGE"})})]}),"aria-label":p.ag._({id:"IcHxhR"}),children:(0,a.jsx)(c.k,{color:"gray.500",alignItems:"center",pr:3,children:(0,a.jsx)(D.G,{icon:O.bKP})})})]})});c_.displayName="BreadcrumbGroup";var cO=n(82642),cD=n(62453),cR=n(93274),cP=n(3422);let cL=(0,g.createContext)(null);var cz=n(85886);let cG=e=>!e.isLayoutDirty&&e.willUpdate(!1),cN=e=>!0===e,cM=e=>cN(!0===e)||"id"===e,cU=({children:e,id:t,inheritId:n,inherit:i=!0})=>{void 0!==n&&(i=n);let r=(0,g.useContext)(cP.p),s=(0,g.useContext)(cL),[o,l]=(0,cz.N)(),a=(0,g.useRef)(null),c=r.id||s;null===a.current&&(cM(i)&&c&&(t=t?c+"-"+t:c),a.current={id:t,group:cN(i)&&r.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(cG);return{add:i=>{e.add(i),t.set(i,i.addEventListener("willUpdate",n))},remove:i=>{var r;e.delete(i),null===(r=t.get(i))||void 0===r||r(),t.delete(i),n()},dirty:n}}()});let d=(0,g.useMemo)(()=>({...a.current,forceRender:o}),[l]);return g.createElement(cP.p.Provider,{value:d},e)},cF=()=>{let{user:e,anonymousUser:t}=(0,eX.SE)(),n=(0,j.I0)(),i=(0,iL.p)(),{editor:r}=(0,tw._i)(),{collaborators:s,followers:o}=(0,j.v9)((0,W._h)((null==e?void 0:e.id)||t.id));aX({editor:r,collaborators:s,user:e});let l=(0,j.v9)(W.Ow),d=(0,j.v9)(W.e0),u=(0,j.v9)(W.yn),h=(0,j.v9)(W.gs),m=(0,j.v9)(W.JA);(0,g.useEffect)(()=>{l.forEach(e=>{i({duration:2e3,position:"bottom",render:function(){return(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(sB.q,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:sf()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,a.jsx)(e5.x,{ml:2,children:(0,a.jsx)(x.cC,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[l,i]),(0,g.useEffect)(()=>{let e=!u&&h&&!m;if(!r||!e)return;i.closeAll();let t=i({id:"detached-toast",render:()=>(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(e5.x,{size:"sm",mr:6,children:(0,a.jsx)(x.cC,{id:"PjodLp"})}),(0,a.jsxs)(eC.h,{size:"sm",alignItems:"center",children:[(0,a.jsx)(ev.z,{onClick:()=>{n((0,W.Qx)({attached:!0}))},variant:"solid",children:(0,a.jsx)(x.cC,{id:"f/C2ic"})}),(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"5JWVnj"}),children:(0,a.jsx)(A.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":p.ag._({id:"5JWVnj"}),icon:(0,a.jsx)(cO.T,{}),onClick:()=>{n((0,W.Qx)({attached:!1,following:null}))}})})]})]}),position:"bottom",duration:null});return()=>{i.close(t)}},[r,u,h,m,i,n]),(0,g.useEffect)(()=>{h||!r||r.isDestroyed||n((0,W.Qx)({following:null}))},[r,h,n]);let f=(0,ed.iq)({base:4,md:6,xl:8})||6,v=f/(o.length?2:1),C=f/(s.length?2:1);return(0,a.jsx)(c.k,{children:(0,a.jsxs)(ej.U,{divider:(0,a.jsx)(cD.c,{borderColor:"gray.200"}),children:[o.length&&(0,a.jsx)(cW,{type:"FOLLOWERS",collaborators:o,max:C,isEveryone:0===s.length,localCollaborator:d,localIsAttached:u}),s.length&&(0,a.jsx)(cW,{type:"COLLABORATORS",collaborators:s,max:v,isEveryone:0===o.length,localCollaborator:d,localIsAttached:u})]})})};(r=o||(o={})).FOLLOWERS="FOLLOWERS",r.COLLABORATORS="COLLABORATORS";let cW=e=>{let{collaborators:t,localCollaborator:n,localIsAttached:i,type:r,max:s,isEveryone:o}=e,l=aJ(),d="FOLLOWERS"===r,u=t.length>s,h=u?t.slice(0,s-1):t,m=u?t.length-s+1:0,f=e=>{let{localIsFollowing:t,collaborator:n}=e;d||l({localIsFollowing:t,localIsAttached:i,collaborator:n})};return(0,a.jsx)(cU,{children:(0,a.jsxs)(cR.H,{size:"sm",spacing:d?-2:0,children:[d&&(0,a.jsx)(cH,{isEveryone:o}),h.map((e,t)=>{var r;let s=(null==n?void 0:null===(r=n.memoState)||void 0===r?void 0:r.following)===e.sessionId,o=!!e.idleSince,l=!d&&(u||h.length-1!==t);return(0,a.jsx)(eb.Vw,{ignoreFallback:!0,name:e.name,label:(0,a.jsxs)(c.k,{direction:"column",justify:"center",align:"center",children:[(0,a.jsx)(e5.x,{children:e.name}),(0,a.jsx)(e5.x,{fontSize:"xs",children:d?(0,a.jsx)(x.cC,{id:"iRohzP"}):s&&i?(0,a.jsx)(x.cC,{id:"1QTvS5"}):(0,a.jsx)(x.cC,{id:"2Ldadb"})})]}),pointerEvents:o?"none":"auto",opacity:o?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:s&&i,bg:e.color,shadow:"base",color:sf()(e.color).isDark()?"white":"black",cursor:d?"":"pointer",boxProps:l?{marginEnd:-2}:{},onClick:()=>f({localIsFollowing:s,collaborator:e})},e.sessionId)}),m>0&&(0,a.jsxs)(eb.Z9,{tooltipLabel:p.ag._({id:"25VyZX"}),onClick:e=>{var i;let r=t.find(t=>t.id===e.id);f({localIsFollowing:!!(r&&(null==n?void 0:null===(i=n.memoState)||void 0===i?void 0:i.following)===r.sessionId),collaborator:r})},avatars:t,count:m,disabled:d,children:[(0,a.jsx)(e5.x,{px:2,children:d?(0,a.jsx)(x.cC,{id:"vliZud",values:{0:t.length}}):(0,a.jsx)(x.cC,{id:"sC4bhw",values:{0:t.length}})}),!d&&(0,a.jsx)(e5.x,{px:2,fontSize:"sm",color:"gray.500",children:(0,a.jsx)(x.cC,{id:"miJbY4"})}),(0,a.jsx)(ne.R,{})]})]})})},cH=e=>{let{isEveryone:t}=e,[n,i]=(0,g.useState)(!1),[r,s]=(0,g.useState)(!1),[o,l]=(0,g.useState)(!1);return((0,g.useEffect)(()=>{!n&&t&&(s(!0),i(!0),setTimeout(()=>{s(!1)},3e3))},[t,n]),t)?(0,a.jsx)(d.xu,{fontSize:"sm",color:"",px:2,mr:2,children:(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"w7dTyp"}),isOpen:o||r,children:(0,a.jsx)(d.xu,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:(0,a.jsx)(D.G,{icon:O.Mdf})})})}):(0,a.jsx)(d.xu,{fontSize:"sm",color:"gray.700",pr:4,children:(0,a.jsx)(D.G,{icon:O.Mdf})})};var cq=n(46164);let cB=(0,lH.E)(d.xu),cV=e=>{let{commentFeedItems:t,editor:n,doc:i,user:r}=e;return n&&r?(0,a.jsx)(tE.K,{p:2,children:(0,a.jsx)(lq.M,{initial:!1,children:t.map(e=>(0,a.jsx)(cB,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,a.jsx)(n0.q,{comment:e,editor:n,selfUser:r,docId:i.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id))})}):null};var cK=n(56666);function cY(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function cZ(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){cY(s,i,r,o,l,"next",e)}function l(e){cY(s,i,r,o,l,"throw",e)}o(void 0)})}}var cJ=n(89644),cX=n.n(cJ),cQ=n(41857);function c$(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function c0(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){c$(s,i,r,o,l,"next",e)}function l(e){c$(s,i,r,o,l,"throw",e)}o(void 0)})}}function c1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c1(Object(n),!0).forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c1(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c5="axios-retry";function c3(e){return!e.response&&!!e.code&&"ECONNABORTED"!==e.code&&cQ(e)}var c4=["get","head","options"],c6=c4.concat(["put","delete"]);function c8(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function c9(e){return!!e.config&&c8(e)&&-1!==c6.indexOf(e.config.method)}function c7(e){return c3(e)||c9(e)}function de(){return 0}function dt(e){var t=e[c5]||{};return t.retryCount=t.retryCount||0,e[c5]=t,t}function dn(){return(dn=c0(function*(e,t,n,i){var r=n.retryCount<e&&t(i);if("object"==typeof r)try{return yield r,!0}catch(e){return!1}return r})).apply(this,arguments)}function di(e,t){var n;e.interceptors.request.use(e=>(dt(e).lastRequestTime=Date.now(),e)),e.interceptors.response.use(null,(n=c0(function*(n){var{config:i}=n;if(!i)return Promise.reject(n);var{retries:r=3,retryCondition:s=c7,retryDelay:o=de,shouldResetTimeout:l=!1}=c2(c2({},t),i[c5]),a=dt(i);if(yield function(e,t,n,i){return dn.apply(this,arguments)}(r,s,a,n)){a.retryCount+=1;var c=o(a.retryCount,n);if(e.defaults.agent===i.agent&&delete i.agent,e.defaults.httpAgent===i.httpAgent&&delete i.httpAgent,e.defaults.httpsAgent===i.httpsAgent&&delete i.httpsAgent,!l&&i.timeout&&a.lastRequestTime){var d=Date.now()-a.lastRequestTime;i.timeout=Math.max(i.timeout-d-c,1)}return i.transformRequest=[e=>e],new Promise(t=>setTimeout(()=>t(e(i)),c))}return Promise.reject(n)}),function(e){return n.apply(this,arguments)}))}di.isNetworkError=c3,di.isSafeRequestError=function(e){return!!e.config&&c8(e)&&-1!==c4.indexOf(e.config.method)},di.isIdempotentRequestError=c9,di.isNetworkOrIdempotentRequestError=c7,di.exponentialDelay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e);return t+.2*t*Math.random()},di.isRetryableError=c8;var dr=n(31003);class ds{constructor(e){(0,cK.Z)(this,"host",void 0),(0,cK.Z)(this,"apiKey",void 0),(0,cK.Z)(this,"userToken",void 0),(0,cK.Z)(this,"axiosClient",void 0),(0,cK.Z)(this,"socket",void 0),(0,cK.Z)(this,"socketConnected",!1),this.host=e.host,this.apiKey=e.apiKey,this.userToken=e.userToken||null,this.axiosClient=cX().create({baseURL:this.host,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey),"X-Knock-User-Token":this.userToken}}),this.socket=new dr.Socket("".concat(this.host.replace("http","ws"),"/ws/v1"),{params:{user_token:this.userToken,api_key:this.apiKey}}),di(this.axiosClient,{retries:3,retryCondition:this.canRetryRequest,retryDelay:di.exponentialDelay})}connectSocket(){this.socketConnected||(this.socket.connect(),this.socket.onOpen(()=>{this.socketConnected=!0}))}disconnectSocket(){this.socket.disconnect()}createChannel(e,t){return this.socket.channel(e,t)}makeRequest(e){var t=this;return cZ(function*(){try{var n=yield t.axiosClient(e);return{statusCode:n.status<300?"ok":"error",body:n.data,error:void 0,status:n.status}}catch(e){return console.error(e),{statusCode:"error",status:500,body:void 0,error:e}}})()}canRetryRequest(e){return!!di.isNetworkError(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}var dl=n(10161),da=n.n(dl);function dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function dd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dc(Object(n),!0).forEach(function(t){(0,cK.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(s=l||(l={})).loading="loading",s.fetchMore="fetchMore",s.ready="ready",s.error="error";var du={shouldSetPage:!0,shouldAppend:!1};function dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function dx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dh(Object(n),!0).forEach(function(t){(0,cK.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class dp{constructor(e,t,n){this.knock=e,this.feedId=t,(0,cK.Z)(this,"apiClient",void 0),(0,cK.Z)(this,"userFeedId",void 0),(0,cK.Z)(this,"channelConnected",!1),(0,cK.Z)(this,"channel",void 0),(0,cK.Z)(this,"broadcaster",void 0),(0,cK.Z)(this,"defaultOptions",void 0),(0,cK.Z)(this,"store",void 0),this.apiClient=e.client(),this.feedId=t,this.userFeedId=this.buildUserFeedId(),this.store=function(e){let t;let n=new Set,i=(e,i)=>{let r="function"==typeof e?e(t):e;if(r!==t){let e=t;t=i?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s=(e,i=r,s=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=i(t);function l(){let n=i(t);if(!s(o,n)){let t=o;e(o=n,t)}}return n.add(l),()=>n.delete(l)},o={setState:i,getState:r,subscribe:(e,t,i)=>t||i?s(e,t,i):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,o),o}(e=>({items:[],networkStatus:l.ready,loading:!1,metadata:{total_count:0,unread_count:0,unseen_count:0},pageInfo:{before:null,after:null,page_size:50},setLoading:t=>e(()=>({loading:t})),setNetworkStatus:t=>e(()=>({networkStatus:t,loading:t===l.loading})),setResult:function(t){var{entries:n,meta:i,page_info:r}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:du;return e(e=>{var t;return{items:s.shouldAppend?(t={},e.items.concat(n).reduce((e,n)=>t[n.id]?e:(t[n.id]=!0,[...e,n]),[])).sort((e,t)=>new Date(t.inserted_at).getTime()-new Date(e.inserted_at).getTime()):n,metadata:i,pageInfo:s.shouldSetPage?r:e.pageInfo,loading:!1,networkStatus:l.ready}})},setMetadata:t=>e(()=>({metadata:t})),setItemAttrs:(t,n)=>{var i=t.reduce((e,t)=>dd(dd({},e),{},{[t]:n}),{});return e(e=>({items:e.items.map(e=>i[e.id]?dd(dd({},e),i[e.id]):e)}))}})),this.broadcaster=new(da()),this.defaultOptions=n,this.apiClient.connectSocket(),this.channel=this.apiClient.createChannel("feeds:".concat(this.userFeedId),this.defaultOptions)}listenForUpdates(){return this.channelConnected||(this.channel.join().receive("ok",()=>{this.channelConnected=!0}),this.channel.on("new-message",e=>this.onNewMessageReceived(e))),()=>{try{this.channel.leave()}catch(e){console.error("error while leaving channel",e)}}}on(e,t){this.broadcaster.on(e,t)}off(e,t){this.broadcaster.off(e,t)}getState(){return this.store.getState()}markAsSeen(e){var t=this;return cZ(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"seen",{seen_at:n},"unseen_count"),t.makeStatusUpdate(e,"seen")})()}markAsUnseen(e){var t=this;return cZ(function*(){return t.optimisticallyPerformStatusUpdate(e,"unseen",{seen_at:null},"unseen_count"),t.makeStatusUpdate(e,"unseen")})()}markAsRead(e){var t=this;return cZ(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"read",{read_at:n},"unread_count"),t.makeStatusUpdate(e,"read")})()}markAsUnread(e){var t=this;return cZ(function*(){return t.optimisticallyPerformStatusUpdate(e,"unread",{read_at:null},"unread_count"),t.makeStatusUpdate(e,"unread")})()}markAsArchived(e){var t=this;return cZ(function*(){var{getState:n,setState:i}=t.store,r=n(),s=!0!==t.defaultOptions.include_archived,o=Array.isArray(e)?e:[e],l=o.map(e=>e.id),a=o.filter(e=>!e.seen_at).length,c=o.filter(e=>!e.read_at).length,d=dx(dx({},r.metadata),{},{total_count:r.metadata.total_count-o.length,unseen_count:r.metadata.unseen_count-a,unread_count:r.metadata.unread_count-c});if(s){var u=r.items.filter(e=>!l.includes(e.id));i(e=>e.setResult({entries:u,meta:d,page_info:e.pageInfo}))}else i(e=>{e.setMetadata(d),e.setItemAttrs(l,{archived_at:new Date().toISOString()})});return t.makeStatusUpdate(e,"archived")})()}markAsUnarchived(e){var t=this;return cZ(function*(){return t.optimisticallyPerformStatusUpdate(e,"unarchived",{archived_at:null}),t.makeStatusUpdate(e,"unarchived")})()}fetch(){var e=arguments,t=this;return cZ(function*(){var n=e.length>0&&void 0!==e[0]?e[0]:{},{setState:i,getState:r}=t.store,{networkStatus:s}=r();if(![l.loading,l.fetchMore].includes(s)){i(e=>{var t;return e.setNetworkStatus(null!==(t=n.__loadingType)&&void 0!==t?t:l.loading)});var o=dx(dx({},t.defaultOptions),n),a=yield t.apiClient.makeRequest({method:"GET",url:"/v1/users/".concat(t.knock.userId,"/feeds/").concat(t.feedId),params:o});if("error"===a.statusCode)return i(e=>e.setNetworkStatus(l.error)),{status:a.statusCode,data:a.error||a.body};var c={entries:a.body.entries,meta:a.body.meta,page_info:a.body.page_info};if(n.before){var d={shouldSetPage:!1,shouldAppend:!0};i(e=>e.setResult(c,d))}else if(n.after){var u={shouldSetPage:!0,shouldAppend:!0};i(e=>e.setResult(c,u))}else i(e=>e.setResult(c));return t.broadcast("messages.new",c),{data:c,status:a.statusCode}}})()}fetchNextPage(){var e=this;return cZ(function*(){var{getState:t}=e.store,{pageInfo:n}=t();n.after&&e.fetch({after:n.after,__loadingType:l.fetchMore})})()}broadcast(e,t){this.broadcaster.emit(e,t)}onNewMessageReceived(e){var t=this;return cZ(function*(){var{metadata:n}=e,{getState:i,setState:r}=t.store,s=i().items[0];r(e=>e.setMetadata(n)),t.fetch({before:null==s?void 0:s.__cursor})})()}buildUserFeedId(){return"".concat(this.feedId,":").concat(this.knock.userId)}optimisticallyPerformStatusUpdate(e,t,n,i){var{getState:r,setState:s}=this.store,o=Array.isArray(e)?e.map(e=>e.id):[e.id];if(i){var{metadata:l}=r(),a=t.startsWith("un")?o.length:-o.length;s(e=>e.setMetadata(dx(dx({},l),{},{[i]:Math.max(0,l[i]+a)})))}s(e=>e.setItemAttrs(o,n))}makeStatusUpdate(e,t){var n=this;return cZ(function*(){if(Array.isArray(e)){var i=e.map(e=>e.id);return yield n.apiClient.makeRequest({method:"POST",url:"/v1/messages/batch/".concat(t),data:{message_ids:i}})}return yield n.apiClient.makeRequest({method:t.startsWith("un")?"DELETE":"PUT",url:"/v1/messages/".concat(e.id,"/").concat(t)})})()}}class dm{constructor(e){(0,cK.Z)(this,"instance",void 0),this.instance=e}initialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new dp(this.instance,e,t)}}var df="default";function dg(e){return"object"==typeof e?e:{subscribed:e}}class dj{constructor(e){(0,cK.Z)(this,"instance",void 0),this.instance=e}getAll(){var e=this;return cZ(function*(){var t=yield e.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(e.instance.userId,"/preferences")});return e.handleResponse(t)})()}get(){var e=arguments,t=this;return cZ(function*(){var n=(e.length>0&&void 0!==e[0]?e[0]:{}).preferenceSet||df,i=yield t.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(t.instance.userId,"/preferences/").concat(n)});return t.handleResponse(i)})()}set(e){var t=arguments,n=this;return cZ(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||df,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i),data:e});return n.handleResponse(r)})()}setChannelTypes(e){var t=arguments,n=this;return cZ(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||df,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/channel_types"),data:e});return n.handleResponse(r)})()}setChannelType(e,t){var n=arguments,i=this;return cZ(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||df,s=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/channel_types/").concat(e),data:{subscribed:t}});return i.handleResponse(s)})()}setWorkflows(e){var t=arguments,n=this;return cZ(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||df,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/workflows"),data:e});return n.handleResponse(r)})()}setWorkflow(e,t){var n=arguments,i=this;return cZ(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||df,s=dg(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/workflows/").concat(e),data:s});return i.handleResponse(o)})()}setCategories(e){var t=arguments,n=this;return cZ(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||df,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/categories"),data:e});return n.handleResponse(r)})()}setCategory(e,t){var n=arguments,i=this;return cZ(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||df,s=dg(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/categories/").concat(e),data:s});return i.handleResponse(o)})()}handleResponse(e){if("error"===e.statusCode)throw Error(e.error||e.body);return e.body}}class dv{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.apiKey=e,(0,cK.Z)(this,"host",void 0),(0,cK.Z)(this,"userToken",void 0),(0,cK.Z)(this,"apiClient",null),(0,cK.Z)(this,"userId",void 0),(0,cK.Z)(this,"feeds",new dm(this)),(0,cK.Z)(this,"preferences",new dj(this)),this.host=t.host||"https://api.knock.app",this.apiKey&&this.apiKey.startsWith("sk_"))throw Error("[Knock] You are using your secret API key on the client. Please use the public key.")}client(){return this.userId||this.userToken||console.warn("[Knock] You must call authenticate(userId, userToken) first before trying to make a request.\n        Typically you'll see this message when you're creating a feed instance before having called\n        authenticate with a user Id and token. That means we won't know who to issue the request\n        to Knock on behalf of.\n        "),this.apiClient||(this.apiClient=new ds({apiKey:this.apiKey,host:this.host,userToken:this.userToken})),this.apiClient}authenticate(e,t){this.userId=e,this.userToken=t}teardown(){this.apiClient&&this.apiClient.disconnectSocket()}}let dC=e=>!!e.comment&&null!==e.timeout,db=e=>{let{user:t,docId:n,docComments:i=[],pauseExiration:r=!1,duration:s=5e3}=e,o=(0,iL.p)(),l=null==t?void 0:t.id,a=(0,g.useMemo)(()=>{if(!l)return null;let e=new dv(lc.v.KNOCK_PUBLIC_KEY);return e.authenticate(l),e},[l]),[c,d]=(0,g.useState)({}),u=(0,g.useRef)(!0),h=(0,g.useRef)(r);h.current=r,(0,g.useEffect)(()=>()=>{u.current=!1},[]);let x=(0,g.useCallback)(()=>d({}),[]),p=(0,g.useCallback)(e=>{d(t=>Object.entries(t).reduce((t,n)=>{let[i,r]=n;return(!0===e?-1===r.timeout:i===e)||(t[i]=r),t},{}))},[]);(0,g.useEffect)(()=>{r||p(!0)},[p,r]),(0,g.useEffect)(()=>{Object.entries(c).forEach(e=>{let[t,{entry:n,timeout:r}]=e;if(null===r){let e=n.data.commentId,r=null==i?void 0:i.find(t=>t.id===e);if(r){let e=setTimeout(()=>{u.current&&(h.current?d(e=>{let n={...e};return n[t].timeout=-1,n}):p(t))},s);d(i=>({...i,[t]:{entry:n,comment:r,timeout:e}}))}}})},[c,i,s,p]),(0,g.useEffect)(()=>{if(!a||!n)return;let e=a.feeds.initialize(lc.v.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();return e.on("messages.new",t=>{let{entries:i}=t,[r]=i;r.data.docId===n&&(d(e=>({...e,[r.id]:{entry:r,timeout:null}})),e.markAsSeen(r).then(()=>{console.debug("New notification marked as seen")}).catch(e=>{console.error("Unable to mark notification as seen",e)}))}),()=>{t()}},[n,o,a]);let{isConnected:m}=(0,C.$)();return(0,g.useEffect)(()=>{if(!a||!n)return;let e=a.client();m?e.connectSocket():e.disconnectSocket()},[n,m,a]),{reset:x,comments:Object.values(c).filter(dC).map(e=>e.comment)}},dy=e=>{var t;let{toggleCommentsPanel:n,isCommentsPanelOpen:i,doc:r,mode:s}=e,{user:o}=(0,eX.SE)(),{editor:l}=(0,tw._i)(),c=(0,y.ye)("editDocAI"),[d,u]=(0,tg.XI)(),{comments:h,reset:x}=db({user:o,docId:null==r?void 0:r.id,docComments:null==r?void 0:r.comments,pauseExiration:u}),p=!!(l&&r&&r.comments);(0,g.useEffect)(()=>{if(!p)return;let{commentId:e}=(0,ew.sY)();e&&nJ.pw.emit(nJ.TI.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})},[p]),(0,g.useEffect)(()=>{(i||s===eK.q.SLIDE_VIEW)&&x()},[i,x,s]);let m=!!h.length&&!i&&s!==eK.q.SLIDE_VIEW,f=(null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===t$.Ux9.Open).length)||0;return c&&0===f?null:(0,a.jsxs)(E.J,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:m,placement:"bottom",children:[(0,a.jsx)(I.x,{children:(0,a.jsx)(cu.h,{onMouseDown:cd.br,onClick:n,icon:(0,a.jsx)(D.G,{icon:O.Mzg}),isActive:i,"aria-label":i?"Hide comments":"Show comments",borderRadius:5,children:f})}),(0,a.jsx)(rG.h,{children:r&&(0,a.jsxs)(T.y,{bg:"white",shadow:"lg",border:"none",ref:d,children:[(0,a.jsx)(cq.Q,{bg:"white"}),(0,a.jsx)(cV,{editor:l,user:o,commentFeedItems:h,doc:r})]})})]})},dk=()=>{let{isInOfflineMode:e}=(0,C.$)();return(0,a.jsx)(c.k,{children:(0,a.jsx)(eb.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsx)(x.cC,{id:"EVnzPs"}),children:(0,a.jsx)(cu.r,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",isDisabled:e,onClick:()=>{ia.T.emit("toggle",{})},icon:(0,a.jsx)(D.G,{icon:O.JyM})})})})};var dw=n(82655),dS=n(19376),dE=(0,n(76801).m)("div",{baseStyle:{fontSize:"0.24em",top:"50%",left:"50%",width:"100%",textAlign:"center",position:"absolute",transform:"translate(-50%, -50%)"}});dE.displayName="CircularProgressLabel";let dI=(e,t)=>{let n=e.querySelector(".chakra-progress__indicator");if(!n)return;let i=(null!=t?t:0)/100,r=(null!=i?i:0)*264,s="".concat(r," ").concat(264-r);n.setAttribute("stroke-dasharray",s)},dA=e=>{let{duration:t=10,onClose:n,onMouseEnter:i,enabled:r,...s}=e,o=(0,g.useRef)(null),l=(0,eg.ff)("gray.200","gray.700"),c=(0,eg.ff)("trueblue.400","trueblue.300"),u=(0,eg.ff)("var(--chakra-colors-gray-700)","var(--chakra-colors-gray-300)");return(0,g.useEffect)(()=>{let e,i;let s=o.current;if(!s||!r)return;dI(s,0);let l=r=>{e||(e=r);let o=Math.min(100,(r-e)/(10*t));dI(s,o),o<100?i=requestAnimationFrame(l):null==n||n()};return i=requestAnimationFrame(l),()=>{cancelAnimationFrame(i)}},[n,r,t]),(0,a.jsx)(d.xu,{ref:o,onMouseEnter:i,cursor:"pointer",sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1,display:r?"block":"none",stroke:c},".chakra-progress__track":{display:r?"block":"none",stroke:l}},...s,children:(0,a.jsx)(dS.D,{display:"block",size:"24px",thickness:"10px",onClick:n,children:(0,a.jsx)(dE,{children:(0,a.jsx)(D.G,{icon:O.g82,fontSize:"14px",style:{color:u,borderRadius:"6px"}})})})})};var dT=n(77692),d_=n(96114),dO=n(69274),dD=n(13312),dR=n(78180),dP=n(65927),dL=n(2529),dz=n(25762),dG=n(96443),dN=n(98082);let dM=()=>{let{generate:e}=(0,tc.jz)("EditCardParallel",{}),{generate:t}=(0,tc.jz)("TranslateCardParallel",{});return(0,g.useCallback)((n,i)=>(null==i?void 0:i.key)==="edit.translate"?t({...n,variables:{...n.variables,language:n.variables.request}}):e(n),[e,t])},dU=e=>{var t;let{editor:n}=e,i=dM(),r=(0,F.CG)(W.yx),s=(0,F.CG)(W.Pu),o=(0,F.qr)(),l=(0,F.CG)(nN.oh),a=(0,rC.VA)(n),c=(0,rC.WU)(a),d=(0,g.useCallback)(async e=>{var t,n,l;let{instructions:d="",inputHtml:u,operation:h}=e,x=(null===(t=a.aiOptions.imageOptions)||void 0===t?void 0:t.provider)||y.VH.get("aiGeneratorDefaultImageProvider")||void 0;if(!r||!r.organization)throw Error("Doc or organization not found");let p=r.organization.id,m=(0,td.nZ)(),f=performance.now(),g=(0,tp.D)(o),j={interface:"edit-card-parallel",interactionId:m,inputContent:u,inputMessage:d,inputData:{custom:!!h,operation:null==h?void 0:h.key,operationGroup:null==h?void 0:h.group,format:c,imageProvider:x},product:(0,dL.K9)(r.organization),docId:r.id};try{let{promise:e}=i({workspaceId:r.organization.id,variables:{inputHtml:u,request:d,format:c,outline:g,imageProvider:x,model:y.VH.get("editCardModel")},interactionId:m},h),t=null===(l=r.docGenerateInput)||void 0===l?void 0:null===(n=l.settings)||void 0===n?void 0:n.imageStyle;!t&&"aiGenerated"===x&&s&&(t=(0,dz.A)(s)),(0,td.hq)(j);let o=await e;console.log("[EditCardParallel] Response",o);let a=(0,d_.Au)(o);return console.log("[EditCardParallel] Parsing HTML",a),{output:await Promise.all(a.map(async e=>(0,dO.sj)(e,{docFormatKey:c,loadImages:!1,context:{workspaceId:p,docId:r.id,interactionId:m},imageOptions:{provider:x,generateStyle:t},theme:s}))),interactionId:m}}catch(e){throw(0,td.pQ)({...j,errorMessage:e.message,errorCode:e.code,errorName:e.name,outputMessage:"Error editing doc",latency:performance.now()-f}),e}},[c,null===(t=a.aiOptions.imageOptions)||void 0===t?void 0:t.provider,r,o,i,s]),u=(0,g.useCallback)(async e=>{let{instructions:t,operation:i}=e,r=(0,eB.Y0)(n.state.doc),s=t||(null==i?void 0:i.instructions);if(r&&s)try{o.dispatch((0,nN.dt)(!0));let e=[];r.forEach(t=>{var r;o.dispatch((0,nN.t)({cardId:t.node.attrs.id,suggestions:{status:"loading",loadingMessage:null==i?void 0:null===(r=i.loadingMessage)||void 0===r?void 0:r.call(i),variants:[]}})),e.push((0,ta.c)(n,t.node))});let t=e.join();console.log("[EditCardParallel] Input HTMLParts",e);let{output:l,interactionId:a}=await d({instructions:s,operation:i,inputHtml:t});if(console.log("[EditCardParallel] New cards",l),l.length!==r.length)throw Error("[EditCardParallel] Mismatch in number of cards");let c={};r.forEach((e,t)=>{var n;let r=l[t];r.attrs=(0,dN.yH)(e.node.attrs,r.attrs),c[e.node.attrs.id]=r,o.dispatch((0,nN.t)({cardId:e.node.attrs.id,suggestions:{status:"done",interactionId:a,selected:"v1",operation:i,instructions:s,variants:[{label:p.ag._({id:"HxF6Fk"}),isOriginal:!0,id:"original",card:e.node.toJSON()},{label:(null==i?void 0:null===(n=i.variationName)||void 0===n?void 0:n.call(i))||p.ag._({id:"YledUl"}),isOriginal:!1,id:"v1",card:r}]}}))}),dW(n,c)}catch(e){console.error("[EditCardParallel] Error regenerating card",e),r.forEach(e=>{o.dispatch((0,nN.t)({cardId:e.node.attrs.id,suggestions:{status:"error",variants:[]}}))})}finally{o.dispatch((0,nN.dt)(!1))}},[n,d,o]);return(0,g.useEffect)(()=>dR.T.on("translate",e=>{let{type:t,language:n}=e,i=dG.xd.find(e=>"edit.translate"===e.key);"doc"===t&&i&&u({instructions:"".concat(n.englishName," (").concat(n.key,")"),operation:i})}),[u]),{editDoc:u,acceptAll:(0,g.useCallback)(()=>{o.dispatch((0,nN.Mq)({}))},[o]),rejectAll:(0,g.useCallback)(()=>{dF(n,o.getState(),!0),o.dispatch((0,nN.Mq)({}))},[n,o]),status:l}},dF=(e,t,n)=>{let i=(0,nN.Ir)(t),r=e.chain();return Object.entries(i).forEach(t=>{let[i,s]=t,o=(0,eB.Bw)(e,i),l=s.variants.find(e=>!!e.isOriginal===n);o&&l&&l.id!==s.selected&&r.command(t=>{let{tr:n}=t,i=nS.NB.fromJSON(e.schema,l.card),r=n.mapping.map(o.pos);return n.replaceWith(r,r+o.node.nodeSize,i),!0})}),r.run()},dW=(e,t)=>{let n=(0,eB.Y0)(e.state.doc);if(!n)return;let i=n.map(n=>{let i=t[n.node.attrs.id];if(!i){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}let r=nS.NB.fromJSON(e.state.schema,i),s=(0,W.Pu)((0,F.bh)().getState());return(0,dD.eM)(e,r,s),i}).filter(e=>!!e);console.log("[replaceDocWithCardVariants] content",i),e.chain().setMeta("isEditCardVariant",!0).setMeta("cardNotesHandled",!0).insertContentAt({from:1,to:e.state.doc.nodeSize-2},i).run()},dH=()=>{let e=!!(0,F.CG)(e_.lH),{isOpen:t,onClose:n,onOpen:i}=(0,nK.M)({id:"TranslateDocDisclosure"}),r=(0,g.useCallback)(e=>{dR.T.emit("translate",{type:"doc",language:e}),n()},[n]);return{translateDocModal:t?(0,a.jsx)(dP.o,{isSite:e,isFullDoc:!0,onClose:n,startTranslation:r}):null,onTranslateDocOpen:i}};var dq=n(77572);let dB=(0,lH.E)(e2.g),dV=e=>{let{editor:t}=e,{isInOfflineMode:n}=(0,C.$)(),{openUpsellModal:i}=(0,so.z)(),{editDoc:r,status:s,acceptAll:o,rejectAll:l}=dU({editor:t}),d=(0,ec.Yy)(),u=(0,g.useRef)(null),h=(0,g.useRef)(null),m=(0,y.ye)("editCard2"),f=(0,eg.ff)("gray.200","whiteAlpha.200"),[j,v]=(0,g.useState)(),b=(0,g.useCallback)(()=>v(void 0),[]),{isGammaAdminUser:k}=(0,dq.K)(),w=(0,J.Y)("edit_doc_ai")||k,{translateDocModal:S,onTranslateDocOpen:E}=dH(),I="loading"===s,A=(0,g.useCallback)(e=>{var t;if(!w){i({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI});return}if(o(),v(e.operation||"Editing"),(null===(t=e.operation)||void 0===t?void 0:t.key)==="edit.translate"){E();return}r(e)},[o,w,r,E,i]);return m?(0,a.jsxs)(eb.Wk,{isDark:d,children:[(0,a.jsx)(t4.v,{placement:"bottom-end",isLazy:!0,initialFocusRef:h,onOpen:()=>{v(void 0)},children:e=>{let{onClose:t,isOpen:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"nIHiKm"}),placement:"bottom",children:(0,a.jsx)(t6.j,{as:cu.r,position:"relative",colorScheme:"trueblue","aria-label":p.ag._({id:"nIHiKm"}),borderRadius:"md",bg:i?f:void 0,isDisabled:I||n,icon:I?(0,a.jsx)(tI.$,{size:"sm"}):(0,a.jsx)(D.G,{icon:dw.JyM})})}),(0,a.jsx)(dY,{currentOperation:j,onConfirm:o,onReject:l,onClose:b})]}),(0,a.jsx)(rG.h,{children:(0,a.jsxs)(t8.q,{"data-doc-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"Inter, sans-serif",fontSize:"md",border:"none",children:[(0,a.jsx)(dT.M,{firstItemRef:u,inputRef:h,editCardIfAllowed:A,onClose:t,isDisabled:I,opacityFadeUpsell:!w,groups:["writing"],showCreditCosts:!1}),!w&&(0,a.jsx)(ss.m,{isNarrow:!0,mb:0,segmentEvent:eM.AA.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI,title:(0,a.jsx)(x.cC,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:Z.x8}}),description:(0,a.jsx)(x.cC,{id:"gNaWbA",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})})]})})]})}}),S]}):null},dK={initial:{opacity:0,y:10},animate:{opacity:1,transition:{duration:.4,ease:[.21,1.02,.73,1]},y:0},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:[.06,.71,.55,1]}},dY=e=>{var t,n,i;let{currentOperation:r,onConfirm:s,onReject:o,onClose:l}=e,d=(0,F.CG)(nN.oo),[u,h]=(0,g.useState)(!0),m="Edited"===r?r:"object"==typeof r?null===(t=r.completionMessage)||void 0===t?void 0:t.call(r):(0,a.jsx)(x.cC,{id:"MRZxAn"}),f=null!==(n=d.done)&&void 0!==n?n:0,j=null!==(i=d.error)&&void 0!==i?i:0,v=!!((f||j)&&r);(0,g.useEffect)(()=>{v||h(!0)},[v]);let C={activeColor:(0,eg.ff)("trueblue.500","trueblue.300"),hoverColorCloseButton:(0,eg.ff)(j?"red.200":"gray.100","whiteAlpha.200"),bg:(0,eg.ff)("white","gray.900"),bgError:(0,eg.ff)("red.100","red.700"),textColor:(0,eg.ff)("blackAlpha.800","whiteAlpha.900"),textErrorColor:(0,eg.ff)("red.500","red.100"),iconColor:(0,eg.ff)("blackAlpha.800","whiteAlpha.800")};return(0,a.jsx)(lq.M,{children:v&&(0,a.jsxs)(dB,{position:"absolute",bg:j?C.bgError:C.bg,borderRadius:"md",boxShadow:"md",overflow:"hidden",top:14,right:6,flexDirection:"row",spacing:2,p:2,onMouseEnter:()=>h(!1),...dK,children:[j>0?(0,a.jsxs)(ej.U,{spacing:0,children:[(0,a.jsx)(c.k,{mx:2,justifyContent:"center",alignItems:"center",color:C.textErrorColor,children:(0,a.jsx)(D.G,{icon:O.e7M,size:"lg"})}),(0,a.jsxs)(e2.g,{mx:2,spacing:0,alignItems:"flex-start",children:[(0,a.jsx)(e5.x,{fontSize:"sm",color:C.textErrorColor,children:(0,a.jsx)(x.cC,{id:"nwtY4N"})}),(0,a.jsx)(e5.x,{fontSize:"xs",color:C.textErrorColor,children:(0,a.jsx)(x.cC,{id:"xbrcey"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e2.g,{spacing:0,alignItems:"flex-start",children:[(0,a.jsxs)(c.k,{mx:2,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(D.G,{icon:dw.JyM,color:"var(--chakra-colors-trueblue-400)"}),(0,a.jsx)(e5.x,{fontSize:"sm",mx:2,color:C.textColor,children:m})]}),(0,a.jsx)(c.k,{mx:2,children:(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(x.cC,{id:"Dj1qYd",values:{doneCount:f}})})})]}),(0,a.jsxs)(eC.h,{spacing:0,children:[(0,a.jsx)(eb.kH,{label:p.ag._({id:"I1yW7+"}),placement:"top",children:(0,a.jsx)(A.h,{"aria-label":p.ag._({id:"yWDjkv"}),variant:"ghost",colorScheme:"gray",size:"sm",mx:1,icon:(0,a.jsx)(D.G,{icon:O.X7o}),onClick:o})}),(0,a.jsx)(eb.kH,{label:p.ag._({id:"kOU1RP"}),placement:"top",children:(0,a.jsx)(ev.z,{"aria-label":p.ag._({id:"aIcRZZ"}),variant:"plain",size:"sm",mx:1,rightIcon:(0,a.jsx)(D.G,{icon:O.FFp}),onClick:s,children:(0,a.jsx)(x.cC,{id:"PHWHEO"})})})]})]}),(0,a.jsx)(c.k,{mt:-6,mr:-1,children:(0,a.jsx)(eb.kH,{label:p.ag._({id:"1QfxQT"}),placement:"top",shouldWrapChildren:!0,children:(0,a.jsx)(dA,{onClose:l,enabled:u&&!j,duration:30,borderRadius:"full",_hover:{bg:C.hoverColorCloseButton,color:C.textColor}})})})]},"confirm-edit-doc-toast")})},dZ=(0,lH.E)(d.xu),dJ=()=>{let e=(0,F.CG)(W.WI),t=(0,F.CG)(W.yn);return(0,a.jsx)(lq.M,{initial:!1,children:e&&t&&(0,a.jsx)(dZ,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})},dX=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e;return(0,a.jsxs)(t4.v,{placement:"bottom-end","data-testid":"doc-toolbar-menu",modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["left"]}}],children:[(0,a.jsx)(t6.j,{as:cu.r,borderRadius:"md",icon:(0,a.jsx)(D.G,{icon:O.cNd}),onMouseDown:cd.br,"data-testid":"doc-toolbar-menu-button"}),(0,a.jsx)(rG.h,{children:t&&(0,a.jsx)(ah,{doc:t,toggleCommentsPanel:n,scrollingParentSelector:r,editorWrapperEl:i})})]})},dQ=e=>{let{docId:t,enabled:n,enterSlideView:i}=e,r=(0,F.CG)(W.e0),s=(0,g.useRef)(null),o=(0,iL.p)();return(0,g.useEffect)(()=>{!n&&s.current&&s.current.close()},[n]),(0,g.useEffect)(()=>{let e=()=>{var e;null===(e=s.current)||void 0===e||e.close()};return window.addEventListener("beforeunload",e),()=>{var t;window.removeEventListener("beforeunload",e),null===(t=s.current)||void 0===t||t.close()}},[]),{handlePresentViewClick:(0,g.useCallback)(()=>{if(!t||!(null==r?void 0:r.sessionId))return;let e=(0,ew.C3)({docId:t,sessionId:r.sessionId}),n=window.open(e,"present-view","popup,left=0,top=0,width=720,height=580");n?s.current=n:(o({title:"Failed to open presenter view.",description:"Please allow popups for this site and try again.",status:"error",position:"top",duration:5e3}),console.error("[usePresenterViewToggle] Failed to open presenter view")),i({fullscreen:!1})},[t,i,null==r?void 0:r.sessionId,o])}};var d$=n(73235),d0=n(20737);function d1(){let e=(0,d$._)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "]);return d1=function(){return e},e}let d2=e=>({followOnStart:!0,followingId:e}),d5=e=>{switch(e){case"edit":return p.ag._({id:"UZN1cZ"});case"comment":return p.ag._({id:"jFTs0A"});case"view":return p.ag._({id:"Ya6CJ0"});default:return p.ag._({id:"Txd1qM"})}},d3=e=>{var t,n;let{isOpen:i,onClose:r,accessLinkUrl:s,onPlayClick:o}=e,l=(0,eo.E)(),{user:c}=(0,eX.SE)(),{replace:u}=(0,ey.useRouter)(),h=d2(null==c?void 0:c.id),[m]=(0,g.useState)(h),f=(0,ew.eo)(s,m),{user:j,color:v}=(0,eX.SE)(),C=(0,F.CG)(tV.yx),b=null==C?void 0:null===(n=C.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.permission,y=(0,lW.F4)(d1());return(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsxs)(rV.u_,{isOpen:i,onClose:r,size:"lg",children:[(0,a.jsx)(nv.Z,{}),(0,a.jsxs)(rK.h,{children:[(0,a.jsx)(rY.x,{children:(0,a.jsx)(x.cC,{id:"88XnIQ"})}),(0,a.jsx)(nb.o,{}),(0,a.jsx)(sn.i,{}),(0,a.jsx)(ny.f,{pt:"6",children:(0,a.jsxs)(tE.K,{spacing:"4",children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"oYTLJe",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc,0:d5(b)},components:{0:(0,a.jsx)(e5.x,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,a.jsx)(eb.kH,{label:p.ag._({id:"8LnpqL"}),placement:"top"})}})}),(0,a.jsx)(d.xu,{mb:"2",children:(0,a.jsx)(d0.I,{url:f,variant:"solid",paddingLeft:l?20:void 0})}),(0,a.jsxs)(ip.b,{children:[(0,a.jsx)(sa.z,{}),(0,a.jsxs)(ej.U,{flexBasis:"100%",alignItems:"top",children:[(0,a.jsx)(e5.x,{fontSize:"sm",width:"100%",children:(0,a.jsx)(x.cC,{id:"EApNIe"})}),(0,a.jsxs)(d.xu,{position:"relative",textShadow:"sm",children:[(0,a.jsx)(sB.q,{animation:"".concat(y," 2s infinite ease-out"),name:null==j?void 0:j.displayName,src:null==j?void 0:j.profileImageUrl,size:"md",border:"solid 3px ".concat(v.value),shadow:"lg"}),(0,a.jsx)(d.xu,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,a.jsx)(D.G,{icon:e4.qaO,fixedWidth:!0})})]})]})]})]})}),(0,a.jsx)(nk.m,{children:(0,a.jsxs)(eC.h,{children:[(0,a.jsx)(ev.z,{variant:"ghost",colorScheme:"gray",onClick:()=>{r()},children:(0,a.jsx)(x.cC,{id:"DPfwMq"})}),(0,a.jsx)(ev.z,{variant:"solid",onClick:()=>{r(),o(),u(f,f,{shallow:!0})},leftIcon:(0,a.jsx)(D.G,{icon:e4.zc}),children:(0,a.jsx)(x.cC,{id:"tbDuNX"})})]})})]})]})})},d4=e=>{var t,n,i,r;let{doc:s,docEditorType:o,isCollaborativeEditor:l,enterSlideView:u,exitSlideView:h,setExitedFullscreenByClick:m,isFullscreen:f,enterFullscreen:j,exitFullscreen:v,shouldHide:b}=e,{onOpen:k,onClose:w,isOpen:S}=(0,nK.M)({id:"meetModal"}),{user:E}=(0,eX.SE)(),I=(0,F.CG)(W.gh),A=(0,g.useRef)(I);(0,g.useEffect)(()=>{A.current=I},[I]);let{shortcutLabel:T,shortcutIcon:_,shortcutKeys:R,buttonLabel:P}=rX()[I],L=null==s?void 0:null===(n=s.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,z=!!(null==s?void 0:null===(r=s.accessLinks)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.permission),G=(0,eX.py)("comment",s||void 0),N=(0,eX.py)("manage",s||void 0),M=l&&E&&L&&N,U=(0,y.ye)("cardNotes"),H=I===eK.q.SLIDE_VIEW,q=I===eK.q.DOC_VIEW,B=U&&G&&o!==tk.Z.PUBLIC_STATIC,{isInOfflineMode:V}=(0,C.$)(),{handlePresentViewClick:K}=dQ({docId:null==s?void 0:s.id,enabled:U&&H,enterSlideView:u}),Y=(0,y.ye)("presentFullScreen");return(0,a.jsxs)(c.k,{display:b?"none":"flex",children:[(0,a.jsxs)(eC.h,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":H?"slide":"doc",children:[(0,a.jsx)(eb.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:T,shortcut:R,children:(0,a.jsx)(cu.h,{fontWeight:"normal",size:"sm",variant:"solid",onClick:()=>{H?h():u({fullscreen:Y})},onMouseDown:cd.br,icon:(0,a.jsx)(D.G,{icon:_}),"data-present-button":!0,children:P})}),(0,a.jsxs)(t4.v,{children:[(0,a.jsx)(t6.j,{variant:"solid",as:cu.r,icon:(0,a.jsx)(D.G,{icon:O.ptq})}),(0,a.jsx)(rG.h,{children:(0,a.jsxs)(t8.q,{zIndex:"popover",children:[q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(rq.k,{title:p.ag._({id:"tbDuNX"}),children:[B&&(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.s0r,fixedWidth:!0}),onClick:K,isDisabled:V,children:(0,a.jsxs)(tE.K,{spacing:"0",children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"T+GUKl"})}),(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(x.cC,{id:"ACelDx"})})]})}),B&&(0,a.jsx)(ne.R,{}),(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.Rkb,fixedWidth:!0}),command:(0,eb.cE)("Mod+Enter"),onClick:()=>u({fullscreen:!1}),children:(0,a.jsx)(x.cC,{id:"LRFe2O"})}),(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.tc$,fixedWidth:!0}),command:(0,eb.cE)("Mod+Shift+Enter"),onClick:()=>u({fullscreen:!0}),children:(0,a.jsx)(x.cC,{id:"OwIqiD"})})]}),M&&(0,a.jsx)(ne.R,{})]}),H&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:e4.Bg$,fixedWidth:!0}),command:(0,eb.cE)("Esc"),onClick:h,children:(0,a.jsx)(x.cC,{id:"5Rfo7J"})}),(B||M)&&(0,a.jsx)(ne.R,{}),B&&(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.s0r,fixedWidth:!0}),onClick:K,children:(0,a.jsxs)(tE.K,{spacing:"0",children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"T+GUKl"})}),(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(x.cC,{id:"ACelDx"})})]})})]}),M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eb.kH,{isDisabled:z,label:(0,a.jsx)(x.cC,{id:"zk6wKo"}),children:(0,a.jsx)(d.xu,{children:(0,a.jsx)(rW.s,{onClick:()=>{var e;(null==s?void 0:null===(e=s.accessLinks)||void 0===e?void 0:e[0].permission)&&k()},isDisabled:!z||V,icon:(0,a.jsx)(D.G,{icon:O.ASo,fixedWidth:!0}),children:(0,a.jsx)(tE.K,{spacing:"0",children:(0,a.jsx)(x.cC,{id:"z7gRub",components:{0:(0,a.jsx)(e5.x,{}),1:(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.600"})}})})})})}),(0,a.jsx)(d3,{isOpen:S,onClose:w,accessLinkUrl:L,onPlayClick:()=>{u({fullscreen:!1})}})]})]})})]})]}),H&&(0,a.jsx)(c.k,{ml:H?2:0,children:(0,a.jsx)(eb.kH,{label:f?"Exit full screen":"Enter full screen",children:(0,a.jsx)(cu.r,{"aria-label":f?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,a.jsx)(D.G,{icon:f?O.Qj4:O.TL5}),onClick:f?()=>{m(!0),v()}:j})})})]})},d6=e=>{switch(e){case t$.X5w.Pending:return{icon:O.rk4,label:p.ag._({id:"JKsafh"})};case t$.X5w.Verified:return{icon:O.LEp,label:p.ag._({id:"DKrUGB"})};case t$.X5w.Failed:return{icon:O.FGl,label:p.ag._({id:"ojSx8e"})}}},d8=e=>{let{domain:t,status:n,isLive:i,site:r,docId:s}=e,o=(0,eR.D5)({site:r,docId:s}),l=(0,g.useMemo)(()=>d6(n),[n]);return r&&s?(0,a.jsxs)(ej.U,{color:"gray.500",pointerEvents:"none",justifyContent:"flex-start",w:"full",children:[(0,a.jsx)(eb.kH,{label:l.label,placement:"left",children:(0,a.jsx)(A.h,{variant:"ghost",size:"xs",mx:-1,mr:-2,color:"gray.500","aria-label":l.label,_hover:{bg:"transparent"},_active:{bg:"transparent"},children:(0,a.jsx)(D.G,{icon:l.icon,size:"xs",pointerEvents:"auto",fixedWidth:!0,spin:n===t$.X5w.Pending})})}),(0,a.jsx)(eb.kH,{label:t,placement:"top",openDelay:500,closeOnClick:!1,children:(0,a.jsx)(d.xu,{fontSize:"xs",pointerEvents:"auto",children:d9(t,33)})}),i&&n===t$.X5w.Verified&&(0,a.jsx)(oQ,{site:r,path:(0,eR.fJ)(o)})]}):null},d9=(e,t)=>{if(e.length<=t)return e;let n=e.replace(/^https?:\/\//,"").split("."),i=n.slice(-2).join("."),r=n.slice(0,-2).join("."),s=t-i.length-3;if(s<=0)return i;let o=r.slice(0,s);return"".concat(o).concat("...").concat(i)},d7=e=>{let{onClick:t,doc:n,isLive:i}=e,r=null==n?void 0:n.site,s=(0,eR.Zz)(null==r?void 0:r.domains),o=i?(0,a.jsx)(x.cC,{id:"3TQHDg",values:{0:s.length}}):(0,a.jsx)(x.cC,{id:"1EeNDU"});return(0,a.jsxs)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.A$k,fixedWidth:!0}),onClick:t,alignItems:"baseline",children:[o,r&&(null==n?void 0:n.id)&&s.map(e=>(0,a.jsx)(d8,{domain:e.name,status:e.status,isLive:i,site:r,docId:n.id},e.id))]})},ue=e=>{let{doc:t}=e,{replace:n}=(0,ey.useRouter)(),{isInOfflineMode:i}=(0,t$.$gs)(),r=(0,eX.py)("manage",t),s=(0,F.CG)(e_.lH),o=null==t?void 0:t.id,l=(0,eR.D5)({site:s,docId:o}),{publishDoc:u,publishSite:h,isPublishing:m}=i5({doc:t,site:s,path:l}),{statusText:f,statusIcon:j,statusColor:v,lastPublishedTime:C,needsPublish:b,publishEnabled:y}=rU(m),k=s&&(0,eR.jl)(t,s),w=(0,g.useCallback)(()=>{o&&n((0,ew.yQ)({docId:o,preview:!0}),void 0,{shallow:!0})},[o,n]);if(!s)return null;let S=(0,J.uL)("custom_domains");return(0,a.jsx)(c.k,{children:(0,a.jsxs)(eC.h,{isAttached:!0,size:"sm",children:[(0,a.jsx)(eb.kH,{closeOnMouseDown:!1,closeOnClick:!1,isDisabled:!y,label:b&&!m?(0,a.jsxs)(tE.K,{children:[f,(0,a.jsx)(e5.x,{color:"gray.400",children:(0,a.jsx)(x.cC,{id:"FmP7uY"})})]}):(0,a.jsx)(x.cC,{id:"o+bOqE"}),children:(0,a.jsx)(cu.h,{fontWeight:"normal",size:"sm",variant:"solid",onClick:h,onMouseDown:cd.br,isDisabled:!y||i,isLoading:m,icon:b?(0,a.jsx)(D.G,{icon:O.A$k}):(0,a.jsx)(D.G,{icon:O.LEp}),"data-publish-button":!0,children:b?(0,a.jsx)(x.cC,{id:"EEYbdt"}):(0,a.jsx)(x.cC,{id:"u3wRF+"})})}),(0,a.jsxs)(t4.v,{children:[(0,a.jsx)(t6.j,{variant:"solid",as:cu.r,isDisabled:!y||i,icon:(0,a.jsx)(D.G,{icon:O.ptq})}),(0,a.jsx)(rG.h,{children:(0,a.jsxs)(t8.q,{zIndex:"popover",minW:"320px",maxW:"360px",children:[(0,a.jsx)(rq.k,{children:(0,a.jsxs)(e2.g,{alignItems:"flex-start",children:[(0,a.jsxs)(ej.U,{px:3,pt:2,alignItems:"center",color:v,children:[j&&(0,a.jsx)(d.xu,{mr:1.5,display:"inline-flex",children:j}),(0,a.jsx)(d.xu,{children:(0,a.jsx)(e5.x,{fontWeight:"semibold",children:f})})]}),C&&(null==t?void 0:t.site)&&(0,a.jsxs)(ej.U,{pb:2,mt:-1,children:[(0,a.jsx)(e3.L,{mr:2,px:3,w:13}),(0,a.jsx)(e5.x,{fontSize:"xs",color:"gray.500",children:k?C:(0,a.jsx)(x.cC,{id:"0bSVwO"})})]})]})}),r&&t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ne.R,{}),(0,a.jsxs)(rq.k,{title:p.ag._({id:"1EeNDU"}),children:[(0,a.jsx)(d7,{onClick:h,doc:t,isLive:!!k}),(0,a.jsx)(l0,{doc:t,label:(0,a.jsx)(x.cC,{id:"A/QS9E"}),showUpsellBadge:!S})]})]}),(0,a.jsx)(ne.R,{}),(0,a.jsx)(rq.k,{title:p.ag._({id:"Pf2dn/"}),children:(0,a.jsx)(rW.s,{icon:(0,a.jsx)(D.G,{icon:O.PQh,fixedWidth:!0}),onClick:u,alignItems:"baseline",children:(0,a.jsx)(x.cC,{id:"szmTdw"})})}),(0,a.jsx)(ne.R,{}),(0,a.jsx)(rq.k,{title:p.ag._({id:"rdUucN"}),children:(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"aChIoL"}),children:(0,a.jsx)(d.xu,{children:(0,a.jsx)(rW.s,{onClick:w,icon:(0,a.jsx)(D.G,{icon:e4.sl_,fixedWidth:!0}),alignItems:"baseline",children:(0,a.jsx)(tE.K,{spacing:"0",children:(0,a.jsx)(x.cC,{id:"EEOIfz",components:{0:(0,a.jsx)(e5.x,{})}})})})})})})]})})]})]})})};var ut=n(24523),un=n(83235),ui=n(21716),ur=n(42907);let us=e=>{var t,n;let{doc:i,showAnalytics:r=!0,showSharePublic:s=!0,showEmbed:o=!0,showButton:l=!0}=e,{isOpen:c,onClose:u,onOpen:h}=(0,nK.M)({id:"analyticsModalDisclosure"}),{isSharePanelOpen:p,onSharePanelOpen:m,onSharePanelClose:f,view:j,setView:v}=(0,un.y)(),{isInOfflineMode:b}=(0,C.$)(),{user:y,currentWorkspace:k}=(0,eX.SE)(),{editor:w}=(0,tw._i)(),S=(0,eX.py)("view",i),E=(0,eX.py)("edit",i),I=(0,eX.py)("manage",i),A=(0,eM.z$)(),[T,_]=(0,g.useState)("");(0,g.useEffect)(()=>oJ.T.on("openSharePanel",e=>{let{view:t,options:n}=e;m(),v(t),(null==n?void 0:n.cardRangesInput)&&_(n.cardRangesInput)}),[m,v]);let O=(0,g.useCallback)(()=>{null==A||A.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:null==i?void 0:i.id,source:"share_panel",type:I?"full":"personal"}),h()},[A,I,null==i?void 0:i.id,h]);if(!S||!y||!i)return null;let D=i.collaborators||[],R=i.channels||[],P=(0,ur.Hs)([...D].sort((e,t)=>e.user.id===y.id?-1:t.user.id===y.id?1:0).map(e=>e.user.id===y.id?"You":e.user.displayName||"").concat(i.orgAccess?R.map(e=>{let{name:t}=e;return t||""}):[])),L=(0,ui.h_)(i,y),z=L?(0,ui.Xp)()[L]:null,G=(0,ui.Gi)(i,k);return null===z?(console.error("[SharePanel] Unknown VisibilityValue for doc",i),null):(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsx)(eb.kH,{label:(0,a.jsxs)(a.Fragment,{children:[G&&(0,a.jsx)(e5.x,{fontWeight:"bold",children:(0,a.jsx)(x.cC,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}})}),z.title(null==i?void 0:null===(t=i.organization)||void 0===t?void 0:t.name)?(0,a.jsx)(e5.x,{children:z.title(null==i?void 0:null===(n=i.organization)||void 0===n?void 0:n.name)}):null,(0,a.jsx)(e5.x,{fontSize:"xs",children:z.subtitle?z.subtitle(P||""):""})]}),children:(0,a.jsx)("span",{children:(0,a.jsx)(cu.h,{"data-guider-highlight":"share-button",onMouseDown:cd.br,icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(ut.aA,{visibility:z,isFromOtherOrg:G})}),isDisabled:!E||b,onClick:m,children:(0,a.jsx)(x.cC,{id:"Z8lGw6"})})})}),(0,a.jsx)(ut.G9,{doc:i,editor:w,isSharePanelOpen:p,onSharePanelOpen:m,onSharePanelClose:f,onAnalyticsPanelOpen:O,view:j,setView:v,showAnalytics:r,showSharePublic:s,showEmbed:o,cardRangesInput:T,setCardRangesInput:_}),c&&(0,a.jsx)(oD,{doc:i,onSharePanelOpen:m,onAnalyticsPanelClose:u,isAnalyticsPanelOpen:c,mode:I?"full":"personal"})]})},uo=(0,g.memo)(e=>{let{doc:t,onClick:n}=e,{isConnected:i,isInOfflineMode:r}=(0,C.$)(),s=(null==t?void 0:t.title)||"";return(0,a.jsxs)(c.k,{flex:1,w:32,children:[(0,a.jsx)(eb.kH,{label:(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"g/+TNk"})}),(0,a.jsx)(e5.x,{color:"gray.500",children:(0,a.jsx)(x.cC,{id:"ZfQLKw"})})]}),isDisabled:r,"aria-label":p.ag._({id:"g/+TNk"}),children:(0,a.jsx)(ev.z,{size:"sm",variant:"ghost",colorScheme:"gray",fontWeight:"normal",ml:-1,leftIcon:(0,a.jsx)(D.G,{icon:O.SCr}),onClick:n,isDisabled:r,children:(0,a.jsx)(e5.x,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",w:"100%",children:s})})}),!i&&(0,a.jsx)(eb.kH,{label:(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"ysdDIA"})}),r&&(0,a.jsx)(e5.x,{color:"gray.500",children:(0,a.jsx)(x.cC,{id:"+QNhGE"})})]}),"aria-label":p.ag._({id:"IcHxhR"}),children:(0,a.jsx)(c.k,{color:"gray.500",alignItems:"center",mr:2,children:(0,a.jsx)(D.G,{icon:O.bKP})})})]})});uo.displayName="EditableDocTitle";let ul=e=>(0,a.jsx)(ua,{...e}),ua=(0,g.memo)(e=>{let{doc:t,togglePagesPanel:n}=e,i=(0,eo.E)(),[r]=(0,ck.X)(q.H.lastHomeUrl,"/"),s=(0,F.CG)(e_.lH),{confirmNavigation:o}=(0,tw._i)(),{push:l}=(0,ey.useRouter)(),u={as:id(),href:r||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"},h=(0,eg.ff)("gray.800","gray.100");return(0,a.jsx)(ej.U,{flex:1,children:(0,a.jsxs)(ej.U,{spacing:2,divider:(0,a.jsx)(d.xu,{border:"none",as:D.G,icon:i?O.A35:O._tD,size:"sm",color:"gray.300"}),w:"100%",color:h,children:[(0,a.jsx)(rI.r,{as:cu.h,href:u.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),o().then(()=>{l(u.href)}))},marginInlineStart:-1,colorScheme:"gray",children:(0,a.jsx)(D.G,{size:"1x",icon:O.J9Y})}),s&&(null==s?void 0:s.routes.length)>1&&(0,a.jsx)(c.k,{flexGrow:0,flexShrink:1,children:(0,a.jsx)(e5.x,{noOfLines:1,fontWeight:"normal",fontSize:"sm",children:null==s?void 0:s.name})}),(0,a.jsx)(uo,{doc:t,onClick:()=>{null==n||n()}})]})})});ua.displayName="PageBreadcrumbGroup";let uc=e=>{let{spotlightingByBlock:t}=e,{editor:n}=(0,tw._i)(),i=(0,g.useCallback)(()=>{t?null==n||n.commands.turnOffSpotlight():null==n||n.commands.spotlightNextBlock()},[n,t]);return(0,a.jsx)(c.k,{children:(0,a.jsx)(eb.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsxs)(e5.x,{whiteSpace:"nowrap",children:[t?"Turn off spotlight":"Turn on spotlight",(0,a.jsx)(e5.x,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,a.jsx)(cu.h,{colorScheme:"trueblue",variant:t?"solid":"plain",onClick:e=>{i(),e.target.blur()},icon:(0,a.jsx)(D.G,{icon:O.QMW}),children:"Spotlight"})})})};var ud=n(48855);let uu=()=>{let e=(0,iL.p)(),[t]=(0,t$.Iyu)(),n=(0,F.CG)(e_.$U),{docId:i,getCollaborativeEditorInstance:r}=(0,tw._i)(),s=(0,F.CG)(W.Pu),o=r(),l=(0,eM.z$)(),{updateDocThemeWithAccentImages:c}=(0,ec.vi)({docId:i,editor:o}),d=(0,g.useCallback)(e=>{n&&e.id!==s.id&&t({variables:{input:{siteId:n,themeId:e.id}},update:(t,i)=>{let{data:r}=i,s=t.readFragment({id:"Theme:".concat(e.id),fragment:t$.ASj,fragmentName:"DefaultThemeFields"});t.updateQuery({query:t$.BYL,variables:{id:n}},e=>e&&e.site&&s?{...e,site:{...e.site,...null==r?void 0:r.updateSite,theme:s}}:e)}}).then(()=>{})},[n,s.id,t]),u=(0,g.useCallback)(t=>{t.id!==s.id&&c(t.id).then(()=>{null==l||l.track(eM.AA.DOC_THEME_UPDATED,{doc_id:i,theme_id:t.id})}).catch(t=>{console.error(t),e({title:(0,a.jsx)(x.cC,{id:"Fulf8b",values:{0:t.message}}),position:"top",status:"error"})})},[l,s.id,i,e,c]);return(0,g.useCallback)(e=>n?d(e):u(e),[n,u,d])};var uh=n(15889),ux=n(61387);let up=(0,g.memo)(e=>{let{closePanel:t}=e,n=uu(),i=(0,F.CG)(W.Pu),r=(0,g.useCallback)(()=>{null==t||t(),nJ.pw.emit(nJ.TI.OPEN_PAGE_SETUP,"background")},[t]);return(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsx)(e8.s,{bgColor:"white",w:"100%","data-panelid":"doc-theme-drawer",pt:4,position:"relative","data-doc-theme-drawer":!0,children:(0,a.jsxs)(c.k,{direction:"column","data-testid":"doc-theme-drawer",overflowX:"hidden",w:"100%",children:[(0,a.jsx)(e9.V,{children:(0,a.jsx)(c.k,{px:6,children:(0,a.jsx)(ux.v,{title:(0,a.jsx)(x.cC,{id:"FEr96N"}),description:(0,a.jsx)(e5.x,{fontSize:"sm",fontWeight:"500",mt:"-2",letterSpacing:0,color:"gray.700",children:(0,a.jsx)(x.cC,{id:"S9uQm/"})}),closePanel:t,currentTheme:i})})}),(0,a.jsx)(c.k,{overflowY:"auto",direction:"column",h:"100%",flex:1,"data-theme-picker-scroll-container":!0,px:6,mt:4,children:(0,a.jsx)(uh.t,{currentTheme:i,openBackgroundPanel:r,setTheme:n})})]})})})});up.displayName="DocThemePanelMemoized";let um=e=>{let{closePanel:t}=e;return(0,a.jsx)(up,{closePanel:t})};um.displayName="DocThemePanel",um.panelPosition="right",um.panelName="doc-theme-drawer";let uf=()=>{let{togglePanel:e,isPanelOpen:t}=ei(um);return(0,g.useEffect)(()=>{let t=()=>{e({override:"open"})},n=oJ.T.on("toggleThemeBlock",t),i=nJ.pw.on(nJ.TI.OPEN_THEME_DRAWER,t);return()=>{n(),i()}},[e]),{toggleDocThemePanel:e,isDocThemePanelOpen:t}},ug=(0,g.memo)(()=>{uf();let{getCollaborativeEditorInstance:e}=(0,e0._)(),t=uu();return(0,a.jsx)(c.k,{children:(0,a.jsx)(ud.g,{onThemeCreated:t,getCollaborativeEditorInstance:e})})}),uj=(0,g.memo)(()=>{let{isConnected:e}=(0,t$.$gs)();return(0,a.jsx)(eb.kH,{label:e?(0,a.jsx)(x.cC,{id:"JkEyR8"}):(0,a.jsx)(x.cC,{id:"GvC+mL",components:{0:(0,a.jsx)(e5.x,{}),1:(0,a.jsx)(e5.x,{color:"gray.300"})}}),"aria-label":p.ag._({id:"JkEyR8"}),children:(0,a.jsx)(d.xu,{children:(0,a.jsx)(cu.h,{"data-guider-highlight":"toolbar-theme-button",onClick:()=>{oJ.T.emit("toggleThemeBlock",!0)},isDisabled:!e,icon:(0,a.jsx)(D.G,{icon:O.q2v}),"data-testid":"toolbar-theme-button",children:(0,a.jsx)(x.cC,{id:"FEr96N"})})})})});uj.displayName="ThemeToolbarButton";let uv=()=>{let{isConnected:e}=(0,t$.$gs)();return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(ug,{}),(0,a.jsx)(uj,{})]})};ug.displayName="ThemeDrawers";let uC=[.5,.8,.9,1,1.1,1.2,1.5,2],ub=e=>"".concat((100*e).toFixed(0),"%"),uy=()=>{let e=(0,y.ye)("presentZoom"),{editor:t}=(0,tw._i)(),n=(0,eM.z$)(),i=(0,j.I0)(),r=(0,F.CG)(W.SU),s=(0,g.useCallback)(e=>{i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"set",level:e})},[i,n]),o=(0,g.useCallback)(()=>{i((0,W.fT)({enabled:!0}))},[i]),l=(0,g.useCallback)(()=>{let e=Math.min(l6.v4,uk(r)+.1);i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),c=(0,g.useCallback)(()=>{let e=Math.max(l6.Ou,uk(r)-.1);i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),d=(0,g.useCallback)(()=>{let e=l6.aX;i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"reset",level:e})},[i,n]),u=(0,F.CG)(r$.C),h=(0,nd.rJ)();return((0,g.useEffect)(()=>{if(e)return el.F7.on("keydown","PRESENT_BLOCK",e=>{let n=e.target instanceof HTMLElement&&(0,eV.Hx)(e.target);return!(u||!t||(0,nc.KB)(t))&&!n&&((0,il.ZP)("=")(e)?(l(),e.preventDefault(),!0):(0,il.ZP)("-")(e)?(c(),e.preventDefault(),!0):(0,il.ZP)("0")(e)?(d(),e.preventDefault(),!0):!!(0,il.ZP)("9")(e)&&(o(),e.preventDefault(),!0))})},[u,e,t,l,c,d,o]),e)?(0,a.jsxs)(eC.h,{spacing:"0",size:"sm",variant:"ghost",isAttached:!0,borderWidth:"1px",borderRadius:"md",children:[(0,a.jsx)(eb.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:p.ag._({id:"FjkaiT"}),children:(0,a.jsx)(A.h,{"aria-label":p.ag._({id:"FjkaiT"}),fontWeight:"normal",onClick:c,icon:(0,a.jsx)(D.G,{icon:O.Kl4})})}),(0,a.jsxs)(t4.v,{closeOnSelect:!0,children:[(0,a.jsx)(eb.kH,{label:p.ag._({id:"VZ3UQG"}),children:(0,a.jsx)(t6.j,{minW:20,as:ev.z,variant:"ghost",fontWeight:"400",size:"sm",rightIcon:(0,a.jsx)(D.G,{icon:O.ptq}),children:h?(0,a.jsx)(x.cC,{id:"R9Khdg"}):ub(r)})}),(0,a.jsxs)(t8.q,{maxW:"220px",children:[(0,a.jsx)(t9._,{value:h?"auto":r.toString(),type:"radio",children:(0,a.jsx)(t7.i,{value:"auto",onClick:o,children:(0,a.jsxs)(ej.U,{children:[(0,a.jsxs)(e5.x,{children:[(0,a.jsx)(x.cC,{id:"R9Khdg"})," ",(0,a.jsx)(e5.x,{as:"span",color:"gray.500",children:(0,a.jsx)(x.cC,{id:"P9Cyl9"})})]}),(0,a.jsx)(e3.L,{}),(0,a.jsx)(e5.x,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,a.jsx)(ne.R,{}),(0,a.jsx)(t9._,{value:h?"auto":r.toString(),type:"radio",children:uC.map(e=>(0,a.jsx)(t7.i,{value:(e/100).toString(),onClick:()=>{s(e)},children:(0,a.jsxs)(ej.U,{children:[(0,a.jsx)(e5.x,{children:ub(e)}),(0,a.jsx)(e3.L,{}),e===l6.aX&&(0,a.jsx)(e5.x,{as:"span",opacity:"0.6",children:"0"})]})},e))})]})]}),(0,a.jsx)(eb.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:p.ag._({id:"AWOSPo"}),children:(0,a.jsx)(A.h,{fontWeight:"normal","aria-label":p.ag._({id:"AWOSPo"}),onClick:l,icon:(0,a.jsx)(D.G,{icon:O.r8p})})})]}):null},uk=e=>Math.round(10*e)/10,uw=(0,g.memo)(function(e){let{editor:t,scrollingParentSelector:i,toggleCommentsPanel:r,isCommentsPanelOpen:s,isPagesPanelOpen:o,togglePagesPanel:l,editorWrapperEl:d,docEditorType:u,isDark:h}=e,[x]=(0,ca.a)(["(max-width: 840px)","(min-width: 841px)"]),p=(0,y.ye)("editDocAI"),m=(0,ed.iq)({base:!0,lg:!1}),f=(0,F.CG)(W.gh),j=(0,F.CG)(tV.yx),v=(0,F.CG)(e_.lH),{isGammaAdminUser:C}=(0,eX.SE)(),b=(0,eX.py)("comment",j),k=(0,i1.O1)(),w=(0,i1.lP)(),{enabled:S}=(0,cc.g)(t),E=(0,eR.Vr)(v),I="SLIDE_VIEW"!==f,A=(0,F.CG)(W.hN),T=u===tk.Z.COLLABORATIVE,_=(0,F.CG)(W.Tf),O=(0,F.CG)((0,ee.SL)("left")),D=(0,F.CG)((0,ee.SL)("right")),R=(0,y.ye)("aiChat"),{enterSlideView:P,exitSlideView:L,setExitedFullscreenByClick:z,isFullscreen:G,enterFullscreen:N,exitFullscreen:M}=se({editorWrapperEl:d,scrollingParentSelector:i});window.exportToPptx=async e=>{if(!t)return;let{exportToPptx:i}=await Promise.all([n.e(4865),n.e(4467),n.e(9928)]).then(n.bind(n,21459));return i(t,e)};let H=U((0,g.useCallback)(e=>{let t=q.current;return!!t&&(!!(t.querySelector("[data-active]")||t.querySelector('[aria-expanded="true"]')||O||D)||e.clientY<100)},[O,D]),!_),q=(0,g.useRef)(null),B=!(0,ek.s2)(),V=!1===p&&!x&&m&&T&&A&&R;return(0,a.jsx)(eb.Wk,{isDark:h,children:(0,a.jsxs)(c.k,{"data-editor-toolbar":!0,ref:q,bg:h?"gray.900":"white",borderBottomWidth:"1px",borderBottomColor:h?"gray.800":"blackAlpha.100",zIndex:t0.S.toolbar,left:0,right:0,py:1.5,alignItems:"center",p:2,pr:6,gap:2,transform:!_||_&&H?void 0:"translateY(-100%)",pointerEvents:"none",sx:{"&:focus-within":{marginTop:0},"> *":{pointerEvents:"auto"},"> #toolbar-spacer":{pointerEvents:"none"}},transitionProperty:"transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,a.jsx)(dJ,{}),(0,a.jsx)(ej.U,{flex:1,children:v?(0,a.jsx)(ul,{doc:j,pagesPanelEnabled:k,isPagesPanelOpen:o,togglePagesPanel:l}):(0,a.jsx)(cS,{doc:j})}),(0,a.jsxs)(ej.U,{children:[!x&&(0,a.jsx)(cF,{}),!x&&!I&&(0,a.jsx)(uy,{}),!x&&!I&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(uc,{spotlightingByBlock:S})}),!x&&T&&A&&w&&(0,a.jsx)(uv,{}),(T||C)&&(0,a.jsx)(us,{doc:j,showButton:!x}),B&&!E&&(0,a.jsx)(d4,{doc:j,isCollaborativeEditor:T,editorWrapperEl:d,scrollingParentSelector:i,enterSlideView:P,exitSlideView:L,setExitedFullscreenByClick:z,isFullscreen:G,enterFullscreen:N,exitFullscreen:M,shouldHide:x,docEditorType:u}),B&&E&&k&&(0,a.jsx)(ue,{doc:j}),T&&b&&(0,a.jsx)(dy,{doc:j,mode:f,isCommentsPanelOpen:s,toggleCommentsPanel:r}),p&&(A||C)?(0,a.jsx)(dV,{editor:t}):V?(0,a.jsx)(dk,{}):null,!x&&T&&!E&&(0,a.jsx)(cx,{doc:j}),!x&&(T||C)&&(0,a.jsx)(dX,{doc:j,toggleCommentsPanel:r,editorWrapperEl:d,scrollingParentSelector:i}),(0,a.jsx)(c.k,{children:(0,a.jsx)(nE.DY,{showRing:!0})})]})]})})}),uS=e=>!!(e.target&&e.target instanceof HTMLElement&&"IFRAME"===e.target.tagName),uE=(e,t)=>{var n;let i=Math.max((null===(n=t.posAtCoords(e))||void 0===n?void 0:n.inside)||-1);if(-1!=i)try{return t.state.doc.resolve(i)}catch(e){return}},uI=e=>"card"===e.type.name?!!(0,r1.HD)(e.attrs.id):!!((0,rO.L8)(e)||["button","buttonGroup","tableOfContents","toggleSummary"].includes(e.type.name)),uA=e=>!!(e.dataset.contentReference||e.dataset.zoomClickCapture),uT=(e,t)=>{if(!(null==t?void 0:t.nodeAfter))return!1;let n=t.nodeAfter;if("paragraph"===n.type.name)return!!(e.classList.contains("link")||e.closest(".link"));if(!(uI(n)||(0,eF.qv)(t,e=>uI(e))))return!1;if((0,co.vb)(n.type)){let t=e.closest(".react-renderer");return!!t&&!!(uA(e)||(0,eV.tl)(e,t,uA))}return"gallery"!==n.type.name||!!e.closest(".gallery-content")},u_=(0,g.memo)(e=>{let{editor:t}=e,[n,i]=(0,g.useState)(!0),r=(0,g.useRef)({x:0,y:0}),s=(0,g.useRef)(null),o=(0,g.useRef)(null),l=(0,g.useRef)(null),u=(0,g.useRef)("none"),h=(0,F.CG)(y.GD),x=(0,F.CG)(W.pN),p=x[0],m=x[x.length-1],f=(0,F.CG)(W.i2),j=(0,g.useRef)("middle"),v=(0,F.CG)(W.SU),C=(0,F.CG)(W.Kk),b=(0,F.CG)(e=>{var t;return!!(null===(t=(0,W.k8)(e))||void 0===t?void 0:t.pos)}),k=!1===C?Math.max(.75,v):1;j.current=f===p?"first":f===m?"last":"middle",(0,g.useEffect)(()=>{let e,n;let a=e=>{s.current&&l.current&&(s.current.style.opacity=e?"1":"0",l.current.disabled=!e)},c=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>{if(!s.current||!o.current)return;let e=r.current.x-30*k/2,t=r.current.y-30*k/2;s.current.style.transform="translate(".concat(e,"px, ").concat(t,"px)"),"left"===u.current&&(s.current.style.transform+=" scaleX(-1)"),a("none"!==u.current)})},d=()=>{i(!0),clearTimeout(n),n=setTimeout(()=>{i(!1),c()},2e3)},h=e=>{d(),e&&(r.current={x:e.clientX,y:e.clientY});let n=r.current.x,i=r.current.y,o=null==e?void 0:e.target;if(!t||!s.current||!l.current||!o)return;if(e&&uS(e)){u.current="none",c();return}let a=n/window.innerWidth*100;if(a>20&&a<80||i<=51||!o.closest(".ProseMirror")||b||uT(o,uE({left:n,top:i},t.view))){u.current="none",c();return}u.current=a<=20?"left":"right",c()},x=()=>{u.current="none",c()},p=e=>{uS(e)&&(u.current="none",c())},m=e=>{if(d(),!t||e.button>1||(0,cl.BS)(t.view))return;let n=(0,F.bh)().getState(),i=!!(0,W.Od)(n),r=(0,W.hN)(n);!i&&!r&&["left","right"].includes(u.current)&&(e.preventDefault(),e.stopPropagation(),t.commands.spotlightNextCard("left"===u.current))};return h(),document.body.addEventListener("mousemove",h),document.body.addEventListener("mouseleave",x),document.body.addEventListener("mouseup",m),document.body.addEventListener("mouseover",p),()=>{document.body.removeEventListener("mousemove",h),document.body.removeEventListener("mouseleave",x),document.body.removeEventListener("mouseup",m),document.body.removeEventListener("mouseover",p),clearTimeout(n)}},[t,k,f,b]);let w="".concat(30*k,"px"),S="".concat(30*k,"px");return(0,a.jsxs)(rG.h,{children:[(0,a.jsx)("style",{ref:l,children:"html * { cursor: none!important}"}),(0,a.jsx)(uO,{position:"left",enabled:h}),(0,a.jsx)(uO,{position:"right",enabled:h}),(0,a.jsx)(c.k,{ref:s,position:"absolute",top:"0",left:"0",alignItems:"center",justifyContent:"center",className:"gamma-custom-cursor",width:w,height:S,pointerEvents:"none",willChange:"transform",verticalAlign:"middle",zIndex:"tooltip",filter:"drop-shadow(3px 1px 2px rgb(0 0 0 / 0.1))",outline:h?"2px solid pink":void 0,children:(0,a.jsx)(d.xu,{ref:o,position:"absolute",width:w,height:S,sx:{"::before":{content:'""',opacity:n?1:0,transition:"opacity 0.2s",display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat("/_next/static/media/CustomCursorPointer.288ac219.svg",")"),width:"100%",height:"100%"}}})})]})}),uO=e=>{let{position:t,enabled:n}=e;return n?(0,a.jsx)(d.xu,{position:"absolute",top:"0",bottom:"0",left:"left"===t?"calc(".concat(20,"% - 1px)"):void 0,right:"right"===t?"calc(".concat(20,"% - 1px)"):void 0,width:"2px",height:"100%",zIndex:"tooltip",pointerEvents:"none",borderLeft:"2px dashed red"}):null};var uD=n(62344);let uR=e=>{let t=(0,F.CG)(W.uD),n=(0,F.CG)(W.e0),{handlePresentNavigationEvent:i}=(0,uD._)(tx.R0.PRESENTER_VIEW_POPUP);(0,g.useEffect)(()=>{if(!t)return;let r=t=>{let{payload:r}=t;if(e)try{let{payload:e}=JSON.parse(r),{action:t,eventKey:s,method:o,toSessionId:l,fromUserId:a}=e;if(l!==(null==n?void 0:n.sessionId)||a!==(null==n?void 0:n.id))return;switch(t){case"goToCard":{let{cardId:n}=e;if(!n)break;i({eventType:t,eventKey:s,method:o,payload:{cardId:n}});break}case"toggleSpotlight":case"arrowRight":case"arrowLeft":case"arrowDown":case"arrowUp":case"restart":case"toggleExpanded":case"cancelCurrentAction":i({eventType:t,eventKey:s,method:o});break;default:console.warn("[usePresenterViewMessages] Unknown message type",e)}}catch(e){console.error("[usePresenterViewMessages] Error parsing message",e)}};return t.on("stateless",r),()=>{t.off("stateless",r)}},[e,null==n?void 0:n.sessionId,null==n?void 0:n.id,i,t])},uP=e=>{let{editor:t,enabled:n}=e,i=(0,F.TL)(),r=(0,g.useRef)(null),[s,o]=(0,g.useState)(!1),[l,a]=(0,g.useState)([0,0]),[c,d]=(0,g.useState)("bottom"),u=(0,F.CG)(W.Od),h=(0,g.useCallback)(()=>{o(!1)},[]),x=(0,g.useCallback)(()=>{a([0,0]),d("bottom")},[]),p=(0,g.useCallback)(e=>{o(!0),a(e)},[]),m=(0,g.useCallback)(e=>{var t;e.preventDefault(),p([e.clientX,e.clientY]);let n=null===(t=r.current)||void 0===t?void 0:t.offsetHeight;if(null==n)return;let i=window.innerHeight<e.clientY+n,s=e.clientY<n;i&&!s?d("top"):i&&s?d("center"):d("bottom")},[r,p]);(0,g.useEffect)(()=>{u||o(!1)},[u]),(0,g.useEffect)(()=>{if(t&&n)return nJ.pw.on(nJ.TI.OPEN_PRESENT_MODE_CONTEXT_MENU,e=>{let{e:t,pos:n,cardId:r}=e;m(t),i((0,W.$B)({pos:n,cardId:r}))})},[t,n,m,i]);let f=(0,g.useMemo)(()=>{var e;let t=l[1],n=null===(e=r.current)||void 0===e?void 0:e.offsetHeight,i=n?window.innerHeight-(t+n+8):void 0,s="center"===c&&i?"translateY(".concat(i,"px)"):"top"===c?"translateY(-100%)":void 0;return{left:l[0],top:l[1],transform:s,transformOrigin:"top"}},[c,l]);return{menuRef:r,isPresentModeMenuOpen:s,onPresentModeMenuClose:h,handleContextMenu:m,menuRootStyles:f,clearPositioning:x}};var uL=n(1737),uz=n(27988),uG=n(65342);let uN=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...s}=e;return r?null:(0,a.jsx)(rW.s,{icon:n,onClick:i,...s,children:t})},uM=(0,g.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:s,clearPositioning:o,rootStyles:l}=e,[c,d]=(0,g.useState)(null),u=(0,uz.q)(t,d),{pos:h,cardId:p}=(0,F.CG)(W.OH),{enabled:m}=(0,rD.gZ)(n),{editCardInPresentMode:f}=(0,uG.l)({editor:n}),j=(0,ec.Yy)(),v=(0,g.useCallback)(()=>{m?null==n||n.commands.turnOffSpotlight():h?null==n||n.commands.spotlightNodeAtPos(h):p&&(null==n||n.commands.spotlightNextBlock()),r()},[m,h,p,r,null==n?void 0:n.commands]);return(0,g.useEffect)(()=>{var e;null==c||null===(e=c.parentElement)||void 0===e||e.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation()})},[c]),(0,a.jsx)(rG.h,{children:(0,a.jsx)(eb.Wk,{isDark:j,children:(0,a.jsx)(t4.v,{isOpen:i,closeOnBlur:!1,isLazy:!0,children:(0,a.jsxs)(t8.q,{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},zIndex:"popover",ref:u,rootProps:{style:l},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||o()},children:[(0,a.jsx)(uN,{"data-testid":"present-mode-menu-item-edit",command:(0,eb.cE)("E"),shouldHide:s,icon:(0,a.jsx)(D.G,{fixedWidth:!0,icon:O.TzT}),onClick:f,children:(0,a.jsx)(x.cC,{id:"IkOuqb"})}),(0,a.jsx)(uN,{"data-testid":"present-mode-menu-item-spotlight",command:(0,eb.cE)("S"),icon:(0,a.jsx)(D.G,{fixedWidth:!0,icon:O.QMW}),onClick:v,children:m?(0,a.jsx)(x.cC,{id:"CzYGrQ"}):h?(0,a.jsx)(x.cC,{id:"LoLA00"}):p?(0,a.jsx)(x.cC,{id:"X1FNEK"}):null})]})})})})});uM.displayName="PresentModeContextMenuComponent";let uU=(0,g.memo)(uM);var uF=n(63176),uW=n(6185),uH=n.n(uW),uq=n(68642),uB=n(27875),uV=n.n(uB);let uK={easeOutLinear:sg.gA,easeOutSine:sg.vh,easeOutCubic:sg.w2,easeOutCirc:sg.ei,easeOutQuad:sg.hl,easeOutQuart:sg.Y3,easeOutExpo:sg.ad,bezierCustom1:uH()(.13,.97,.035,.73),bezierCustom2:uH()(.105,1.15,.15,.355)},uY={UP:"up",DOWN:"down"},uZ=e=>e?+new Date-+new Date(e):1/0,uJ=(e,t)=>{let n=(0,g.useMemo)(()=>new uq.Lethargy(6,120,.3,150),[]),{easing:i="easeOutCubic",touchpadFactor:r=1.5,triggerThreshold:s=1200}=t||{},o=(0,eq.As)("editor"),l=(0,F.CG)(W.i2),a=(0,g.useRef)(null),c=(0,g.useRef)(null),d=(0,g.useRef)(null),u=(0,g.useRef)(!1),h=(0,g.useRef)(null),x=(0,g.useRef)(null),[p,m]=(0,g.useState)(!1),[f,j]=(0,g.useState)(!1),v=(0,g.useRef)({counterTarget:0,counterCurrent:0,direction:uY.DOWN}),C=(0,g.useCallback)(()=>{var e;if(!a.current)return;let{counterTarget:t}=v.current,n=t/s*100,i=(null!=n?n:0)*2.64,r="".concat(i," ").concat(264-i),o=null===(e=a.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,l=a.current.querySelector(".chakra-progress__indicator");l&&l.setAttribute("stroke-dasharray",r),o&&(o.innerHTML="".concat(n.toFixed(0),"%"))},[s]),b=(0,g.useCallback)(()=>{let e=d.current,t=c.current;if(!t||!e)return;let n=e.querySelector(".chakra-progress__indicator"),r=t.querySelector(".chakra-progress__indicator");if(!n||!r)return;let o=v.current.counterCurrent/s,l=(550>uZ(x.current)?1:null!=o?o:0)*264,a="".concat(l," ").concat(264-l),u=Math.max(56-56*uK[i](Math.min(o,1)),0);e.style.transform="translateY(".concat(u,"px)"),t.style.transform="translateY(-".concat(u,"px)"),r.setAttribute("stroke-dasharray",a),n.setAttribute("stroke-dasharray",a)},[i,s]),y=(0,g.useCallback)(()=>{let e;if(u.current)return;let t=n=>{let i=e?n-e:0;if(e=n,.1>Math.abs(v.current.counterTarget-v.current.counterCurrent)){v.current.counterCurrent=v.current.counterTarget,b(),u.current=!1;return}v.current.counterCurrent=(0,sg.t7)(v.current.counterCurrent,v.current.counterTarget,uV()(60/(i?1e3/i:60)*.3,.3,1)),b(),requestAnimationFrame(t)};requestAnimationFrame(t)},[b]),k=(0,g.useCallback)(()=>{v.current.counterTarget=0,m(!1),j(!1),C(),y()},[y,C]);return(0,g.useEffect)(()=>{let t,i;if(!l||!e)return k();let a=document.querySelector((0,l6.U8)(l));if(!a)return k();let u=t=>{if(t.target.closest("[data-comments-wrapper]"))return;let l=n.check(t);if(null===d.current||null===c.current)return;let a=uZ(h.current);if(a<500||a<1e3&&!1===l)return;let u=uZ(x.current);if(u<500||u<1e3&&!1===l)return;let p=0===Math.abs(t.deltaY)?v.current.direction:t.deltaY>0?uY.DOWN:uY.UP;if(!("down"===p?o.isAtBottom():o.isAtTop()))return;clearTimeout(i);let f=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,g=Math.abs(void 0!==t.deltaY?t.deltaY:40)*(f?r:1);if(p!==v.current.direction){v.current.direction=p,k();return}j(p===uY.DOWN),m(p===uY.UP),v.current.counterTarget+=g,v.current.direction=p,v.current.counterTarget/s>=1?(e.commands.spotlightNextCard(p===uY.UP,p===uY.UP?"bottom":"top"),x.current=+new Date,setTimeout(()=>{k(),C()},250),setTimeout(()=>{x.current=null},1e3)):i=setTimeout(k,500),y(),C()},p=()=>{h.current=+new Date,clearTimeout(t),k(),t=setTimeout(()=>{h.current=null},1e3)};return a.addEventListener("scroll",p),a.addEventListener("wheel",u,{passive:!0}),C(),()=>{a.removeEventListener("scroll",p),a.removeEventListener("wheel",u)}},[e,n,y,i,r,s,o,C,b,k,l]),{debugRef:a,nextCardRef:d,prevCardRef:c,showNextCard:f,showPrevCard:p}},uX=e=>{let{editor:t}=e,n=(0,y.ye)("debugLogging"),[i,r]=(0,g.useState)("easeOutExpo"),[s,o]=(0,g.useState)(1.5),[l,c]=(0,g.useState)(1200),{debugRef:d,nextCardRef:u,prevCardRef:h,showNextCard:x,showPrevCard:p}=uJ(t,{easing:i,touchpadFactor:s,triggerThreshold:l}),{prevCard:m,nextCard:f}=(0,F.CG)(e=>{let t=(0,W.i2)(e)||"",n=(0,W.X9)(e),i=Object.keys((n.parents[t]||[]).reduce((e,t)=>e[t],n.tree)),r=null,s=null;return i.forEach((e,o)=>{if(e!==t)return;let l=n.parents[t];0===o?l.length&&(r={cardId:l[l.length-1],isSibling:!1}):r={cardId:i[o-1],isSibling:!0},o===i.length-1?l.length&&(s={cardId:l[l.length-1],isSibling:!1}):s={cardId:i[o+1],isSibling:!0}}),{prevCard:r,nextCard:s}},tt()),j=null==f?void 0:f.cardId,v=null==m?void 0:m.cardId,C=(0,g.useMemo)(()=>{let e=null,n=null;return t&&t.state.doc.descendants(t=>!(0,eB.KH)(t)||(t.attrs.id===v?e=t:t.attrs.id===j&&(n=t),!!(!e&&v)||!!(!n&&j))),{prev:e,next:n}},[t,j,v]);return(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(uQ,{ref:d,setEasing:r,setTouchpadFactor:o,setTriggerThreshold:c}),(0,a.jsx)(u$,{ref:h,direction:"up",node:C.prev,enabled:p,offset:16}),(0,a.jsx)(u$,{ref:u,direction:"down",node:C.next,enabled:x,offset:24})]})},uQ=g.forwardRef((e,t)=>{let{setEasing:n,setTouchpadFactor:i,setTriggerThreshold:r}=e;return(0,a.jsxs)(c.k,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,a.jsxs)(t4.v,{closeOnSelect:!1,children:[(0,a.jsx)(t6.j,{as:ev.z,colorScheme:"trueblue",children:"Options"}),(0,a.jsxs)(t8.q,{minWidth:"240px",children:[(0,a.jsx)(eb.kH,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,a.jsxs)(e5.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,a.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,a.jsxs)(uF.Y2,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:(e,t)=>r(t),children:[(0,a.jsx)(uF.zu,{}),(0,a.jsxs)(uF.Fi,{children:[(0,a.jsx)(uF.WQ,{}),(0,a.jsx)(uF.Y_,{})]})]}),(0,a.jsx)(ne.R,{}),(0,a.jsx)(eb.kH,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,a.jsxs)(e5.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,a.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,a.jsxs)(uF.Y2,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:(e,t)=>i(t),children:[(0,a.jsx)(uF.zu,{}),(0,a.jsxs)(uF.Fi,{children:[(0,a.jsx)(uF.WQ,{}),(0,a.jsx)(uF.Y_,{})]})]}),(0,a.jsx)(ne.R,{}),(0,a.jsxs)(t9._,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:e=>n(e),children:[(0,a.jsx)(t7.i,{value:"easeOutLinear",children:"easeOutLinear"}),(0,a.jsx)(t7.i,{value:"easeOutSine",children:"easeOutSine"}),(0,a.jsx)(t7.i,{value:"easeOutCubic",children:"easeOutCubic"}),(0,a.jsx)(t7.i,{value:"easeOutCirc",children:"easeOutCirc"}),(0,a.jsx)(t7.i,{value:"easeOutQuad",children:"easeOutQuad"}),(0,a.jsx)(t7.i,{value:"easeOutQuart",children:"easeOutQuart"}),(0,a.jsx)(t7.i,{value:"easeOutExpo",children:"easeOutExpo"}),(0,a.jsx)(t7.i,{value:"bezierCustom1",children:"bezierCustom1"}),(0,a.jsx)(t7.i,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,a.jsx)(c.k,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,a.jsx)(dS.D,{value:40,color:"trueblue.500",children:(0,a.jsx)(dE,{})})})]})});uQ.displayName="PeekDebugger";let u$=g.forwardRef((e,t)=>{let{direction:n,enabled:i,node:r,offset:s}=e,[o,l]=(0,g.useState)(!1),[d,u]=(0,g.useState)(r);(0,g.useEffect)(()=>{l(!0);let e=setTimeout(()=>{l(!1),u(r)},550);return()=>{clearTimeout(e)}},[r]);let h=(0,g.useMemo)(()=>d?(0,l3.getCardTitle)(d.toJSON()):"",[d]),x=!!d;return(0,a.jsx)(c.k,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===n?"".concat(s,"px"):"inherit",bottom:"down"===n?"".concat(s,"px"):"inherit",children:(0,a.jsxs)(c.k,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:i?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,a.jsx)(dS.D,{display:x?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,a.jsx)(dE,{visibility:o?"visible":"hidden",children:(0,a.jsx)(D.G,{icon:O.fV7,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),x||"up"!==n?x||"down"!==n?null:(0,a.jsx)(D.G,{icon:O.m5q,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,a.jsx)(D.G,{icon:O.ytF,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,a.jsx)(c.k,{width:1}),(0,a.jsx)(e5.x,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:x?"gray.800":"gray.600",px:2,children:x?h:"down"===n?"End of presentation":"Start of presentation"})]})})});u$.displayName="PeekCardTab";let u0=()=>{let[e,t]=(0,g.useState)(["",[],{}]),n=(0,F.qr)();return(0,g.useEffect)(()=>n.subscribe(()=>{let e=n.getState(),i=(0,W.X9)(e),r=(0,W.i2)(e)||"",s=i.parents[r]||[],o={};Object.keys(i.tree).forEach(e=>{let t=[],n=e=>{Object.keys(e).forEach(i=>{t.push(i),n(e[i])})};n(i.tree[e]),o[e]=t}),t([r,s,o])}),[n]),e},u1=()=>{let[e,t,n]=u0(),i=Object.keys(n);return(0,a.jsx)(ej.U,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:e?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:i.map((r,s)=>{let o=[...t,e][0],l=i.indexOf(o),c=n[o],d=0,u=100;return e&&c&&-1===i.indexOf(e)&&(d=(c.indexOf(e)+1)/c.length*100,u=1/c.length*100),(0,a.jsx)(u3,{cardId:r,state:s===l?"current":s<=l?"prev":"next",percent:d,unit:u},r)})})},u2="var(--chakra-colors-trueblue-200)",u5="var(--chakra-colors-trueblue-100)",u3=e=>{let{cardId:t,state:n,percent:i,unit:r}=e,s="linear-gradient(to right, ".concat(u2," 0% ").concat(i,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(i,"% ").concat(i+r,"%, ").concat(u5," ").concat(i+r,"% 100%)");return(0,a.jsx)(c.k,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===n?s:"prev"===n?u2:u5},t)},u4=(0,il.ZP)("Esc"),u6=e=>{let{editor:t,showNavigationControls:n}=e,[i,r]=(0,g.useState)(null),s=(0,j.v9)(W.JA),o=(0,g.useRef)(s),l=(0,j.I0)(),d=(0,tq.Br)("edit"),u=(0,cs.y)("presentModeCursor"),h=(0,uL.tE)({enabled:!s,setActiveKey:r});uR(t);let{menuRef:p,isPresentModeMenuOpen:m,onPresentModeMenuClose:f,menuRootStyles:v,clearPositioning:C}=uP({editor:t,enabled:!0});return(0,g.useEffect)(()=>(l((0,W.e)({isEditingInSlideView:!1})),()=>{l((0,W.e)({isEditingInSlideView:!1}))}),[l]),o.current=s,(0,g.useEffect)(()=>el.F7.on("keydown","SLIDE_VIEW",e=>!!(o.current&&u4(e))&&(l((0,W.e)({isEditingInSlideView:!1})),e.preventDefault(),!0)),[l]),(0,nd.us)(),(0,cr.O)({ref:p,enabled:m,handler(e){e instanceof MouseEvent&&2!==e.button&&f()}}),(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(uU,{ref:p,editor:t,readOnly:!d,isOpen:m,onClose:f,clearPositioning:C,rootStyles:v}),(0,a.jsx)(uX,{editor:t}),(0,a.jsx)(u1,{}),(0,a.jsx)(c.k,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,a.jsxs)(c.k,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:s?1:0,pointerEvents:s?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:s?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,a.jsx)(e5.x,{size:"sm",mr:3,children:(0,a.jsx)(x.cC,{id:"DjD/sG"})}),(0,a.jsx)(ev.z,{size:"sm",variant:"solid",onClick:()=>l((0,W.e)({isEditingInSlideView:!1})),children:(0,a.jsx)(x.cC,{id:"DPfwMq"})})]})}),u&&(0,a.jsx)(u_,{editor:t}),n&&(0,a.jsx)(uL.nP,{activeKey:i,spotlightingByBlock:h})]})};var u8=n(50423),u9=n(61836);let u7=t0.S.filmstrip,he=t0.S.filmstrip-1,ht={duration:.25,delay:.75},hn={duration:.25},hi="filmstrip-root",hr=".".concat(hi),hs="filmstrip-scroller",ho=".".concat(hs),hl=g.createContext({state:{navItemPreviewRefMap:{}},setNavItemPreviewRef:()=>{throw Error("context not initialized")}}),ha=e=>{let{children:t}=e,[n,i]=(0,g.useState)({navItemPreviewRefMap:{}}),r=(0,g.useMemo)(()=>{let e=[],t=null,r=()=>{let r;t=null;let s={...n.navItemPreviewRefMap},o=!1;for(;r=e.shift();){let[e,t]=r;s[e]!==t&&(s[e]=t,o=!0)}o&&i(e=>({...e,navItemPreviewRefMap:s}))},s=()=>{t&&(clearTimeout(t),t=null)};return(n,i)=>{s(),e.push([n,i]),t=setTimeout(r,0)}},[n.navItemPreviewRefMap]);return(0,a.jsx)(hl.Provider,{value:{state:n,setNavItemPreviewRef:r},children:t})};function hc(){return(0,g.useContext)(hl)}var hd=n(9340);let hu=(0,g.createContext)(null);var hh=n(3105),hx=n(44866),hp=n(65339);let hm=(0,g.forwardRef)(function({children:e,as:t="ul",axis:n="y",onReorder:i,values:r,...s},o){let l=(0,hh.h)(()=>(0,lH.E)(t)),a=[],c=(0,g.useRef)(!1);return(0,hd.k)(!!r,"Reorder.Group must be provided a values prop"),(0,g.useEffect)(()=>{c.current=!1}),g.createElement(l,{...s,ref:o},g.createElement(hu.Provider,{value:{axis:n,registerItem:(e,t)=>{t&&-1===a.findIndex(t=>e===t.value)&&(a.push({value:e,layout:t[n]}),a.sort(hg))},updateOrder:(e,t,n)=>{if(c.current)return;let s=function(e,t,n,i){if(!i)return e;let r=e.findIndex(e=>e.value===t);if(-1===r)return e;let s=i>0?1:-1,o=e[r+s];if(!o)return e;let l=e[r],a=o.layout,c=(0,hp.C)(a.min,a.max,.5);return 1===s&&l.layout.max+n>c||-1===s&&l.layout.min+n<c?(0,hx.uo)(e,r,r+s):e}(a,e,t,n);a!==s&&(c.current=!0,i(s.map(hf).filter(e=>-1!==r.indexOf(e))))}}},e))});function hf(e){return e.value}function hg(e,t){return e.layout.min-t.layout.min}var hj=n(40226),hv=n(60976);function hC(e){let t=(0,hh.h)(()=>(0,hj.B)(e)),{isStatic:n}=(0,g.useContext)(hv._);if(n){let[,n]=(0,g.useState)(e);(0,g.useEffect)(()=>t.on("change",n),[])}return t}var hb=n(83972);let hy=e=>"object"==typeof e&&e.mix,hk=e=>hy(e)?e.mix:void 0;var hw=n(23617),hS=n(58387);function hE(e,t){let n=(0,hh.h)(()=>[]);return function(e,t){var n,i;let r=hC(t()),s=()=>r.set(t());return s(),n=()=>hS.Z_.update(s,!1,!0),i=()=>hS.qY.update(s),(0,hw.L)(()=>{let t=e.map(e=>e.on("change",n));return()=>{t.forEach(e=>e()),i()}}),r}(e,()=>{n.length=0;let i=e.length;for(let t=0;t<i;t++)n[t]=e[t].get();return t(n)})}var hI=n(15815);function hA(e,t=0){return(0,hI.i)(e)?e:hC(t)}let hT={Group:hm,Item:(0,g.forwardRef)(function({children:e,style:t={},value:n,as:i="li",onDrag:r,layout:s=!0,...o},l){let a=(0,hh.h)(()=>(0,lH.E)(i)),c=(0,g.useContext)(hu),d={x:hA(t.x),y:hA(t.y)},u=function(e,t,n,i){let r="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),n=t?0:-1,i=e[0+n],r=e[1+n],s=e[2+n],o=e[3+n],l=(0,hb.s)(r,s,{mixer:hk(s[0]),...o});return t?l(i):l}(t,void 0,void 0);return Array.isArray(e)?hE(e,r):hE([e],([e])=>r(e))}([d.x,d.y],([e,t])=>e||t?1:"unset"),h=(0,g.useRef)(null);(0,hd.k)(!!c,"Reorder.Item must be a child of Reorder.Group");let{axis:x,registerItem:p,updateOrder:m}=c;return(0,g.useEffect)(()=>{p(n,h.current)},[c]),g.createElement(a,{drag:x,...o,dragSnapToOrigin:!0,style:{...t,x:d.x,y:d.y,zIndex:u},layout:s,onDrag:(e,t)=>{let{velocity:i}=t;i[x]&&m(n,d[x].get(),i[x]),r&&r(e,t)},onLayoutMeasure:e=>{h.current=e},ref:l},e)})};var h_=n(67154),hO=n(48380);let hD=e=>{let{content:t,selection:n}=(0,h_.i)(e),i=!!(null==t?void 0:t.content),r=(0,g.useMemo)(()=>{var e;if(!i)return[];let n=t.content,r=(null==n?void 0:n[0].content)||[],s=null===(e=t.content)||void 0===e?void 0:e[0].attrs;return r.map(e=>{var t;return s&&(null===(t=e.attrs)||void 0===t?void 0:t.id)?{cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"}:null}).filter(e=>null!==e)},[t,i]),s=(0,F.CG)(hO.ZD,(e,t)=>tt()(e,t)).map(e=>r.find(t=>t.cardId===e.cardId)?{...e}:null).filter(e=>null!==e),o=(0,F.CG)(hO.Ae);return{isDragging:o,cards:o?s:r,editorContent:t,selection:n,isLoaded:i}},hR=e=>({backgroundColor:e?"gray.700":"gray.200",activeButtonColor:e?"gray.50":"trueblue.500",inactiveButtonColor:e?"gray.50":"gray.900",closeButtonColorScheme:e?"gray":"blackAlpha"}),hP=e=>{let{onClose:t,isDark:n,viewPreference:i,setViewPreference:r}=e,s="list"===i,{activeButtonColor:o,inactiveButtonColor:l,backgroundColor:d,closeButtonColorScheme:u}=hR(n),h=(0,eM.z$)(),m=(0,g.useCallback)(e=>()=>{r(e),null==h||h.track(eM.AA.FILMSTRIP_TOGGLE_VIEW,{view:e})},[h,r]);return(0,a.jsxs)(c.k,{p:"8px",pb:"2px",children:[(0,a.jsxs)(ej.U,{spacing:0,bg:d,p:.5,borderRadius:"md",children:[(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"Rv+zkJ"}),children:(0,a.jsx)(ev.z,{size:"xs",variant:s?"ghost":"plain",color:s?l:o,onClick:m("film"),"data-testid":"filmstrip-view-button",children:(0,a.jsx)(ej.U,{children:(0,a.jsx)(D.G,{icon:O.CjD})})})}),(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"5NZpX8"}),children:(0,a.jsx)(ev.z,{size:"xs",variant:s?"plain":"ghost",color:s?o:l,onClick:m("list"),"data-testid":"list-view-button",children:(0,a.jsx)(ej.U,{children:(0,a.jsx)(D.G,{icon:O.Zrf})})})})]}),(0,a.jsx)(eb.kH,{label:(0,a.jsx)(x.cC,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,a.jsx)(A.h,{variant:"ghost","aria-label":p.ag._({id:"C8DFL7"}),"data-testid":"close-filmstrip-button",colorScheme:u,isRound:!0,size:"xs",icon:(0,a.jsx)(D.G,{icon:O.g82}),outlineOffset:"0px",marginInlineStart:"auto",onClick:e=>{e.stopPropagation(),t()},onMouseDown:cd.br})})]})};var hL=n(29803),hz=n(8839),hG=n(38564),hN=n(56143),hM=n(25779),hU=n(50381),hF=n.n(hU),hW=n(9850),hH=n.n(hW),hq=n(39198),hB=n(68498),hV=n(66490),hK=n(46577),hY=n(48972),hZ=n(65277),hJ=n(51161);let hX=(e,t)=>{let n=hG.Gk.getState(e.state).undoManager,i=n.undoStack[n.undoStack.length-1];i&&i.meta.set("filmstripState",t)},hQ=e=>{let t=(0,F.CG)(tG.wg),n=(0,F.CG)(tG.zq),i=(0,F.TL)(),r=(0,F.qr)(),s=(0,iL.p)(),o=(0,g.useCallback)(n=>{var i;if(!e)return;let r=(0,eB.Lz)(e,t);if(!r.length)return;let o=nS.HY.from(r),l=(0,hY.G8)(o,e.schema);if(!l){s({title:n?(0,a.jsx)(x.cC,{id:"33a+2Q"}):(0,a.jsx)(x.cC,{id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}null===(i=document.getSelection())||void 0===i||i.removeAllRanges(),hF()(l,{format:"text/html"});let c=hV.Z.getState(e.state);c&&!n&&c.clearCutData(),s({title:n?(0,a.jsx)(x.cC,{id:"VG4BD6",values:{0:r.length,1:r.length}}):(0,a.jsx)(x.cC,{id:"GtH+14",values:{0:r.length,1:r.length}}),status:"success",duration:3e3,position:"top"})},[e,t,s]),l=(0,g.useCallback)(()=>{o(!1)},[o]),c=(0,g.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return;let r=(0,tG.ym)((0,F.bh)().getState());i((0,tG.jf)()),e.commands.deleteCardsById(t,n),hX(e,r)},[i,e,t]),d=(0,g.useCallback)(()=>{if(!e||0===t.length)return;let n="";if(1===t.length){let i=(0,eB.Bw)(e,t[0]);i&&(n=(0,hM.getCardTitle)(i.node.toJSON())||"")}c();let i=n?'"'.concat(n,'"'):p.ag._({id:"FyJPFh"}),r=s({title:(0,a.jsxs)(ej.U,{children:[(0,a.jsx)(e5.x,{noOfLines:1,children:(0,a.jsx)(x.cC,{id:"OJTPnC",values:{displayTitle:i,0:t.length,1:t.length}})}),(0,a.jsx)(rI.r,{textDecoration:"underline",onClick:()=>{(0,hN.Yw)(e.state),s.close(r)},children:(0,a.jsx)(x.cC,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})},[c,e,t,s]),u=(0,g.useCallback)(()=>{0!==t.length&&(o(!0),c(!0))},[c,o,t]),h=(0,g.useCallback)(()=>{if(!e||0===t.length)return;let r=(0,eB.Lz)(e,t);if(r.length){let t=(0,eB.Bw)(e,n),o=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,l=r.map(e=>(0,eO.hs)(hH()(e.toJSON()))).map(e=>(0,hK.Zs)(e)),c=(0,tG.ym)((0,F.bh)().getState());e.chain().insertContentAt(o,l,{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,hJ.t)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),t.setMeta(hZ.q,!0),t.setMeta(hB.k,!0),!0}).scrollIntoView().run(),hX(e,c),i((0,tG.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:l.length})),s({title:(0,a.jsx)(x.cC,{id:"ClnFsQ",values:{0:r.length,1:r.length}}),status:"success",duration:3e3,position:"top"})}},[i,e,n,s,t]);return{handleAddCard:(0,g.useCallback)(()=>{if(!e)return;let t=(0,tG.zq)((0,F.bh)().getState()),n=(0,eB.Bw)(e,t);if(!n)return;let{pos:r}=n,s=e.view.state.doc.nodeAt(r);if(!s){console.error("[Filmstrip] Cannot append card. Node unknown");return}let o=r+s.nodeSize,l=(0,hq.e1)().blankCard;(0,hq.ZT)({key:"blankCard",nodeName:"card"},tx.fe.FILMSTRIP_CARD_MENU);let a=(0,tG.ym)((0,F.bh)().getState());e.chain().insertContentAt(o,(0,hK.Zs)(l),{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,hJ.t)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),t.setMeta(hZ.q,!0),t.setMeta(hB.k,!0),!0}).scrollIntoView().run(),hX(e,a),i((0,tG.xi)({beforeCardId:null==n?void 0:n.node.attrs.id,cardCount:1}))},[i,e]),handleCopy:l,handleCut:u,handleDelete:d,handleDuplicate:h,handleExport:(0,g.useCallback)(()=>{if(!e||0===t.length)return;let n=(0,W.pN)(r.getState()),i=t.map(e=>(n.indexOf(e)+1).toString());oJ.T.emit("openSharePanel",{view:"export",options:{cardRangesInput:i.join(",")}})},[e,t,r])}},h$=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...s}=e;return r?null:(0,a.jsx)(rW.s,{icon:n,onClick:i,...s,children:t})},h0=(0,g.memo)(e=>{let{isDark:t}=e;return(0,a.jsxs)(d.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,a.jsx)(D.G,{fixedWidth:!0,icon:O.lCX}),(0,a.jsx)(D.G,{icon:e4.diR,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,a.jsx)(D.G,{icon:e4.diR,transform:"shrink-7 right-6 down-4"}),(0,a.jsx)(D.G,{icon:e4.r8p,color:t?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",transform:"shrink-10 right-6 down-4"})]})});h0.displayName="AddCardIcon";let h1=(e,t)=>{if(0===e.length||!t)return null;if(1===e.length){let n=(0,eB.Bw)(t,e[0]);return n?(0,l3.getCardTitle)(n.node.toJSON())||"Untitled card":null}return"Multiple cards selected"},h2=(0,g.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:s,clearPositioning:o,rootStyles:l,isDark:c}=e,d=(0,F.CG)(W.yx),u=(0,iL.p)(),h=(0,y.ye)("exportCardRange"),{handleCopy:m,handleDelete:f,handleCut:j,handleDuplicate:v,handleAddCard:C,handleExport:b}=hQ(n),k=(0,F.CG)(tG.wg),w=1===k.length,S=(0,g.useMemo)(()=>w?(0,ew.gq)({cardId:k[0],docId:null==d?void 0:d.id,isPresentMode:!1}):"",[null==d?void 0:d.id,w,k]),{onCopy:E}=(0,iz.V)(S),I=(0,g.useCallback)(()=>{E(),u({title:(0,a.jsx)(x.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[E,u]),A=(0,hz.K)(),T=(0,g.useMemo)(()=>h1(k,n),[n,k]),_=(0,g.useMemo)(()=>c?{"--menu-bg":"var(--chakra-colors-gray-900)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-800)"}}:{},[c]);return(0,a.jsx)(t4.v,{isOpen:i,onClose:r,children:(0,a.jsxs)(t8.q,{className:"filmstrip-card-menu",onContextMenu:e=>{e.preventDefault()},zIndex:"popover",ref:t,rootProps:{style:l},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||o()},children:[T&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e5.x,{pl:3,color:c?"gray.400":"gray.600",noOfLines:1,"data-testid":"filmstrip-card-menu-card-title",children:T}),(0,a.jsx)(ne.R,{})]}),(0,a.jsx)(h$,{"data-testid":"filmstrip-card-menu-item-cut",shouldHide:s,command:(0,eb.cE)("Mod+X"),icon:(0,a.jsx)(D.G,{fixedWidth:!0,icon:O.EQg}),onClick:j,children:(0,a.jsx)(x.cC,{id:"cCd8Bs"})}),(0,a.jsx)(h$,{"data-testid":"filmstrip-card-menu-item-copy",shouldHide:s,command:(0,eb.cE)("Mod+C"),icon:(0,a.jsx)(D.G,{fixedWidth:!0,icon:O.kZ_}),onClick:m,children:(0,a.jsx)(x.cC,{id:"he3ygx"})}),(0,a.jsx)(h$,{"data-testid":"filmstrip-card-menu-item-duplicate",shouldHide:s,command:(0,eb.cE)("Mod+D"),icon:(0,a.jsx)(D.G,{fixedWidth:!0,icon:O.WM4}),onClick:v,children:(0,a.jsx)(x.cC,{id:"euc6Ns"})}),(0,a.jsx)(h$,{"data-testid":"filmstrip-card-menu-item-add-card",shouldHide:s,icon:(0,a.jsx)(h0,{isDark:c}),onClick:C,sx:_,children:(0,a.jsx)(x.cC,{id:"90n2YU"})}),h&&(0,a.jsx)(h$,{"data-testid":"filmstrip-card-menu-item-export-card",shouldHide:s,icon:(0,a.jsx)(D.G,{fixedWidth:!0,icon:O.kwI}),onClick:b,sx:_,children:1===k.length?p.ag._({id:"xRJ+bN"}):p.ag._({id:"eMDlJX",values:{0:k.length}})}),!s&&(0,a.jsx)(ne.R,{}),(0,a.jsx)(h$,{"data-testid":"filmstrip-card-menu-item-copy-link",shouldHide:!w,icon:(0,a.jsx)(hL.x,{isLocked:!A,isDark:c}),onClick:I,children:(0,a.jsx)(x.cC,{id:"F0YmUY"})}),(0,a.jsx)(h$,{"data-testid":"filmstrip-card-menu-item-delete",color:c?"red.300":"red.500",icon:(0,a.jsx)(D.G,{icon:O.XAH,fixedWidth:!0}),onClick:f,shouldHide:s,children:(0,a.jsx)(x.cC,{id:"cnGeoo"})})]})})});h2.displayName="FilmstripCardMenuComponent";let h5=(0,g.memo)(h2);var h3=n(58763);let h4=(0,lH.E)(d.xu),h6=e=>{let{isEditorFocused:t,isFilmstripSelected:n,shouldHide:i,cardId:r,isDraggingCard:s,isDragInProgress:o,index:l}=e;return(0,a.jsxs)(c.k,{boxShadow:n?"var(--fs-item-selected-box-shadow)":t?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:i?"none":void 0,children:[(0,a.jsx)(h8,{shouldFixHeight:!i&&o,cardId:r}),(0,a.jsx)(lq.M,{children:!i&&!s&&(0,a.jsx)(h4,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,left:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,a.jsx)(e5.x,{children:l})},l)})]})},h8=e=>{let{cardId:t,shouldFixHeight:n}=e,{setNavItemPreviewRef:i}=hc(),r=(0,F.CG)(W.Pu),s=(0,h3.J)(r,!1),o=(0,g.useRef)(null);return(0,g.useEffect)(()=>{o.current&&(n?o.current.style.height="".concat(o.current.offsetHeight,"px"):o.current.style.height="")},[n]),(0,a.jsx)(c.k,{ref:o,className:"filmstrip-nav-item-wrapper",sx:nD.n,css:{"--editor-font-size":"calc(var(--editor-width) / ".concat(tW.DB,")"),"--thumbnail-min-height":"calc(var(--editor-width) * 0.4)"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",bg:"gray.100",minH:"var(--thumbnail-min-height)",maxH:"calc(var(--editor-width) * 1.5)",w:"var(--editor-width)",children:(0,a.jsx)("div",{className:"ProseMirror",children:(0,a.jsx)(c.k,{className:"doc-content-wrapper",direction:"column",align:"center",sx:s,inert:"true",children:(0,a.jsx)("div",{style:{width:"100%"},ref:e=>{e&&i(t,e)}})})})})},h9=e=>{let{cardId:t,index:n,isEditorFocused:i,isFilmstripSelected:r,editor:s}=e,{title:o}=(0,tn.T)({cardId:t,editor:s});return(0,a.jsxs)(c.k,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:r?"var(--fs-text-item-selected-box-shadow)":i?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:r?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:"none"},".filmstrip-text-drag-handle":{display:"block"}},children:[(0,a.jsxs)(c.k,{alignItems:"center",bg:r?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,a.jsx)(d.xu,{className:"filmstrip-text-item-number",w:6,fontSize:n>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:n}),(0,a.jsx)(d.xu,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:"grab"},children:(0,a.jsx)(D.G,{icon:O.Okg})})]}),(0,a.jsx)(c.k,{"data-testid":"filmstrip-text-item-title",p:2,pl:"4px",flex:1,bg:r?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",inert:"true",children:(0,a.jsx)(e5.x,{noOfLines:1,children:o||(0,a.jsx)(x.cC,{id:"wja8aL"})})})]})},h7=e=>{let{filmstripItemRef:t,cardId:n,isFilmstripSelected:i,currentFocusedCard:r,isAnimating:s}=e,{editor:o}=(0,e0._)(),l=(0,eq.As)("filmstrip"),a=(0,F.CG)(tG.DM);(0,g.useEffect)(()=>{t.current&&n===r&&((null==o?void 0:o.isFocused)&&!s?l.scrollElementIntoView({element:t.current,offsetFromTop:120}):i&&n===a&&requestAnimationFrame(()=>{if(!t.current||!l.scroller)return;let e=l.scroller.getBoundingClientRect(),n=t.current.getBoundingClientRect(),i=n.top,r=n.bottom,s=n.height,o=0,a=t.current.closest(".reorder-item");if(a instanceof HTMLElement&&(o=a.offsetTop),r>=e.bottom){let e=Math.max(0,o+s-l.scroller.clientHeight+4);l.scrollTo({top:e})}else i<=e.top&&l.scrollTo({top:o})}))},[n,r,o,a,i,l,t,s])},xe=(0,lH.E)(c.k),xt=e=>{let{card:t,index:n,isFirst:i,isEditorFocused:r,currentFocusedCard:s,isFilmstripSelected:o,readOnly:l,shouldHide:c,isDragInProgress:u,numberOfCardsDragging:h,onContextClick:x,editor:p,isAnimating:m,showTextOnly:f}=e,{cardId:j,isDragging:v}=t,C=(0,g.useRef)(null);h7({filmstripItemRef:C,cardId:j,isFilmstripSelected:o,currentFocusedCard:s,isAnimating:m});let b=(0,F.TL)(),{previewWidth:y}=tH(),k=(0,g.useCallback)(e=>{if(!j)return;let t=e.shiftKey,n=!t&&(e.metaKey||e.ctrlKey);if(t&&!l)b((0,tG.YC)({id:j,currentFocusedCard:s}));else if(n&&!l)b((0,tG.sY)({id:j}));else{if(u)return;b((0,tG.Ti)({id:j})),b((0,W.Qx)({attached:!1})),p&&(0,to.YS)({cardId:j,editor:p})}},[j,l,b,s,u,p]);return(0,a.jsxs)(d.xu,{className:"filmstrip-item",ref:C,pos:"relative",pt:f?void 0:1,mt:f?1.5:i?void 0:1,onClick:k,onContextMenu:x,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:c?"none":void 0,"data-filmstrip-selected":o,"data-filmstrip-view":f?"list":"filmstrip",css:{"--editor-width":"".concat(y,"px")},children:[f&&(0,a.jsx)(h9,{cardId:j,index:n,isFilmstripSelected:o,isEditorFocused:r,editor:p}),(0,a.jsx)(h6,{shouldHide:c||f,cardId:j,index:n,isDraggingCard:v,isDragInProgress:u,isFilmstripSelected:o,isEditorFocused:r}),(0,a.jsx)(lq.M,{children:h&&(0,a.jsx)(d.xu,{position:"absolute",bottom:0,left:0,transform:"translate(-50%, 50%)",children:(0,a.jsx)(xe,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,a.jsx)(e5.x,{children:h})},"badge-number")})})]})};var xn=n(28316),xi=n(34584),xr=n(3939),xs=n(27210),xo=n(82098);let xl=(0,g.forwardRef)(function(e,t){let{reduxData:n,...i}=e,r=(0,xo.c)(n);return(0,a.jsx)(j.zt,{store:r,children:(0,a.jsx)(xa,{ref:t,...i})})}),xa=(0,g.forwardRef)(function(e,t){let{parent:n,theme:i,portalComponent:r,parentIsStreaming:s}=e,o=(0,g.useMemo)(()=>(0,t_.y)(),[]),l=(0,F.TL)();(0,g.useEffect)(()=>{l((0,W.Dc)({theme:i||null})),l((0,W.iS)({isAllowedToEdit:!1})),l((0,W.Nr)({animationsEnabled:!1}))},[i,l]);let c=(0,xs.jE)({extensions:o,content:n.getJSON(),editable:!1});return t&&("function"==typeof t?t(c):t.current=c),c.isThumbnail=!0,(0,g.useEffect)(()=>{var e,t,i;let r=n.getJSON();if(!r||!c)return;let s=null===(t=n.state.selection)||void 0===t?void 0:null===(e=t.ranges)||void 0===e?void 0:e[0];c.commands.setContent(r),s&&c.commands.setTextSelection({from:s.$from.pos,to:s.$to.pos}),c.commands.command(()=>((0,r1.E0)(c.state.doc,l),!0)),null===(i=xi.S.getState(c.state))||void 0===i||i.compute(c.state.doc).processChanges(l)},[n,c,l]),(0,hB.M)({sourceEditor:n,targetEditor:c,isStreaming:s}),(0,a.jsx)(d.xu,{className:"editor-preview-root","data-variation-preview":!0,"data-testid":"editor-preview-root",width:"100px",position:"relative",sx:xr.Y,children:(0,a.jsx)(xs.kg,{editor:c,portalComponent:r,style:{width:"100%",height:"100%"},className:"highlight-mask"})})}),xc=(0,g.memo)(e=>{let{content:t,theme:n}=e,[i,r]=(0,g.useState)(!1);return((0,g.useEffect)(()=>{requestAnimationFrame(()=>{r(!0)})},[]),i)?(0,a.jsx)(nD.m,{theme:n,content:t,isThumbnail:!0,portalComponent:xu}):null}),xd=(0,g.memo)((0,g.forwardRef)((e,t)=>{let[n,i]=(0,g.useState)(!1);return((0,g.useEffect)(()=>{requestAnimationFrame(()=>{i(!0)})},[]),n)?(0,a.jsx)(xl,{...e,portalComponent:xu,ref:t}):null}));xd.displayName="TransactionalFilmstripPreviewEditor";let xu=e=>{let{renderers:t}=e,{state:{navItemPreviewRefMap:n}}=hc();return(0,a.jsx)(a.Fragment,{children:Object.entries(t).map(e=>{let[t,i]=e,r=i.props.node;if("document"===r.type.name)return null;let s=(0,a8.KH)(r)?n[r.attrs.id]:null;return xn.createPortal(i.reactElement,s||i.element,t)})})};xc.displayName="FilmstripPreviewEditor";var xh=n(88786);let xx=(0,g.memo)(e=>{let{onClose:t,isDark:n,isResizing:i,setIsResizing:r,side:s}=e,{previewWidth:o}=tH(),l=(0,g.useRef)(null),u=(0,g.useRef)(o),h=(0,g.useRef)(null),x=(0,F.TL)(),p=(0,g.useCallback)(e=>{if(e.preventDefault(),!l.current||!u.current||!h.current)return;let{width:n,x:i}=l.current,r=(e.clientX-i)*("left"===s?1:-1);if(n+r<=30){t();return}let o=uV()(n+r,90,200);o!==u.current&&(u.current=o,h.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(o,"px;\n          }"))},[t,s]),m=(0,xh.Z_)(p,30),f=(0,g.useCallback)(e=>{e.preventDefault(),l.current={x:e.clientX,width:u.current},r(!0);let t=()=>{l.current=null,h.current&&(h.current.innerHTML=""),x((0,tG.lh)({width:u.current})),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",t),requestAnimationFrame(()=>{r(!1)})};document.addEventListener("mousemove",m),document.addEventListener("mouseup",t)},[x,r,m]);return(0,a.jsxs)(c.k,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,insetInlineEnd:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:n?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:f,zIndex:he,children:[(0,a.jsx)("style",{ref:h}),(0,a.jsx)(d.xu,{position:"relative",insetInlineStart:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:i?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});xx.displayName="FilmstripResizer";let xp=e=>({"--fs-item-border-color":e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)","--fs-item-card-number-background-color":e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)","--fs-text-item-card-number-bg-color":e?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)"}),xm=(e,t)=>{if(!e||!t)return{id:null,pos:null};let{$from:n,from:i,to:r}=e,s=null,o=null;return n.doc.nodesBetween(i,r,(e,t)=>{let i=n.doc.resolve(t).depth;return!(!s&&(0,eB.KH)(e))||1!==i||(s=e.attrs.id,o=t,!1)}),{id:s,pos:o}},xf=()=>{var e;return!!(null===(e=document.activeElement)||void 0===e?void 0:e.closest(hr))},xg=()=>{let e=(0,g.useRef)(null),[t,n]=(0,g.useState)(!1),[i,r]=(0,g.useState)([0,0]),[s,o]=(0,g.useState)("bottom"),l=(0,F.TL)(),a=(0,g.useCallback)(()=>{n(!1)},[]),c=(0,g.useCallback)(()=>{r([0,0]),o("bottom")},[]),d=(0,g.useCallback)(e=>{n(!0),r(e)},[]),u=(0,g.useCallback)(t=>n=>{var i;n.preventDefault(),l((0,tG.uu)({id:t})),d([n.clientX,n.clientY]);let r=null===(i=e.current)||void 0===i?void 0:i.offsetHeight;if(null==r)return;let s=window.innerHeight<n.clientY+r,a=n.clientY<r;s&&!a?o("top"):s&&a?o("center"):o("bottom")},[l,e,d]),h=(0,g.useMemo)(()=>{var t;let n=i[1],r=null===(t=e.current)||void 0===t?void 0:t.offsetHeight,o=r?window.innerHeight-(n+r+8):void 0,l="center"===s&&o?"translateY(".concat(o,"px)"):"top"===s?"translateY(-100%)":void 0;return{left:i[0],top:i[1],transform:l,transformOrigin:"top"}},[s,i]);return{menuRef:e,isFilmstripCardMenuOpen:t,onFilmstripCardMenuClose:a,handleContextMenu:u,menuRootStyles:h,clearPositioning:c}},xj=eT()(to.YS,200),xv=e=>{let{isFocused:t,readOnly:n,firstFocusedCardId:i,editor:r,isDragging:s}=e,{handleCopy:o,handleDelete:l,handleCut:a,handleDuplicate:c}=hQ(r),d=(0,F.TL)(),u=(0,F.qr)();(0,g.useEffect)(()=>u9.F7.on("keydown","FILMSTRIP",e=>{if(!t)return!1;switch(e.key){case"Escape":if(s)return d((0,hO.vL)()),!0;return!1;case"Backspace":case"Delete":if(!n)return l(),!0;return!1;case"a":case"A":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d((0,tG.td)({currentFocusedCard:i})),!0;return!1;case"c":case"C":if(!n&&(e.ctrlKey||e.metaKey))return o(),!0;return!1;case"d":case"D":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),c(),!0;return!1;case"x":case"X":if(!n&&(e.ctrlKey||e.metaKey))return a(),!0;return!1;case"ArrowDown":{d((0,tG.ut)({direction:"down",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,tG.wg)(u.getState())[0];return!e.shiftKey&&r&&t&&(xj({cardId:t,editor:r}),d((0,W.Qx)({attached:!1}))),!0}case"ArrowUp":{d((0,tG.ut)({direction:"up",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,tG.wg)(u.getState())[0];return!e.shiftKey&&r&&t&&(xj({cardId:t,editor:r}),d((0,W.Qx)({attached:!1}))),!0}default:return!1}}),[d,i,t,s,l,o,c,a,n,r,u])};var xC=n(50738);let xb=e=>{let t=(0,F.qr)(),n=(0,iL.p)(),i=(0,F.TL)();(0,g.useEffect)(()=>{let r=r=>{var s;let o=t.getState();if(!e||!xf()||!(0,W.hN)(o))return;let l=null===(s=r.clipboardData)||void 0===s?void 0:s.getData("text/html");if(!l)return;let{content:c}=(0,xC.T)(l,e.schema),d=c.content.filter(e=>(0,a8.KH)(e));if(d.length){let t=(0,eB.Bw)(e,(0,tG.zq)(o)),s=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,l=d.map(e=>(0,eO.hs)(hH()(e.toJSON()))).map(e=>(0,hK.Zs)(e)),c=(0,tG.ym)((0,F.bh)().getState());e.chain().insertContentAt(s,l,{updateSelection:!1}).command(e=>{let{tr:t}=e;t.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:s});let n=(0,hJ.t)(t.doc.resolve(s));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),r.preventDefault(),hX(e,c),i((0,tG.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:l.length})),n({title:(0,a.jsx)(x.cC,{id:"3viq5b",values:{0:d.length,1:d.length}}),status:"success",duration:3e3,position:"top"})}};return document.addEventListener("paste",r),()=>{document.removeEventListener("paste",r)}},[i,e,t,n])};class xy{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,t){this.componentControls.forEach(n=>{n.start(e.nativeEvent||e,t)})}}let xk=()=>new xy,xw=()=>{let e=(0,hh.h)(xk),t=(0,g.useRef)(null),n=(0,g.useRef)(),i=(0,g.useRef)(),r=(0,g.useRef)(),s=(0,g.useCallback)(e=>{if(!r.current)return;let t=xE(r.current),s=e.target;if(!t||!s||void 0===n.current||void 0===i.current)return;let o=s.scrollTop-n.current.top;t.y=i.current-o},[]),o=(0,g.useCallback)((e,i)=>{var r,s;let o=t.current;if(!o)return;let l=o.getBoundingClientRect(),a=i.point.y,c=e.target;if(!(c instanceof Element))return;let d=c.closest("[draggable]"),u=null==d?void 0:d.parentElement;u&&(a<l.top+25&&(d!==u.firstElementChild||o.scrollTop>0)?o.scrollTop-=5:a>l.bottom-25&&o.scrollTop+l.height<(null!==(s=null===(r=n.current)||void 0===r?void 0:r.height)&&void 0!==s?s:o.scrollHeight)&&(o.scrollTop+=5))},[]),l=(0,g.useCallback)(()=>{let s=t.current,o=xS(e);if(!s||!o)return;r.current=o,n.current={top:s.scrollTop,height:s.scrollHeight};let l=xE(o);l&&(i.current=l.y)},[e]);return{scrollerRef:t,onScroll:s,dragControls:e,onDrag:o,onDragStart:l,onDragEnd:(0,g.useCallback)(()=>{n.current=void 0,i.current=void 0,r.current=void 0},[])}},xS=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){console.error("[caught] findDraggingElementControls",e);return}},xE=e=>{try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}},xI=(0,lH.E)(c.k),xA=(0,lH.E)(d.xu),xT="data-".concat(tq.dh),x_=(e,t)=>({initial:{x:e*("left"===t?-1:1)+("left"===t?-16:16)},animate:{x:0,transition:ht},exit:{x:e*("left"===t?-1:1),transition:hn}}),xO=e=>{let{onClose:t,editor:n,readOnly:i,side:r}=e,[s,o]=(0,g.useState)(null),[l,u]=(0,g.useState)(!1),[h,x]=(0,H.I)(q.H.filmstripViewPreference,"film"),p=(0,y.ye)("transactionalFilmstrip"),m=(0,g.useRef)(null),f=(0,F.CG)((0,iF.Sj)(null==n?void 0:n.gammaDocId)),{cards:j,editorContent:v,isDragging:C,selection:b,isLoaded:k}=hD(p?null!=s?s:void 0:n),{id:w}=(0,g.useMemo)(()=>xm(b,n),[n,b]),S=(0,F.TL)(),E=(0,F.CG)(tG.wg),I=(0,F.CG)(hO.pe),A=(0,F.CG)(hO.u9),T=(0,F.CG)(hO.K3),[_,O]=(0,g.useState)(!1),{menuRef:D,isFilmstripCardMenuOpen:R,onFilmstripCardMenuClose:P,clearPositioning:L,handleContextMenu:z,menuRootStyles:G}=xg(),N=(0,g.useCallback)(()=>{if(P(),l){var e;null===(e=m.current)||void 0===e||e.focus()}},[l,P]),{scrollerRef:M,onScroll:U,dragControls:B,onDrag:V,onDragStart:K,onDragEnd:Y}=xw(),Z=(0,g.useCallback)(e=>()=>{if(O(!0),K(),M.current){let e=M.current.getBoundingClientRect().height;M.current.style.height="".concat(e,"px")}let t=E.includes(e)?E:[e];S((0,tG.WF)({selectedCardIdsToDrag:t})),S((0,hO.CA)({cardIds:j.map(e=>e.cardId),leaderCardId:e,selectedCardIds:t}))},[j,S,E,K,M]),J=(0,g.useCallback)(()=>{n&&(n.commands.rearrangeCardsById(j.map(e=>e.cardId),A),S((0,hO.vL)()),Y())},[j,S,n,A,Y]),X=(0,g.useCallback)(()=>{M.current&&(M.current.style.height=""),O(!1)},[M]);xb(n),xv({isFocused:l,readOnly:i,firstFocusedCardId:w,editor:n,isDragging:C}),(0,cr.O)({ref:m,handler(e){D.current&&D.current.contains(e.target)||(R&&P(),S((0,tG.Mt)()))}});let Q=(0,F.CG)(W.Pu),$=(0,eg.ff)("whiteAlpha.600","whiteAlpha.100"),ee=(0,eg.ff)("#F9FAFBDD","gray.900"),et=(0,eg.ff)("gray.800","gray.200"),en=(0,eg.ff)("blackAlpha.400","whiteAlpha.500"),{colorMode:ei}=(0,eg.If)(),er="dark"===ei,es=(0,g.useMemo)(()=>xp(er),[er]),[eo,el]=(0,g.useState)(!1),{width:ea}=tH(),ec=x_(ea,r),ed=(0,g.useMemo)(()=>{let e=A.length;return C&&e>1?e:null},[C,A.length]),[eu,eh]=(0,g.useState)(!1),ex=(0,eq.As)("filmstrip");(0,g.useEffect)(()=>{ex.setScrollSelector(ho)},[ex]);let ep=(0,tF.WD)(),em=!!ep.src,ef=p?s:n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.k,{pointerEvents:"none",position:"absolute",direction:"column",top:14,bottom:em?"".concat(ep.height+2*ep.paddingY,"px"):2,justifyContent:"center",color:et,insetInlineStart:2,children:[p?n&&(0,a.jsx)(xd,{parent:n,theme:Q,parentIsStreaming:f,ref:o}):(0,a.jsx)(xc,{theme:Q,content:v}),(0,a.jsxs)(d.xu,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:eu?0:1}},maxHeight:"100%",children:[(0,a.jsxs)(xI,{ref:m,"data-guider-highlight":"filmstrip",className:hi,[xT]:!0,pos:"relative",direction:"column",zIndex:u7,...ec,onAnimationStart:()=>{eh(!0)},onAnimationComplete:()=>{eh(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:()=>{u(!0),null==n||n.commands.blur()},onBlur:e=>{var t,n;m.current&&(null===(t=m.current)||void 0===t?void 0:t.contains(e.relatedTarget))||(null===(n=D.current)||void 0===n?void 0:n.contains(e.relatedTarget))||u(!1)},borderRadius:"md",bg:ee,borderWidth:"1px",borderColor:$,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,a.jsx)(hP,{isDark:er,onClose:t,viewPreference:h,setViewPreference:x}),(0,a.jsx)(xA,{className:hs,layoutScroll:!0,overflowY:"auto",position:"relative",sx:{"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:en,borderRadius:"full"},...es},ref:M,onScroll:U,p:"8px",pt:0,children:(0,a.jsx)(hT.Group,{onReorder:e=>{let t=e.map(e=>e.cardId);S((0,hO.k)({reorderedCardIds:t}))},values:j,axis:"y",children:ef&&n&&k&&j.map((e,t)=>{let{cardId:r,displayBehavior:s}=e,o=E.includes(r),l=T===r;return(0,a.jsx)(hT.Item,{drag:!i&&"y",value:e,onDragStart:Z(r),onDragEnd:J,onDragTransitionEnd:X,className:"reorder-item",dragControls:B,transition:{layout:{duration:eo?0:void 0}},onDrag:V,style:{position:"relative",listStyle:"none"},children:(0,a.jsx)(xt,{readOnly:i,editor:ef,card:e,index:C&&void 0!==I[r]?I[r]:t+1,isFirst:0===t,shouldHide:"hidden"===s,isDragInProgress:_,isEditorFocused:w===r&&n.isFocused,isFilmstripSelected:!!o,currentFocusedCard:w,numberOfCardsDragging:l?ed:null,onContextClick:z(r),isAnimating:eu,showTextOnly:"list"===h})},r)})})})]}),(0,a.jsx)(xx,{onClose:t,isDark:er,isResizing:eo,setIsResizing:el,side:r})]})]}),n&&(0,a.jsx)(h5,{ref:D,editor:n,readOnly:i,isOpen:R,onClose:N,clearPositioning:L,rootStyles:G,isDark:er})]})},xD=()=>{let e=(0,F.TL)(),t=(0,F.CG)(tG.GX),n=(0,ed.iq)({base:!1,lg:!0})||!1,[i,r]=(0,g.useState)(!1),[s,o]=(0,g.useState)(!1),l=(0,g.useCallback)(()=>{e((0,tG.dQ)({isOpen:!1})),e((0,tG.Mt)()),o(!0)},[e]),a=(0,g.useCallback)(()=>{n||r(!0),e((0,tG.dQ)({isOpen:!0}))},[n,e]),c=!n&&i;return(0,g.useEffect)(()=>{let t=!n&&!i,r=n&&!s;t?e((0,tG.dQ)({isOpen:!1})):r&&e((0,tG.dQ)({isOpen:!0}))},[e,n,i,s]),{onClose:l,onOpen:a,isOpen:t&&(n||!n&&c)}},xR=(0,lH.E)(ev.z),xP=(0,g.memo)(()=>{let e=(0,eo.E)(),{editor:t}=(0,tw._i)(),{isOpen:n,onClose:i,onOpen:r}=xD(),{isGammaAdminUser:s}=(0,dq.K)(),o=(0,tq.Br)("edit"),l=(0,F.CG)(W.hN),d=(0,ec.Yy)(),[u,h]=(0,g.useState)(!1),p=(0,g.useCallback)(()=>{h(!0),setTimeout(()=>{r()}),setTimeout(()=>{h(!1)},750)},[r]);return(0,g.useEffect)(()=>u9.F7.on("keydown","FILMSTRIP",e=>!!(0,il.ZP)("Mod+\\")(e)&&(n?i():p(),!0)),[n,i,p]),(0,a.jsx)(ha,{children:(0,a.jsx)(eb.Wk,{isDark:d,children:(0,a.jsx)(lq.M,{children:n?(0,a.jsx)(xO,{onClose:i,editor:t,readOnly:!s&&(!o||!l),side:e?"right":"left"},"filmstrip"):(0,a.jsx)(eb.kH,{placement:"top-end",label:(0,a.jsx)(x.cC,{id:"7ShgZt"}),isDisabled:u,shortcut:"Mod+\\",children:(0,a.jsxs)(xR,{initial:{opacity:0},animate:{opacity:1,transition:hn},exit:{opacity:0,transition:ht},zIndex:u7,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",insetInlineStart:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:p,children:[(0,a.jsx)(u8.TX,{children:(0,a.jsx)(x.cC,{id:"7ShgZt"})}),u?(0,a.jsx)(c.k,{children:(0,a.jsx)(tI.$,{size:"sm"})}):(0,a.jsx)(D.G,{icon:O.CjD})]},"filmstrip-opener")})})})})});xP.displayName="Filmstrip";var xL=n(3181),xz=n(13272),xG=n(41098),xN=n(7715),xM=n(6510),xU=n(79385);let xF=[{key:"sm",name:()=>p.ag._({id:"4Revpc"}),buttonText:()=>p.ag._({id:"ZQA8ce"}),description:()=>p.ag._({id:"N0rIpR"})},{key:"md",name:()=>p.ag._({id:"agPptk"}),buttonText:()=>p.ag._({id:"Tmu3kA"}),description:()=>p.ag._({id:"3JV7Yt"})},{key:"lg",name:()=>p.ag._({id:"k7rCa/"}),buttonText:()=>p.ag._({id:"SMwD6s"}),description:()=>p.ag._({id:"edeEjW"})}],xW=e=>{let{fontSize:t,setFontSize:n}=e;return(0,a.jsx)(eC.h,{isAttached:!0,size:"sm",display:"flex",children:xF.map(e=>{let i=e.key===t?"trueblue.100":void 0;return(0,a.jsx)(eb.kH,{label:(0,a.jsx)(eb.X,{label:e.name(),description:e.description()}),placement:"top",children:(0,a.jsx)(ev.z,{"aria-label":e.name(),px:"2.5",boxShadow:"none",variant:"plain",bg:i,onClick:()=>{n(e.key)},children:e.buttonText()})},e.key)})})};var xH=n(11457),xq=n(61652);let xB=e=>{let{hideExtraLines:t}=e;return(0,a.jsxs)(tE.K,{w:"100%",py:2,px:2.5,children:[(0,a.jsx)(d.xu,{w:20,h:1.5,bg:"gray.200"}),(0,a.jsxs)(ej.U,{flex:"1",alignItems:"flex-start",children:[(0,a.jsx)(ap.o,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,a.jsx)(d.xu,{fontSize:"lg",children:(0,a.jsx)(D.G,{icon:O.VmB})})}),(0,a.jsxs)(tE.K,{flex:"1",spacing:"1",children:[(0,a.jsx)(d.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(d.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(d.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(d.xu,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,a.jsx)(d.xu,{w:"80%",h:1,bg:"gray.200"})]})]})]})},xV=e=>{let{cardDimensions:t,showBackdrop:n,isWide:i,label:r,scaleCardUp:s,alignment:o}=e,l={boxShadow:"".concat(n?"sm":""),w:"".concat(i?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(s?"scale(1.15)":"none")};return(0,a.jsxs)(tE.K,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,a.jsx)(c.k,{bg:n?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,a.jsx)(ap.o,{...l,ratio:t.aspectRatio,children:(0,a.jsx)(d.xu,{display:"flex",alignItems:o,style:{alignItems:o},children:(0,a.jsx)(xB,{hideExtraLines:i})})}):(0,a.jsx)(tE.K,{...l,children:(0,a.jsx)(xB,{hideExtraLines:i})})}),(0,a.jsx)(e5.x,{fontSize:"xs",color:"gray.700",children:r})]})};var xK=n(19783);let xY=e=>{let{onClick:t,isSelected:n,icon:i,label:r,description:s,tooltip:o}=e,l=(0,a.jsxs)(tE.K,{cursor:"pointer",onClick:t,p:"1.5",px:"2",alignItems:"center",spacing:"0",bg:n?"trueblue.50":"gray.50",borderWidth:"1px",borderColor:n?"trueblue.500":"gray.200",color:n?"trueblue.500":"black",borderRadius:"md",minW:"100px",justifyContent:"center",children:[(0,a.jsx)(d.xu,{pb:"0",fontSize:"md",children:(0,a.jsx)(D.G,{icon:i})}),(0,a.jsx)(e5.x,{fontSize:"xs",w:"100%",textAlign:"center",noOfLines:1,children:r}),s&&(0,a.jsx)(e5.x,{fontSize:"xs",color:"blackAlpha.600",children:s})]});return o?(0,a.jsx)(xK.u,{label:o,placement:"top",children:l}):(0,a.jsx)(a.Fragment,{children:l})},xZ=e=>{let{styleTemplateKeys:t,selectedStyleTemplateKey:n,onSelectNewStyle:i,onSelectCustomStyle:r}=e;return(0,a.jsxs)(a.Fragment,{children:[t.map(e=>{let t=xq.STYLE_TEMPLATES[e];return(0,a.jsx)(xY,{label:t.label(),icon:t.icon,isSelected:n===e,description:t.cardDimensionsDesc(),tooltip:t.recommendedFor(),onClick:()=>i(e)},e)}),(0,a.jsx)(xY,{label:p.ag._({id:"8Tg/JR"}),icon:O.cRF,isSelected:"custom"===n,onClick:r})]})},xJ=e=>{let{title:t,description:n,icon:i,children:r,value:s,onChange:o}=e;return(0,a.jsxs)(ej.U,{pb:5,children:[i&&(0,a.jsx)(D.G,{icon:i,fixedWidth:!0}),(0,a.jsx)(e5.x,{ml:1,children:t}),n&&(0,a.jsx)(xK.u,{label:n,placement:"top",children:(0,a.jsx)(e5.x,{fontSize:"sm",cursor:"help",color:"gray.400",ml:-1,children:(0,a.jsx)(D.G,{icon:O.sqG})})}),(0,a.jsx)(e3.L,{}),r,o&&(0,a.jsx)(xG.r,{isChecked:s,onChange:e=>o(e.target.checked)})]})},xX=e=>{let{selectedStyleTemplateKey:t,newTemplateKey:n,savedVerticalAlign:i,savedDefaultContentWidth:r,savedFontSize:s,savedScaleContentToFit:o}=e,l=xq.STYLE_TEMPLATES[t],a=xq.STYLE_TEMPLATES[n],c=(null==l?void 0:l.docSettings.cardDimensions)==="fluid";return{...a.docSettings,verticalAlign:c?a.docSettings.verticalAlign:i,defaultContentWidth:c&&"custom"!==t?r:a.docSettings.defaultContentWidth,fontSize:null!=s?s:a.docSettings.fontSize,scaleContentToFit:null!=o?o:a.docSettings.scaleContentToFit}},xQ=e=>{let{updateDocAttribute:t,bulkUpdateDocSettings:n,updateDocSetting:i,editor:r}=e,s=(0,y.ye)("scaleToFit"),o=(0,F.CG)(W.B_),{animationsEnabled:l,defaultContentWidth:c,verticalAlign:u,presentBackdrop:h,fontSize:m,cardDimensions:f,defaultFullBleed:j,scaleContentToFit:v}=o;(0,g.useEffect)(()=>{v&&"fluid"===f&&(i("scaleContentToFit",!1),r.commands.resetCardSettings({fontScale:void 0}))},[f,r.commands,v,i]);let{format:C}=(0,F.CG)(W.Bk),b=(0,rC.dy)(),k=C||"deck",w=(0,rC.jr)(k),S=(0,rC.w)(o,k)||"custom",E="fluid"===f,I="custom"===S,A="full"!==j||h;return(0,a.jsxs)(tE.K,{spacing:5,divider:(0,a.jsx)(sn.i,{}),children:[(0,a.jsxs)(d.xu,{w:"100%",children:[(0,a.jsx)(oG.l,{children:(0,a.jsx)(x.cC,{id:"oIhFvf"})}),(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(t4.v,{children:[(0,a.jsx)(t6.j,{textAlign:"left",as:ev.z,variant:"plain",size:"md",boxShadow:"none",minW:"120px",rightIcon:(0,a.jsx)(D.G,{icon:O.gc2}),leftIcon:(0,a.jsx)(D.G,{icon:w.icon}),w:"100%",children:w.name()}),(0,a.jsx)(t8.q,{children:(0,a.jsx)(t9._,{title:"Format",children:b.map(e=>(0,a.jsxs)(rW.s,{onClick:()=>{t("format",e.formatType);let i=e.styleTemplates[0],r=xq.STYLE_TEMPLATES[i].docSettings;n({styleTemplate:e.styleTemplates[0],...r})},children:[(0,a.jsx)(D.G,{icon:e.icon,fixedWidth:!0}),(0,a.jsx)(d.xu,{flex:1,ml:2,children:(0,a.jsx)(e5.x,{children:e.name()})}),e.formatType===k&&(0,a.jsx)(D.G,{icon:O.LEp})]},e.formatType))})})]}),(0,a.jsx)(sd.E,{children:(0,a.jsx)(xZ,{styleTemplateKeys:w.styleTemplates,onSelectNewStyle:function(e){n(xX({selectedStyleTemplateKey:S,newTemplateKey:e,savedVerticalAlign:u,savedDefaultContentWidth:c,savedFontSize:m,savedScaleContentToFit:v}))},onSelectCustomStyle:function(){i("stylesDerivedFrom","custom")},selectedStyleTemplateKey:S})})]}),(0,a.jsxs)(d.xu,{mt:5,children:[(0,a.jsx)(iG.U,{in:I,children:(0,a.jsx)(xJ,{title:p.ag._({id:"iKM2jY"}),description:p.ag._({id:"Q3Qdcd"}),icon:O.qnl,children:(0,a.jsx)(xU.Ft,{cardDimensions:f,updateCardDimensions:e=>i("cardDimensions",e)})})}),(0,a.jsx)(iG.U,{in:I,children:(0,a.jsx)(xJ,{title:p.ag._({id:"lsVq2Z"}),description:p.ag._({id:"a1DIUk"}),icon:O.r9b,value:"full"===j,onChange:e=>{i("defaultFullBleed",e?"full":void 0),r.commands.resetCardSettings({cardSize:"default"})}})}),(0,a.jsx)(iG.U,{in:E||I,children:(0,a.jsx)(xJ,{title:p.ag._({id:"cPp+Ef"}),icon:O.hz8,children:(0,a.jsx)(xH.p,{contentWidth:c,setWidth:e=>{i("defaultContentWidth",e)},allowedWidths:"social"===C?["sm","md","lg"]:["md","lg"]})})}),(0,a.jsx)(xJ,{title:p.ag._({id:"vUBA/H"}),description:p.ag._({id:"n68eVZ"}),icon:O.elf,children:(0,a.jsx)(xM.e,{alignment:u,setAlignment:e=>{i("verticalAlign",e)}})}),(0,a.jsx)(xJ,{title:(0,a.jsxs)(a.Fragment,{children:[s&&v?(0,a.jsx)(x.cC,{id:"heqtbT"}):(0,a.jsx)(x.cC,{id:"q3il6U"})," ",(0,a.jsx)(oL.C,{colorScheme:"trueblue",size:"sm",children:(0,a.jsx)(x.cC,{id:"YBt9YP"})})]}),icon:O.UgL,children:(0,a.jsx)(xW,{fontSize:m,setFontSize:e=>{i("fontSize",e)}})}),s&&(0,a.jsx)(iG.U,{in:!E,children:(0,a.jsx)(xJ,{title:(0,a.jsx)(x.cC,{id:"+BgJPb"}),description:p.ag._({id:"8uFsVy"}),icon:O.nv$,children:(0,a.jsx)(xG.r,{isChecked:v,onChange:e=>{i("scaleContentToFit",e.target.checked),e.target.checked||r.commands.resetCardSettings({fontScale:void 0})}})})}),A&&(0,a.jsx)(xJ,{title:p.ag._({id:"7VfbQM"}),description:p.ag._({id:"XZHPlI"}),icon:O.UHQ,children:(0,a.jsx)(xG.r,{isChecked:h,onChange:e=>i("presentBackdrop",e.target.checked)})}),(0,a.jsxs)(xJ,{title:p.ag._({id:"HgWdP3"}),description:p.ag._({id:"fkIS5+",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}),icon:O.kq2,children:[(0,a.jsx)(xG.r,{isChecked:(0,xN.C)({animationsEnabled:l}),onChange:e=>i("animationsEnabled",e.target.checked)}),"value="]})]})]}),(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(e5.x,{fontSize:"xs",color:"gray.600",children:(0,a.jsx)(x.cC,{id:"ymPKi7"})}),(0,a.jsxs)(ej.U,{alignItems:"flex-start",spacing:"4",children:[(0,a.jsx)(xV,{label:p.ag._({id:"wl99H6"}),alignment:u,cardDimensions:xU.br[f],isWide:"lg"===c,showBackdrop:"full"!==j,scaleCardUp:!1}),(0,a.jsx)(xV,{label:p.ag._({id:"GWjDlt"}),alignment:u,cardDimensions:xU.br[f],isWide:"lg"===c,showBackdrop:h&&"full"!==j,scaleCardUp:!h||"full"===j})]})]})]})};var x$=n(47055),x0=n(51088);let x1=e=>{let{editor:t}=e,n=(0,F.CG)(W.Pu),i=(0,F.CG)(W.XV),r=(0,g.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,a.jsx)(x0.o,{editor:t,background:i,updateNestedAttributes:r,defaultMessage:(0,a.jsxs)(ip.b,{children:[(0,a.jsx)(sa.z,{}),(0,a.jsx)(x.cC,{id:"dyXYfJ"})]}),isDark:(0,nA.wj)(n),isValidSource:x$.Rr})},x2=e=>{let{closePanel:t}=e,[n,i]=(0,g.useState)(0),{editor:r}=(0,e0._)(),s=(0,F.CG)(W.ke),o=(0,oF.A)(r),l=(0,g.useCallback)((e,t)=>{null==r||r.commands.updateAttributesAtPos(0,{[e]:t})},[r]),u=(0,g.useCallback)((e,t)=>{null==r||r.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[r]),h=(0,g.useCallback)(e=>{null==r||r.commands.updateNestedAttributesAtPos(0,{settings:e})},[r]),p=(0,tz.S)({base:"calc(100% - 1rem)",lg:"auto"});return r?(0,a.jsx)(eb.Wk,{isDark:!1,children:(0,a.jsx)(e8.s,{bgColor:"white",w:"100%","data-panelid":"page-setup",pt:4,"data-page-setup":!0,children:(0,a.jsxs)(c.k,{direction:"column","data-testid":"page-setup-drawer",onKeyDown:o,h:p,overflowX:"hidden",w:"100%",children:[(0,a.jsxs)(c.k,{position:"relative",pb:4,px:6,children:[(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(e9.V,{children:(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"fvaOtb"})})})}),(0,a.jsx)(e1.P,{onClick:t})]}),(0,a.jsx)(c.k,{overflowY:"auto",direction:"column",h:"100%",flex:1,pt:5,children:(0,a.jsxs)(l5.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:n,onChange:i,px:6,children:[(0,a.jsxs)(l2.t,{children:[(0,a.jsxs)(l1.O,{children:[(0,a.jsx)(d.xu,{marginInlineEnd:2,children:(0,a.jsx)(D.G,{icon:O.s2})}),(0,a.jsx)(x.cC,{id:"Ccpbzh"})]}),(0,a.jsxs)(l1.O,{children:[(0,a.jsx)(d.xu,{marginInlineEnd:2,children:(0,a.jsx)(D.G,{icon:O.UHQ})}),(0,a.jsx)(x.cC,{id:"GtJbUa"})]}),(0,a.jsxs)(l1.O,{children:[(0,a.jsx)(d.xu,{marginInlineEnd:2,children:(0,a.jsx)(D.G,{icon:O.g4A})}),(0,a.jsx)(x.cC,{id:"rdUucN"})]})]}),(0,a.jsxs)(xL.n,{children:[(0,a.jsx)(xz.x,{p:2,mt:4,children:(0,a.jsx)(xQ,{editor:r,updateDocSetting:u,bulkUpdateDocSettings:h,updateDocAttribute:l},s)}),(0,a.jsx)(xz.x,{p:2,mt:4,children:(0,a.jsx)(x1,{editor:r,updateDocSetting:u},s)}),(0,a.jsx)(xz.x,{p:2,mt:4,children:(0,a.jsx)(ab,{},s)})]})]})})]})})}):null};x2.panelPosition="right",x2.panelName="page-setup",x2.minWidth=400;let x5=()=>{let{togglePanel:e,isPanelOpen:t}=ei(x2);return(0,g.useEffect)(()=>{let t=()=>{e({override:"open"})},n=oJ.T.on("openPageSetup",t),i=nJ.pw.on(nJ.TI.OPEN_PAGE_SETUP,t);return()=>{n(),i()}},[e]),{togglePageSetupPanel:e,isPageSetupPanelOpen:t}};var x3=n(71355),x4=n(96236);let x6=(0,il.ZP)("mod+S"),x8=(0,il.ZP)("mod+shift+O"),x9=()=>{let e=(0,iL.p)();(0,g.useEffect)(()=>{let t=t=>{x6(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,a.jsx)(x.cC,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},n=(0,eV.B$)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),()=>{null==n||n(),window.removeEventListener("keydown",t)}},[e])},x7=()=>{let e=(0,F.qr)(),t=(0,F.TL)(),{editor:n}=(0,tw._i)();(0,g.useEffect)(()=>{if(!n)return;let i=i=>{if(!x8(i))return;i.preventDefault();let r=e.getState(),{cardIdMap:s,cardIds:o,memoState:{expandedCards:l}}=r.TipTap,a=(0,W.i2)(r),{total:c,expanded:d,cardIds:u}=o.reduce((e,t)=>{let n=!0===l[t],i=s.parents[t]||[],r=i.length>0,o=!a||i.includes(a);return r&&o&&(e.cardIds.push(t),e.total++,e.expanded+=n?1:0),e},{total:0,expanded:0,cardIds:[]});t((0,W.bj)({disable:!0})),setTimeout(()=>{t((0,W.bj)({disable:!1}))},100);let h=c===d;pe(n,100,!h),(0,r1.Nn)(u,h)};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t,e,n])},pe=(e,t,n)=>{let i;let r=(0,eq.cC)("editor");for(let t=200;t>0;t-=25){var s;let n;let o=(0,nc.Je)(e,r.scrollSelector,t);(null===(s=o.pos)||void 0===s?void 0:s.pos)&&(e.state.doc.nodeAt(o.pos.pos)?n=o.pos.pos:e.state.doc.nodeAt(o.pos.inside)&&(n=o.pos.inside),n&&(!i||n>i)&&(i=n))}if(!i){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}let o=pt(e,i,n);if(!o){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,eV.wO)({element:o,requiredCookie:"cardCollapseDebug=true"});let l=+new Date,a=r.scroller.scrollTop,c=(0,eV.LY)(o,r.scrollSelector),d=a-c,u=d<0?0:Math.max(d+200,0),h=()=>{if(!o)return;let e=(0,eV.LY)(o,r.scrollSelector);r.scroller.scroll({top:a+(e-c-u)}),+new Date-l<t&&requestAnimationFrame(h)};h()},pt=(e,t,n)=>{let i=e.state.doc.resolve(t),r=e.state.doc.nodeAt(t),s=(0,nc.Sh)(e,t);if(!r){console.warn("[getElementToPin] nodeAt null for $pos",i);return}let o=(0,nc.nv)(i,()=>!0).reverse();for(o.push({start:i.start(i.depth+1),pos:t,depth:i.depth,node:r});o.length;){let t=o.shift();if(!t)continue;let i=(0,eB.KH)(t.node),r=(0,x3.SA)(t.node),l=(0,x4.CU)(t.node),a=i||t.node.isAtom?t.pos:t.start;if(s=(0,nc.Sh)(e,a),!n&&i&&t.depth>2||r||l)break}for(;(null==s?void 0:s.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s};var pn=n(95993),pi=n(87920),pr=n(62216),ps=n(25756),po=n(11310),pl=n(85418),pa=n(91492);class pc extends pn.GJ{constructor(e){super({transform:async(t,n)=>{var i;if("data"!==t.event){n.enqueue(t);return}let{content:r}=t.data,s=r.attrs.id,o=r.content.find(e=>"cardAccentLayoutItem"===e.type);o&&(!o.attrs.background||(null===(i=o.attrs.background)||void 0===i?void 0:i.type)===pa.E.NONE)&&(o.attrs.background=(0,dO.Bv)(e,s),(0,dO.Tm)(r)),n.enqueue(t)}})}}var pd=n(75173),pu=n(75325),ph=n(27003);class px extends pn.GJ{async loadImage(e){let{editor:t,loadImageId:n,loadImageParams:i,cardIndex:r,cardId:s,node:o,theme:l,interactionId:a}=e,c=await (0,pd.B)({loadImageId:n,loadImageParams:i,context:{docId:t.gammaDocId,workspaceId:t.gammaOrgId,interactionId:a}});if(this.streamingCardIndex===r){this.loadedImageAttrs[n]=(0,pu.j6)(o,c),"cardAccentLayoutItem"===o.type.name&&"error"===c.loadImageStatus&&(this.loadedImageAttrs[n]={...o.attrs,background:(0,dO.Bv)(l,s)});return}requestAnimationFrame(()=>{(0,dD.tf)({editor:t,loadImageId:n,newAttrs:c,node:o,theme:l,cardId:s})})}constructor({editor:e,theme:t,interactionId:n}){super({transform:async(i,r)=>{if("data"!==i.event){r.enqueue(i);return}let{index:s,id:o}=i.data;this.streamingCardIndex=s,(0,ph.N)(i.data.content,i=>{var r;if("text"===i.type)return;let l=nS.NB.fromJSON(e.schema,{type:i.type,attrs:i.attrs}),a=(0,pu.XU)(l);if(!a||"queued"!==a.loadImageStatus||!a.loadImageId||!a.loadImageParams)return;let{loadImageId:c,loadImageParams:d}=a;this.imageAttrs[c]||(this.imageAttrs[c]=l.attrs),this.loadImagePromises[c]||(this.loadImagePromises[c]=this.loadImage({editor:e,loadImageId:c,loadImageParams:d,cardIndex:s,cardId:o,theme:t,node:l,interactionId:n})),i.attrs=null!==(r=this.loadedImageAttrs[c])&&void 0!==r?r:this.imageAttrs[c]}),i.data.cardComplete&&this.streamingCardIndex++,r.enqueue(i)}}),this.streamingCardIndex=0,this.imageAttrs={},this.loadedImageAttrs={},this.loadImagePromises={}}}var pp=n(91760);let pm=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===t.length)throw Error("Cannot have empty path");let r=[...t],s={...e},o=s,l=0;for(;t.length>0;){if(!o.content)throw Error("Can't surround a node with children");let e=r.shift();if(0===r.length){let t=o.content.slice(0,e);t.push(n),o.content=t;break}if(l<i){let t=o.content.slice(0);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}else{let t=o.content.slice(0,e+1);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}l++}return s};class pf extends pn.GJ{constructor(e){super({transform:async(t,n)=>{if("done"===t.event||"cancel"===t.event){n.enqueue(t);return}let i=(0,F.bh)(),r=null;for(let s of function* e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("text"===t.type){let e=t.text.split(" ");for(let t=0;t<e.length;t++){let s={type:"text",text:e.slice(0,t+1).join(" ")};yield pm(i,r,s,n)}return}if(!t.content){yield pm(i,r,t,n);return}let s=0;for(let o of t.content){for(let t of e(o,n,i,[...r,s]))yield t;s++}}(t.data.content,1)){if(!s)continue;r&&n.enqueue(r),r={id:t.id,event:"data",data:{...t.data,content:s,cardComplete:!1}};let o=(0,iF.qn)(e)(i.getState());await pg(o)}r&&n.enqueue({...r,data:{...r.data,cardComplete:!0}})}}),this.index=0,this.startTime=performance.now()}}let pg=e=>new Promise(t=>pp.iK(t,e));var pj=n(56655);let pv=e=>{let{enabled:t,type:n}=e,i=(0,pj.As)(n),r=(0,g.useRef)(!0);(0,g.useEffect)(()=>{if(!t)return;let e=i.scroller;if(!e)return;let n=()=>{i.isAtBottom(40)?r.current=!0:r.current=!1},s=()=>{r.current=!1};return e.addEventListener("wheel",n,{passive:!0}),e.addEventListener("touchend",n,{passive:!0}),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("touchmove",s,{passive:!0}),()=>{e.removeEventListener("wheel",n),e.removeEventListener("touchend",n),e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",s)}},[i,t]);let s=(0,g.useCallback)(()=>{if(r.current){var e;null===(e=i.scroller)||void 0===e||e.scrollTo({top:i.scroller.scrollHeight,behavior:"auto"})}},[i]);return(0,xh.Z_)(s,100)};var pC=n(42557);let pb="[CONTENT_FILTER]",py=()=>(0,a.jsxs)(ip.b,{status:"error",variant:"solid",children:[(0,a.jsx)(sa.z,{}),(0,a.jsx)(ig.X,{children:(0,a.jsxs)(tE.K,{children:[(0,a.jsx)("strong",{children:(0,a.jsx)(x.cC,{id:"7g5s/N"})}),(0,a.jsx)(e5.x,{children:(0,a.jsx)(x.cC,{id:"Xp43Ei"})})]})})]}),pk=()=>(0,a.jsxs)(ip.b,{variant:"light",children:[(0,a.jsx)(tI.$,{size:"sm",mr:2}),(0,a.jsxs)(ig.X,{children:[(0,a.jsx)("strong",{children:(0,a.jsx)(x.cC,{id:"n2cF1o"})})," ",(0,a.jsx)(x.cC,{id:"BFGwQA"})]})]}),pw=e=>{let{editor:t,content:n,cardId:i,cardIndex:r,cardComplete:s}=e,o=(0,eF.N2)(t.state.doc,e=>(0,a8.KH)(e))[0],l=(0,eF.N2)(t.state.doc,e=>(0,a8.KH)(e)&&e.attrs.id===i)[0];if(!o)throw Error("Doc does not have a first card");let a=l?{from:l.pos,to:l.pos+l.node.nodeSize}:0===r?{from:o.pos,to:o.pos+o.node.nodeSize}:t.state.doc.nodeSize-3;try{if(t.commands.insertContentAt(a,n,{updateSelection:0===r}),s&&0===r){let e=(0,hJ.t)(t.state.doc.resolve(o.pos));e&&t.commands.command(t=>{let{tr:n}=t;return n.setSelection(e),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},pS=e=>{let{docId:t,aiOptions:n,store:i,generateInfo:r,editor:s,lazyImages:o}=e;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}ps.a.trackRequestSent(i,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});let{stream:l}=(0,pr.pM)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}),a={preserveLayouts:!!n.preserveLayouts,imageOptions:n.imageOptions||{},docFormatKey:(0,rC.hx)((0,rC.VA)(s)).formatType,lazyImages:o,theme:(0,W.Pu)(i.getState())};return(0,pi.Nl)({stream:l,docId:t,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,lastCompletedCardIndex:r.lastCompletedCardIndex,options:a,store:i})},pE=(e,t)=>{let n=(0,F.CG)(W.Pu),i=(0,F.qr)(),r=(0,F.TL)(),s=(0,F.CG)(W.KV),o=(0,y.ye)("streamResumingEnabled"),l=(0,y.ye)("generatorLazyImages"),a=(0,g.useRef)(!1),c=(0,y.ye)("generatorLazyImages"),{isStreaming:d,onStreamData:u,onStreamDone:h,onStreamError:x,onStreamStart:p,onAbortStream:m}=pI({docId:e}),f=pv({enabled:d,type:"editor"}),j=(0,g.useCallback)(async r=>{let s,o;if(!t)return;p({editor:t});let l=pA({streamResponse:r,editor:t,store:i,theme:n,docId:e}).getReader();try{for(;!(s=await l.read()).done;)if(s.value){if(a.current){console.log("[AIStream] has aborted -- no longer reading stream");break}o=s.value,"data"===o.event&&(u({value:o.data,editor:t,streamResponse:r}),f())}}catch(e){x({err:e,streamResponse:r,editor:t});return}a.current||(o&&"done"!==o.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:o}),h({editor:t,streamResponse:r}))},[e,t,u,h,x,p,f,i,n]);(0,Q.v)(()=>{if(!t||!s||d||!e)return;let n=(0,iF.oH)(e)(i.getState()),r=(0,iF.nl)(i.getState());if(n){"running"===n.status&&j(n);return}if(!o||r)return;let{generateInfo:l,generateStatus:a,aiOptions:u}=(0,rC.VA)(t);if("streaming"!==a){if(new URLSearchParams(window.location.search).get("restream")){let n=pS({docId:e,aiOptions:u,generateInfo:{interactionId:l.interactionId,streamId:l.streamId,lastEventId:"0",lastCompletedCardId:null,lastCompletedCardIndex:null},editor:t,store:i,lazyImages:c});n&&j(n)}return}let h=(0,W.yx)(i.getState());if((null==h?void 0:h.createdTime)&&Date.now()-new Date(h.createdTime).getTime()>36e5){t.commands.updateAttributesAtPos(0,{generateStatus:"done"});return}let x=pS({docId:e,generateInfo:l,editor:t,store:i,aiOptions:u,lazyImages:c});x&&j(x)},[e,t,i,s,p,x,u,h,o,j,d,l,c],[t,s]),(0,g.useEffect)(()=>()=>{let n=(0,iF.oH)(e)(i.getState());t&&n&&"running"===n.status&&(a.current=!0,m({editor:t,streamResponse:n}))},[r,e,m,t,i])},pI=e=>{let{docId:t}=e,n=(0,iL.p)(),i=(0,F.TL)(),r=(0,F.qr)(),s=(0,y.ye)("aiWizardUploadImages"),[o,l]=(0,g.useState)(!1),c=(0,y.ye)("debugLogging"),d=(0,g.useRef)(null);(0,g.useEffect)(()=>()=>{d.current&&(n.close(d.current),d.current=null)},[n]);let u=(0,g.useCallback)(()=>{d.current||(d.current=n({id:"ai-generating-toast",isClosable:!1,render:()=>pk(),position:"top",duration:null}))},[n]),h=(0,g.useCallback)(e=>{let{editor:t}=e;t&&(l(!0),t.commands.setAIGenerationRunning(!0),u())},[u]),p=(0,g.useCallback)(e=>{let{editor:t,value:n,streamResponse:i}=e;if(!i||!t)return;let{id:r,cardComplete:o,index:l,content:a}=n;pw({editor:t,content:a,cardId:r,cardIndex:l,cardComplete:o}),o&&s&&(0,dD.g1)({editor:t,cardId:r})},[s]),m=(0,g.useCallback)(e=>{var t,s,o;let{editor:u,streamResponse:h}=e;if(!u||!h)return;let p=h.id,{aiOptions:m}=(0,rC.VA)(u);l(!1),u.commands.setAIGenerationRunning(!1),u.commands.updateAttributesAtPos(0,{generateStatus:"done"});let f=(0,pl.NV)(),g=f.debugInfo();c&&console.log("[AIStream] ImageStore DEBUG",{imageStore:f,debug:g}),(0,pl.Uu)(),i((0,iF.G0)({id:p,status:"complete"}));let j=(0,pC.R)(u),v=new TextEncoder().encode(JSON.stringify(u.state.doc.toJSON())),C=j?j/v.byteLength:void 0;ps.a.trackStreamComplete(r,p,{imageProvider:null===(t=m.imageOptions)||void 0===t?void 0:t.provider,numImageSearches:g.requests.length,imageSearches:g.requests,ydocToJsonRatio:C});let b=(0,W.yx)(r.getState());b&&(null===(s=b.docGenerateInput)||void 0===s?void 0:s.id)?(0,th.d)((null===(o=m.imageOptions)||void 0===o?void 0:o.provider)==="aiGenerated"?"generateV2WithImages":"generateV2",b.organization,p):(0,th.d)("wizardCreation",null==b?void 0:b.organization,p),d.current&&n.update(d.current,{title:(0,a.jsx)(x.cC,{id:"nm7VEQ",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}),status:"success",position:"top",duration:3e3,isClosable:!0})},[i,c,r,n]);return{isStreaming:o,onStreamStart:h,onStreamData:p,onStreamError:(0,g.useCallback)(e=>{let{err:s,editor:o,streamResponse:u}=e,h=u.id,{errorMessage:p,errorCode:m}=(0,po.uS)(s);console.error("StreamError: ",{interactionId:h,errorMessage:p,errorCode:m,stack:s.stack}),c&&console.log("StreamError: (".concat(m,") - ").concat(p),s.stack),l(!1),o.commands.setAIGenerationRunning(!1),o.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,pl.Uu)(),i((0,iF.G0)({id:h,status:"error"}));let f=(0,iF.Sn)(h)(r.getState());if(f){let{latency:e,...n}=f;(0,td.pQ)({...n,errorName:"StreamError",errorMessage:p,errorCode:m,outputMessage:"",latency:e||performance.now()-n.startTime,isResuming:u.isResuming,docId:t})}d.current&&(p===pb?n.update(d.current,{render:py,position:"top",duration:null,isClosable:!0}):n.update(d.current,{title:(0,a.jsx)(x.cC,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}))},[i,t,c,r,n]),onStreamDone:m,onAbortStream:(0,g.useCallback)(e=>{let{editor:t,streamResponse:n}=e,s=n.id;l(!1),t.commands.setAIGenerationRunning(!1),ps.a.trackStreamAbort(r,{interactionId:s,abortReason:"leave-editor"}),i((0,iF.Of)({id:s}))},[i,r])}},pA=e=>{let{streamResponse:t,editor:n,store:i,docId:r,theme:s}=e,{id:o,stream:l}=t,a=!0;return l.pipeThrough(new pc(s)).pipeThrough(new pf(t.id)).pipeThrough(new px({editor:n,theme:s,interactionId:o})).pipeThrough(new pn.GJ({transform(e,t){if("done"===e.event&&"content_filter"===e.finishReason){t.error(Error(pb));return}t.enqueue(e)}})).pipeThrough((0,pi.c1)(e=>{a&&"data"===e.event&&(ps.a.trackStreamStart(i,{interactionId:o,docId:r}),t.isResuming&&(n.commands.deleteCardsAfter(t.lastCompletedCardId||null),t.lastCompletedCardId&&(console.log("[AIStream] refetchLazyImages",t.lastCompletedCardId),(0,dD.JZ)({editor:n,lastCompletedCardId:t.lastCompletedCardId,theme:s}))),a=!1),"data"===e.event&&e.data.cardComplete&&n.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},pT="doc_archived_warning",p_=(e,t)=>{let n=(0,iL.p)(),[i]=(0,t$.iX9)(),[r]=(0,t$.sJX)(),s=null==e?void 0:e.site;(0,g.useEffect)(()=>()=>{n.close(pT)},[]),(0,g.useEffect)(()=>{if(s&&!s.archived){n.close(pT);return}!e||e.site||e.archived||n.close(pT)});let o=(0,g.useCallback)(async()=>{if((null==s?void 0:s.id)&&await r({variables:{id:s.id},optimisticResponse:{unarchiveSite:{id:s.id,__typename:"Site"}}}),!(null==e?void 0:e.id))return;let t={id:e.id};await i({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:!1,__typename:"Doc"}}}),n({title:(0,a.jsx)(x.cC,{id:"o8va6N"}),status:"success",position:"top",isClosable:!0,duration:5e3})},[null==e?void 0:e.id,n,null==s?void 0:s.id,i,r]);(0,g.useEffect)(()=>{e&&t===tk.Z.COLLABORATIVE&&((null==s?void 0:s.archived)||(null==e?void 0:e.archived))&&!n.isActive(pT)&&n({id:pT,title:(0,a.jsxs)(e5.x,{"data-testid":"trash-confirmation-toast",children:[(0,a.jsx)(x.cC,{id:"fkHPZu"})," ",(0,a.jsx)(rI.r,{textDecoration:"underline",onClick:o,children:(0,a.jsx)(x.cC,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null})},[e,t,o,s,n,i])};var pO=n(5668),pD=n(82528),pR=n(76009);let pP=e=>{let{launchIntercomUI:t}=e;return function(e){let{onClose:n}=e;return(0,a.jsxs)(c.k,{p:4,color:"white",bg:"yellow.500",borderRadius:"md",alignItems:"center",position:"relative",children:[(0,a.jsx)(e1.P,{size:"sm",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,a.jsx)(D.G,{icon:dw.xHz,size:"2x"}),(0,a.jsxs)(c.k,{direction:"column",ml:3,children:[(0,a.jsx)(d.xu,{children:(0,a.jsx)(e5.x,{lineHeight:6,fontSize:"sm",children:(0,a.jsx)(x.cC,{id:"4YARE9",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc},components:{0:(0,a.jsx)("b",{})}})})}),(0,a.jsx)(e5.x,{lineHeight:6,fontSize:"sm",pt:2,children:(0,a.jsx)(x.cC,{id:"Enj8Kw",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc},components:{0:(0,a.jsx)(ev.z,{as:rI.r,variant:"link",textDecoration:"underline",fontSize:"sm",onClick:()=>{t()},colorScheme:"white"})}})})]})]})}},pL="no-snapshot-warning",pz=(e,t)=>{let n=(0,pD.G)(),i=(0,iL.p)(),r=(0,pR.z$)(),s=null==e?void 0:e.id,o=t===tk.Z.COLLABORATIVE&&(null==e?void 0:e.currentSnapshotId)===null;(0,g.useEffect)(()=>{!o||i.isActive(pL)||(i({id:pL,render:pP({launchIntercomUI:n}),duration:null,position:"top",isClosable:!0}),null==r||r.track(eM.xW.NO_CURRENT_SNAPSHOT,{docId:s}))},[r,s,n,o,i])},pG=e=>{let{togglePagesPanel:t,isPagesPanelOpen:n}=e,i=(0,F.TL)(),r=(0,F.qr)(),{asPath:s}=(0,ey.useRouter)(),o=(0,F.CG)(eS.tv),l=(0,g.useRef)(n),a=(0,eR.BZ)(s),c=(0,g.useRef)(t);c.current=t,(0,rQ.r)(()=>{let e=(0,ee.nm)("pages")(r.getState()),t=c.current;a&&e?(t({override:"closed",disableTransition:!1}),l.current=!0):a||t({override:l.current?"open":"closed",disableTransition:!1})},[a]),(0,g.useEffect)(()=>{let e=a?(0,ek.s2)()?"mobile":o||"desktop":null;i((0,eS.Tj)({previewSize:e}))},[i,a,o])};var pN=n(56675);let pM=e=>{let t=(0,pN.x)(),n=(0,F.CG)((0,af.cn)(e));(0,g.useEffect)(()=>{n&&t.cache.updateQuery({query:i0.yE1,variables:{id:e}},e=>{if(!(null==e?void 0:e.doc))return e;let t=e.doc;return t.titleEdited?e:{doc:{...t,title:n}}})},[n,t,e])};var pU=n(21562);let pF=(e,t)=>{let{isUnauthorized:n}=(0,e0._)();(0,eM.If)(i=>{!0!==n&&void 0!==n&&(i.track(eM.AA.DOC_VIEWED,{doc_id:e}),t===tk.Z.EXAMPLE_STATIC&&i.track(eM.AA.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,n]),(0,pU.d)();let i=(0,y.ye)("realUserMetrics"),r=t===tk.Z.COLLABORATIVE&&i,s=(0,y.ye)("rumKeystrokeSampleRate");(0,r0.lh)(r,s)},pW=e=>{let t=(0,j.I0)(),n=(0,eM.z$)();(0,g.useEffect)(()=>{let i;let r=()=>{let r=(0,F.bh)().getState();i=(0,W.Q5)(r),(0,r1.I7)(e),t((0,W.lx)({isEditingDisabled:!0})),null==n||n.trackDocEvent(eM.AA.DOC_PRINTED)},s=()=>{t((0,W.lx)({isEditingDisabled:!1})),t((0,W.xn)({expandedCardsMap:i}))};return window.addEventListener("beforeprint",r),window.addEventListener("afterprint",s),()=>{window.removeEventListener("beforeprint",r),window.removeEventListener("afterprint",s)}},[t,e,n])},pH="doc-root",pq=(0,g.memo)(function(e){let{isConnected:t}=e;return(0,a.jsx)(c.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:t?(0,a.jsx)(x.cC,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}):(0,a.jsx)(X.V,{isConnected:!1,description:(0,a.jsx)(x.cC,{id:"BBDdvg",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}),size:"lg",bg:"none"})})}),pB=e=>{let{doc:t,user:n,docEditorType:i,editor:r,editorWrapperDiv:s,aspectRatioValue:o}=e,l=(0,b.$m)(t,n),c=(0,j.v9)(W.gh),d=i===tk.Z.COLLABORATIVE&&!l,u=d&&c===eK.q.SLIDE_VIEW;return i!==tk.Z.COLLABORATIVE||n?u?(0,a.jsx)(Y,{}):d?(0,a.jsx)(ng,{editor:r,editorWrapperDiv:s,aspectRatioValue:o}):null:(0,a.jsx)(rR.m,{docWorkspace:null==t?void 0:t.organization})},pV=(0,tw.eT)(e=>{let{docEditorType:t}=e,n=(0,F.TL)(),{docId:i,isUnauthorized:r,passwordRequired:s,setCollaborativeEditorInstance:o,editor:l}=(0,tw._i)(),x=(0,F.CG)(tV.yx),m=(0,F.CG)(W.B_),j=(0,y.ye)("scaleToFit"),S="fluid"!==m.cardDimensions?h.tX[m.cardDimensions]:void 0,E=(0,F.CG)(e_.lH),I=(0,F.CG)(e_.$U),{isConnected:A}=(0,C.$)(),T=(0,t2.mb)(null==x?void 0:x.id,I),[_,O]=(0,g.useState)(null),D=(0,F.CG)(eS.tv),R=null!==D,P=(0,F.CG)(W.gh),L=(0,F.CG)(W.hN),{user:z}=(0,eX.SE)();(0,k.F3)({isSite:!!(null==x?void 0:x.site)}),p_(x,t),pz(x,t),pE(i,_===i?l:void 0),pM(i),pF(i,t),eD(l,t===tk.Z.COLLABORATIVE),(0,pO.j)(),x9();let{editorAnimationsClass:G,editorAnimationsCSSVars:N}=(0,eL.k)({editor:l,scrollingParentSelector:".".concat(pH),disabledOverride:R});x7(),aZ(l,".".concat(pH)),a2(l),ty(),pW(l),(0,b.DD)(x,t===tk.Z.COLLABORATIVE);let M=(0,g.useRef)(null),U=(0,ec.Yy)(),H=(0,g.useMemo)(()=>(0,ez.vu)(U),[U]),q=tK();console.debug("%c[DocEditorComponent] RENDER - ".concat(i),"background-color: gold");let{toggleCommentsPanel:B,isCommentsPanelOpen:V}=io(),{togglePagesPanel:K,isPagesPanelOpen:Y}=aH(),{isDesignPartnerPanelOpen:Z}=iD();x5(),tC(),(0,g.useEffect)(()=>()=>{n((0,ee.qo)()),n((0,e_.mc)())},[n]),pG({togglePagesPanel:K,isPagesPanelOpen:Y});let X=(0,eR.Vr)(E)&&(null==E?void 0:E.navEnabled)&&!R&&P!==eK.q.SLIDE_VIEW,Q=(0,g.useCallback)(()=>!!(l&&l.state.selection.empty),[l]),{leftPanelLifecycle:et,rightPanelLifecycle:en,globalPanelLifecycle:ei}=er(),es=(0,J.dU)(null==x?void 0:x.organization),eo=(0,w.U)(null==x?void 0:x.title,es),el=p.ag._({id:"X6YCwz"}),ea=p.ag._({id:"abr3hR"}),ed=tY(),eu=(0,g.useMemo)(()=>{let e=X?{"--doc-padding-top":eG.ik}:void 0;return{...H,...ed,...e}},[H,ed,X]),eh=(null==x?void 0:x.disabled)||(null==x?void 0:x.archived)||(null==E?void 0:E.archived)||R,ex=!(0,ew.LQ)(window.location.href),ep=R&&I?(0,a.jsx)(eE,{docId:i}):ex&&l?(0,a.jsx)(uw,{isDark:U,editor:l,scrollingParentSelector:".".concat(pH),editorWrapperEl:M.current,docEditorType:t,isPagesPanelOpen:Y,togglePagesPanel:K,isCommentsPanelOpen:V,toggleCommentsPanel:B}):null,eg=(ep?49:0)+((null==x?void 0:x.disabled)?63:0);return(0,a.jsx)(t2.DN.Provider,{value:T,children:(0,a.jsx)(v.Sy,{children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",children:[(0,a.jsx)(iP,{disabled:null==x?void 0:x.disabled,docId:i}),(0,a.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,a.jsx)(f(),{children:(0,a.jsx)("title",{children:eo})}),L&&j&&(0,a.jsx)(ct,{editor:l}),(0,a.jsx)(nY,{doc:x,editor:l}),(0,a.jsx)(eI.sn,{isEnabledFn:Q}),ep,s?(0,a.jsx)(aY,{docId:i}):r?(0,a.jsx)(pq,{isConnected:A}):(0,a.jsxs)(c.k,{id:"doc-main",direction:"row",w:"100%",h:"calc(100% - ".concat(eg,"px)"),sx:{"--editor-padding-top":"".concat(eg,"px")},"data-testid":"doc-editor-root",ref:M,children:[(0,a.jsx)(ef,{panelLifecycle:et}),(0,a.jsx)(c.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:(0,a.jsxs)(d.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",pos:"relative",minWidth:"0",h:"100%",className:(0,u.cx)(pH,G,Z&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(el,"'"),"--ai-generating-label":"'".concat(ea,"'"),...N},sx:eu,children:[R&&(0,a.jsx)(tX,{loading:i!==_,docId:i,editor:l,previewSize:D},"".concat(i,"__preview-editor")),t===tk.Z.PUBLIC_STATIC?(0,a.jsx)(a0,{docId:i,snapshotId:null==x?void 0:x.currentSnapshotId,scrollingParentSelector:".".concat(pH),onCreate:o}):t===tk.Z.EXAMPLE_STATIC?(0,a.jsx)(rz,{docId:i,snapshotId:null==x?void 0:x.currentSnapshotId,scrollingParentSelector:".".concat(pH),onCreate:o}):(0,a.jsxs)($.Mn.Provider,{value:ei,children:[(0,a.jsx)(eP.Ge,{doc:x,docId:i,readOnly:eh,hideForPreview:R,onCreate:e=>{o(e),O(e.gammaDocId),e.on("destroy",()=>{O(null)})},scrollingParentSelector:".".concat(pH),animationsExtensionEnabled:!0},"".concat(i,"__collaborative-editor")),l&&(0,a.jsx)(eJ,{editor:l})]}),X&&(0,a.jsx)(t1,{}),!R&&(0,a.jsx)(rw,{editor:l},i)]})}),P===eK.q.SLIDE_VIEW&&(0,a.jsx)(u6,{editor:l}),(0,a.jsx)(em,{panelLifecycle:en}),(0,a.jsx)(eN.a,{editorId:"main",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(pB,{doc:x,user:z,docEditorType:t,editor:l,editorWrapperDiv:M.current,aspectRatioValue:S}),q&&(0,a.jsx)(xP,{})]})})]})]})})})});var pK=n(69251),pY=n(11881),pZ=n(45182);let pJ=e=>{let{theme:t,onClick:n,isChecked:i,index:r,startIndex:s}=e;return(0,a.jsxs)(d.xu,{gridColumnStart:r+1-s,display:s>r?"none":"block",gridRow:1,as:pY.f,p:2,transition:"all 0.2s ease-in-out",bgColor:i?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:i?void 0:"outline"},outline:"none",onClick:n,_hover:{bgColor:i?"trueblue.100":"gray.100"},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&n()},"data-theme-id":t.id,"data-testid":i?"current-theme-preview":void 0,cursor:"pointer",children:[(0,a.jsx)(pZ.n,{theme:t}),(0,a.jsxs)(tE.K,{direction:"row",spacing:1,pt:1,children:[i&&(0,a.jsx)(nU.n,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,a.jsx)(e5.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:i?"trueblue.700":void 0,children:t.name})]})]})};pJ.displayName="DemoDocThemePreview";let pX="linen.50",pQ=e=>{let{templateTheme:t,setTheme:i,currentThemeId:r}=e,s=(0,j.v9)(W.gh)===eK.q.SLIDE_VIEW,[o,l]=(0,g.useState)([]),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)(0),m=(0,ed.iq)({base:3,md:4,lg:5})||3;(0,g.useEffect)(()=>{n.e(7715).then(n.bind(n,67715)).then(e=>{l(e.GLOBAL_THEMES)})},[]);let f=[...t?[t]:[],...o.filter(e=>e.id!==(null==t?void 0:t.id))],v=(0,g.useCallback)(e=>{1===e?p(e=>e+1):p(e=>e-1)},[]);return s?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(rG.h,{children:(0,a.jsxs)(c.k,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:pX,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,a.jsx)(c.k,{alignItems:"flex-end",justify:"flex-end",children:(0,a.jsx)(ev.z,{variant:"ghost",size:"sm",rightIcon:(0,a.jsx)(D.G,{icon:d?O.gc2:O.onQ}),onClick:()=>u(e=>!e),children:d?(0,a.jsx)(x.cC,{id:"yz7wBu"}):(0,a.jsx)(x.cC,{id:"x6tIe+"})})}),(0,a.jsx)(c.k,{justify:"flex-start",align:"flex-start",bgColor:pX,w:"100%",children:d&&(0,a.jsxs)(tE.K,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,a.jsx)(A.h,{"aria-label":"Left",onClick:()=>v(-1),variant:"ghost",isDisabled:0===h,icon:(0,a.jsx)(D.G,{icon:O.EyR})}),(0,a.jsx)(pK.r,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(m,", calc(100% / ").concat(m," - 1em))")],gap:"0 1em",bgColor:pX,children:f.map((e,t)=>(0,a.jsx)(pJ,{index:t,startIndex:h,isChecked:e.id===r,theme:e,onClick:()=>{i(e)}},e.id))}),(0,a.jsx)(A.h,{"aria-label":"Right",variant:"ghost",isDisabled:h+m>f.length,onClick:()=>v(1),icon:(0,a.jsx)(D.G,{icon:O.yOZ})})]})})]})})};var p$=n(89833),p0=n(18922);let p1=[{description:(0,a.jsx)(x.cC,{id:"gtWy3j"}),shortcut:["",""]},{description:(0,a.jsx)(x.cC,{id:"UCxK2S"}),shortcut:["",""]},{description:(0,a.jsx)(x.cC,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,a.jsx)(x.cC,{id:"CgmvBu"}),shortcut:"S"},{description:(0,a.jsx)(x.cC,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,a.jsx)(x.cC,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,a.jsx)(x.cC,{id:"K0Oq/D"}),shortcut:"R"}],p2=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,{enterSlideView:i,exitSlideView:r,setExitedFullscreenByClick:s,isFullscreen:o,enterFullscreen:l,exitFullscreen:c}=se({editorWrapperEl:t,scrollingParentSelector:n}),d=(0,F.CG)(W.gh),u=(0,g.useRef)(d);return(0,g.useEffect)(()=>{u.current=d},[d]),(0,a.jsxs)(ej.U,{children:[(0,a.jsxs)(eC.h,{isAttached:!0,size:"sm",children:[(0,a.jsx)(eb.kH,{label:d===eK.q.DOC_VIEW?(0,a.jsx)(x.cC,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}):(0,a.jsx)(x.cC,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}),children:(0,a.jsx)(ev.z,{variant:d===eK.q.DOC_VIEW?"solid":"plain",cursor:d===eK.q.SLIDE_VIEW?"pointer":"auto",onClick:()=>{d===eK.q.SLIDE_VIEW&&r()},leftIcon:(0,a.jsx)(D.G,{icon:O.cwv}),children:(0,a.jsx)(x.cC,{id:"7Zdnlq"})})}),(0,a.jsx)(eb.kH,{label:d===eK.q.SLIDE_VIEW?(0,a.jsx)(x.cC,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}):(0,a.jsx)(x.cC,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:Z.Yc}}),children:(0,a.jsx)(ev.z,{variant:d===eK.q.SLIDE_VIEW?"solid":"plain",cursor:d===eK.q.DOC_VIEW?"pointer":"auto",onClick:()=>{d===eK.q.DOC_VIEW&&i({fullscreen:!1})},leftIcon:(0,a.jsx)(D.G,{icon:O.bgy}),children:(0,a.jsx)(x.cC,{id:"FOoDGS"})})})]}),d===eK.q.SLIDE_VIEW&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sn.i,{orientation:"vertical"}),(0,a.jsx)(eb.kH,{label:o?(0,a.jsx)(x.cC,{id:"IkOhTI"}):(0,a.jsx)(x.cC,{id:"q8ARHN"}),children:(0,a.jsx)(A.h,{size:"sm","aria-label":o?p.ag._({id:"IkOhTI"}):p.ag._({id:"q8ARHN"}),borderRadius:"md",icon:(0,a.jsx)(D.G,{icon:o?O.Qj4:O.TL5}),onClick:o?()=>{s(!0),c()}:l})}),(0,a.jsxs)(E.J,{children:[(0,a.jsx)(I.x,{children:(0,a.jsx)(ev.z,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,a.jsx)(x.cC,{id:"77Emn0"})})}),(0,a.jsxs)(T.y,{border:"1px solid #eee !important",children:[(0,a.jsx)(cq.Q,{}),(0,a.jsx)(p$.u,{}),(0,a.jsx)(_.b,{children:(0,a.jsx)(p0.A,{list:p1})})]})]})]})]})},p5=(0,g.memo)(function(e){let{scrollingParentSelector:t,editorWrapperEl:n}=e;(0,F.CG)(tV.yx);let i=(0,g.useRef)(null);return(0,a.jsx)(c.k,{ref:i,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,a.jsx)(c.k,{direction:"column",w:"100%",children:(0,a.jsx)(p2,{editorWrapperEl:n,scrollingParentSelector:t})})})});var p3=n(21164),p4=n(91148);let p6=e=>{let{toggleToCPanel:t,initializeToCPanel:n,isToCPanelOpen:i}=e,{breakpoints:{xl:r}}=(0,p4.F)(),s=(0,F.CG)(W.gh),[o,l]=(0,g.useState)(s!==eK.q.SLIDE_VIEW),[a,c]=(0,g.useState)(!1),d=(0,j.I0)();(0,tg.vm)(()=>{n()},[r,t,n,d],[]),(0,tg.vm)(()=>{s===eK.q.SLIDE_VIEW?(l(i),t({disableTransition:!1,override:"closed"})):a&&s===eK.q.DOC_VIEW&&t({disableTransition:!1,override:o?"open":"closed"})},[t,i,o,s,a],[s])},p8="doc-root",p9=(0,tw.eT)(e=>{var t;let{docEditorType:n=tk.Z.COLLABORATIVE}=e,{docId:i,setCollaborativeEditorInstance:r,editor:s}=(0,tw._i)(),o=(0,F.CG)(tV.yx);pF(i,n),(0,pO.j)(),x9(),x7(),aZ(s,".".concat(p8)),a2(s),ty(),pW(s),(0,b.DD)(o,n===tk.Z.COLLABORATIVE);let l=(0,g.useRef)(null),u=null==o?void 0:o.theme,[h,x]=(0,g.useState)(()=>u),p=(0,F.TL)(),m=(0,g.useRef)(!1),{data:j}=(0,t$.EDv)({variables:{docId:i,snapshotId:null==o?void 0:o.currentSnapshotId},skip:!(null==o?void 0:o.currentSnapshotId)}),v=null==j?void 0:null===(t=j.snapshot)||void 0===t?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(i),"background-color: gold"),(0,g.useEffect)(()=>{u&&!m.current&&(x(u),m.current=!0)},[u]),(0,g.useEffect)(()=>{if(!s)return;let e=null==h?void 0:h.config.accentBackgrounds;if(!e||0===e.length){v&&s.commands.setContent(v);return}s.commands.updateThemeAccentImages(e)},[s,h,v]);let{togglePanel:C,isPanelOpen:y,initPanel:k}=ei(p3.Q);p6({toggleToCPanel:C,isToCPanelOpen:y,initializeToCPanel:k}),(0,g.useEffect)(()=>()=>{p((0,ee.qo)())},[p]);let{leftPanelLifecycle:w}=er();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,a.jsx)(f(),{children:(0,a.jsxs)("title",{children:["".concat(o?(0,oK.$)(o.title)+" | ":""),"Gamma"]})}),(0,a.jsxs)(c.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:l,children:[(0,a.jsx)(ef,{panelLifecycle:w}),(0,a.jsxs)(c.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[s&&(0,a.jsx)(p5,{scrollingParentSelector:".".concat(p8),editorWrapperEl:l.current,setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==u?void 0:u.id),templateTheme:u}),(0,a.jsxs)(d.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:p8,children:[(0,a.jsx)(a0,{docId:i,snapshotId:null==o?void 0:o.currentSnapshotId,scrollingParentSelector:".".concat(p8),onCreate:r,theme:h,hideMadeWithGammaBadge:!0}),(0,a.jsx)(u6,{editor:s,showNavigationControls:!0})]})]}),(0,a.jsx)(pQ,{setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==u?void 0:u.id),templateTheme:u})]})]})}),p7="body";var me=n(69205);let mt=e=>{let t=(0,pj.As)(e),[n,i]=(0,g.useState)("up");return(0,g.useEffect)(()=>{let e=document.querySelector(t.scrollSelector);if(!e)return;let n=(null==e?void 0:e.scrollTop)||0,r=e=>Math.abs(e-n)>0,s=e=>e>n&&!(n>0&&0===e)&&!(e>0&&0===n),o=()=>{let t=(null==e?void 0:e.scrollTop)||0;r(t)&&(i(s(t)?"down":"up"),n=t>0?t:0)},l=z()(()=>window.requestAnimationFrame(o),500,{leading:!0});return null==e||e.addEventListener("scroll",l),()=>null==e?void 0:e.removeEventListener("scroll",l)},[t.scrollSelector]),n};var mn=n(80197);let mi=(0,g.memo)(()=>(0,a.jsx)(d.xu,{w:"100%",h:"1px",bg:"gray.200",my:2,mx:-2,_first:{display:"none"},_last:{display:"none"}}));mi.displayName="MenuDivider";let mr=(0,g.memo)(e=>{let{icon:t,children:n,...i}=e;return(0,a.jsx)(d.xu,{as:"button",w:"100%",textAlign:"left",px:2,py:2,fontWeight:"500",color:"gray.700",transition:"all 0.2s",_hover:{bg:"gray.100"},_focus:{outline:"none"},_active:{bg:"gray.200"},borderRadius:"md",...i,children:(0,a.jsxs)(ej.U,{children:[t&&(0,a.jsx)(d.xu,{children:t}),(0,a.jsx)(d.xu,{children:n})]})})});mr.displayName="MenuItem";let ms=e=>{var t,n;let{isOpen:i,onClose:r,doc:s,editingEnabled:o}=e,{user:l}=(0,eX.SE)(),{isConnected:d}=(0,t$.$gs)(),u=(0,rA.e)(),{editor:h}=(0,tw._i)(),p=(0,oK.$)(null==s?void 0:s.title),m=(null==s?void 0:s.createdTime)&&(0,oB.Z)((0,oV.Z)(s.createdTime),"PPP"),f=null==s?void 0:s.id,{isOpen:j,onClose:v,onOpen:C}=(0,nK.M)({id:"analyticsPanelDisclosure"}),[b]=(0,t$.LT4)(),[y]=(0,t$.iX9)(),k=(0,eM.z$)(),w=(0,eX.py)("manage",s)&&!!l,S=(0,eX.py)("manage",s)&&!!l,E=!!(l&&0!==l.workspaceMemberships.length),I=!!l&&S,A=(0,g.useCallback)(async()=>{if(!h)return;let e=h.getJSON();await u({docId:f,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!1}),r()},[f,u,h,r]),T=(0,g.useCallback)(()=>{null==k||k.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:f,source:"toolbar_doc_menu",type:"personal"}),C()},[k,f,C]),_=(0,g.useCallback)(e=>()=>{if(!f)return;let t={id:f};e?b({variables:t,optimisticResponse:{archiveDoc:{...t,archived:e,__typename:"Doc"}}}):y({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:e,__typename:"Doc"}}})},[b,f,y]);return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(eb.Aj,{isOpen:i,onClose:r,children:(0,a.jsxs)(c.k,{w:"100%",h:i?"100%":void 0,direction:"column",children:[(0,a.jsxs)(ej.U,{align:"flex-start",p:6,children:[(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(e5.x,{fontSize:"2xl",fontWeight:"bold",letterSpacing:"tight",noOfLines:6,children:p}),(0,a.jsx)(e5.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(x.cC,{id:"jlWdji",values:{createdTime:m}})}),(0,a.jsx)(eb.kH,{label:null==s?void 0:null===(t=s.createdBy)||void 0===t?void 0:t.email,children:(0,a.jsx)(e5.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(x.cC,{id:"t490IT",values:{0:null==s?void 0:null===(n=s.createdBy)||void 0===n?void 0:n.displayName}})})})]}),(0,a.jsx)(e3.L,{}),(0,a.jsx)(e1.P,{mt:-2,onClick:e=>{e.stopPropagation(),r()}})]}),(0,a.jsxs)(tE.K,{p:3,pt:0,children:[(0,a.jsx)(mi,{}),S&&(0,a.jsx)(mr,{icon:(0,a.jsx)(D.G,{icon:O.nNP,fixedWidth:!0}),onClick:()=>{r(),oJ.T.emit("openSharePanel",{view:"invite"})},children:(0,a.jsx)(x.cC,{id:"iyga2M"})}),o&&(0,a.jsx)(mr,{icon:(0,a.jsx)(D.G,{icon:O.q2v,fixedWidth:!0}),onClick:()=>{r(),oJ.T.emit("toggleThemeBlock",!0)},"data-testid":"mobile-theme-button",children:(0,a.jsx)(x.cC,{id:"W15e8B"})}),(0,a.jsx)(mi,{}),d&&(0,a.jsxs)(a.Fragment,{children:[I&&(0,a.jsx)(mr,{icon:(0,a.jsx)(D.G,{icon:O.Ma4,fixedWidth:!0}),onClick:()=>{r(),T()},children:(0,a.jsx)(x.cC,{id:"qcxxQS"})}),E&&(0,a.jsx)(mr,{icon:(0,a.jsx)(D.G,{icon:O.kZ_,fixedWidth:!0}),onClick:A,children:(0,a.jsx)(x.cC,{id:"euc6Ns"})}),w&&(0,a.jsx)(mr,{icon:(0,a.jsx)(D.G,{icon:O.kwI,fixedWidth:!0}),onClick:()=>{r(),oJ.T.emit("openSharePanel",{view:"export"})},children:(0,a.jsx)(x.cC,{id:"U8WPSi"})}),S&&(0,a.jsx)(mi,{}),S?s.archived?(0,a.jsx)(mr,{icon:(0,a.jsx)(D.G,{icon:O.ZeM,fixedWidth:!0}),onClick:_(!1),children:(0,a.jsx)(x.cC,{id:"yKu/3Y"})}):(0,a.jsx)(mr,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,a.jsx)(D.G,{icon:O.XAH,fixedWidth:!0}),onClick:_(!0),children:(0,a.jsx)(x.cC,{id:"1C/Yjq"})}):null]})]})]})}),s&&j&&(0,a.jsx)(oD,{doc:s,isAnalyticsPanelOpen:j,onAnalyticsPanelClose:v,mode:"full"}),o&&(0,a.jsx)(ug,{})]})},mo=e=>{var t;let{doc:n,editor:i,commentsEnabled:r,editingEnabled:s,onCommentFeedOpen:o,onTocOpen:l}=e,[c]=(0,ck.X)(q.H.lastHomeUrl,"/"),{user:d}=(0,eX.SE)(),u=(0,eX.py)("manage",n)||s,h=(null==n?void 0:null===(t=n.comments)||void 0===t?void 0:t.filter(e=>e.status===t$.Ux9.Open).length)||0,x=mt("editor"),p=(0,j.v9)(W.Pu),m=(0,mn.Jh)(p),f=(0,nA.wj)(p)?"white":"gray.800",v=(0,nA.wj)(p)?"trueblue.300":"trueblue.700",C=(0,g.useCallback)(()=>{i&&i.commands.undo()},[i]),{isOpen:b,onOpen:y,onClose:k}=(0,S.q)();return n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ms,{doc:n,isOpen:b,onClose:k,editingEnabled:s}),(0,a.jsxs)(ej.U,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==x?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==x?1:0,zIndex:"sticky",sx:{...(0,mn.Oj)(m,p,!0),border:"none",filter:"none",borderRadius:0},color:f,children:[d&&(0,a.jsx)(id(),{href:c,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(A.h,{as:rI.r,"aria-label":"Home",color:f,_hover:{bg:"transparent",color:v},icon:(0,a.jsx)(D.G,{icon:O.J9Y,size:"1x"}),variant:"ghost"})}),(0,a.jsx)(e5.x,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:f,children:null==n?void 0:n.title}),(0,a.jsxs)(eC.h,{variant:"ghost",children:[r&&(0,a.jsx)(ev.z,{color:f,_hover:{bg:"transparent",color:v},fontSize:"sm",onClick:o,leftIcon:(0,a.jsx)(D.G,{icon:O.Mzg}),children:h}),s&&(0,a.jsx)(A.h,{color:f,"aria-label":"Undo",onClick:C,_hover:{bg:"transparent",color:v},icon:(0,a.jsx)(D.G,{icon:O.X7o})}),!s&&(0,a.jsx)(A.h,{color:f,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:v},onClick:l,icon:(0,a.jsx)(D.G,{icon:O.xiG})}),u&&(0,a.jsx)(A.h,{color:f,"aria-label":"Open toolbar",_hover:{bg:"transparent",color:v},onClick:y,icon:(0,a.jsx)(D.G,{icon:O.S6C})})]})]})]}):null},ml=e=>{let{doc:t,docEditorType:n,commentsEnabled:i=!0}=e,{docId:r,setCollaborativeEditorInstance:s,editor:o}=(0,tw._i)(),{isOpen:l,onOpen:d,onClose:u}=(0,S.q)({id:"mobile-comment-feed-panel-drawer"}),{isOpen:h,onOpen:x,onClose:p}=(0,S.q)({id:"mobile-toc-drawer"}),[m,f]=(0,g.useState)(null);console.debug("%c[MobileEditorWrapper] RENDER - ".concat(r),"background-color: gold");let j=(0,y.ye)("mobileEditing"),C=(0,eX.py)("edit",t),b=j&&C;return(0,a.jsx)(v.Sy,{children:(0,a.jsxs)(c.k,{ref:(0,g.useCallback)(e=>f(e),[]),direction:"column",flex:1,children:[(0,a.jsx)(mo,{doc:t,editor:o,onCommentFeedOpen:d,commentsEnabled:!b&&i,editingEnabled:b,onTocOpen:x}),n===tk.Z.PUBLIC_STATIC?(0,a.jsx)(a0,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:p7,onCreate:s}):n===tk.Z.EXAMPLE_STATIC?(0,a.jsx)(rz,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:p7,onCreate:s}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eP.Ge,{doc:t,docId:r,readOnly:!b,onCreate:s,scrollingParentSelector:p7}),o&&(0,a.jsx)(eJ,{editor:o})]}),i&&l&&(0,a.jsx)(eb.Aj,{isOpen:l,onClose:u,drawerProps:{autoFocus:!1,returnFocusOnClose:!1},children:(0,a.jsx)(ir,{onClose:u,editor:o})}),h&&(0,a.jsx)(eb.Aj,{isOpen:h,onClose:p,drawerProps:{returnFocusOnClose:!1},children:(0,a.jsx)(me.o,{rootElement:m,handleClose:p})}),(0,a.jsx)(us,{doc:t,showButton:!1}),(0,a.jsx)(eN.a,{children:(0,a.jsx)(rw,{editor:o})})]})})},ma=(0,tw.eT)(e=>{let{docEditorType:t}=e,{docId:n,isUnauthorized:i,passwordRequired:r,editor:s}=(0,tw._i)();pF(n,t);let{editorAnimationsClass:o,editorAnimationsCSSVars:l}=(0,eL.k)({editor:s,scrollingParentSelector:p7});pE(n,s),(0,pO.j)();let d=(0,g.useRef)(null),u=(0,F.CG)(tV.yx);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(n),"background-color: gold");let h=t===tk.Z.COLLABORATIVE;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(f(),{children:[(0,a.jsxs)("title",{children:["".concat(u?(0,oK.$)(u.title)+" | ":""),"Gamma"]}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,a.jsx)(lW.xB,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),r?(0,a.jsx)(aY,{docId:n}):i?(0,a.jsxs)(c.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",Z.Yc,"."]}):(0,a.jsx)(c.k,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:d,flex:"1",className:o,style:{...l},children:(0,a.jsx)(ml,{doc:u,docEditorType:t,commentsEnabled:h})})]})})},31003:function(e){var t;t=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}return n}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"Channel",function(){return E}),n.d(t,"Serializer",function(){return I}),n.d(t,"Socket",function(){return A}),n.d(t,"LongPoll",function(){return T}),n.d(t,"Ajax",function(){return _}),n.d(t,"Presence",function(){return O});var d="undefined"!=typeof window?window:null,u=("undefined"!=typeof self?self:null)||d||void 0,h="closed",x="errored",p="joined",m="joining",f="leaving",g="phx_close",j="phx_error",v="phx_join",C="phx_reply",b="phx_leave",y=[g,j,v,C,b],k="websocket",w=function(e){return"function"==typeof e?e:function(){return e}},S=function(){function e(t,n,i,r){l(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return c(e,[{key:"resend",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(e){var t=e.status,n=e.response;e.ref,this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(n)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:"trigger",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),E=function(){function e(t,n,i){var r=this;l(this,e),this.state=h,this.topic=t,this.params=w(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new S(this,v,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new D(function(){r.socket.isConnected()&&r.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(function(){return r.rejoinTimer.reset()})),this.stateChangeRefs.push(this.socket.onOpen(function(){r.rejoinTimer.reset(),r.isErrored()&&r.rejoin()})),this.joinPush.receive("ok",function(){r.state=p,r.rejoinTimer.reset(),r.pushBuffer.forEach(function(e){return e.send()}),r.pushBuffer=[]}),this.joinPush.receive("error",function(){r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.onClose(function(){r.rejoinTimer.reset(),r.socket.hasLogger()&&r.socket.log("channel","close ".concat(r.topic," ").concat(r.joinRef())),r.state=h,r.socket.remove(r)}),this.onError(function(e){r.socket.hasLogger()&&r.socket.log("channel","error ".concat(r.topic),e),r.isJoining()&&r.joinPush.reset(),r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){r.socket.hasLogger()&&r.socket.log("channel","timeout ".concat(r.topic," (").concat(r.joinRef(),")"),r.joinPush.timeout),new S(r,b,w({}),r.timeout).send(),r.state=x,r.joinPush.reset(),r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.on(C,function(e,t){r.trigger(r.replyEventName(t),e)})}return c(e,[{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(e){this.on(g,e)}},{key:"onError",value:function(e){return this.on(j,function(t){return e(t)})}},{key:"on",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:"off",value:function(e,t){this.bindings=this.bindings.filter(function(n){return!(n.event===e&&(void 0===t||t===n.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(t=t||{},!this.joinedOnce)throw Error("tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var i=new S(this,e,function(){return t},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=f;var n=function(){e.socket.hasLogger()&&e.socket.log("channel","leave ".concat(e.topic)),e.trigger(g,"leave")},i=new S(this,b,w({}),t);return i.receive("ok",function(){return n()}).receive("timeout",function(){return n()}),i.send(),this.canPush()||i.trigger("ok",{}),i}},{key:"onMessage",value:function(e,t,n){return t}},{key:"isLifecycleEvent",value:function(e){return y.indexOf(e)>=0}},{key:"isMember",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=m,this.joinPush.resend(e))}},{key:"trigger",value:function(e,t,n,i){var r=this.onMessage(e,t,n,i);if(t&&!r)throw Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var s=this.bindings.filter(function(t){return t.event===e}),o=0;o<s.length;o++)s[o].callback(r,n,i||this.joinRef())}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===h}},{key:"isErrored",value:function(){return this.state===x}},{key:"isJoined",value:function(){return this.state===p}},{key:"isJoining",value:function(){return this.state===m}},{key:"isLeaving",value:function(){return this.state===f}}]),e}(),I={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(e,t){return t(e.payload.constructor===ArrayBuffer?this.binaryEncode(e):JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload]))},decode:function(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));var n=r(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})},binaryEncode:function(e){var t=e.join_ref,n=e.ref,i=e.event,r=e.topic,s=e.payload,o=this.META_LENGTH+t.length+n.length+r.length+i.length,l=new ArrayBuffer(this.HEADER_LENGTH+o),a=new DataView(l),c=0;a.setUint8(c++,this.KINDS.push),a.setUint8(c++,t.length),a.setUint8(c++,n.length),a.setUint8(c++,r.length),a.setUint8(c++,i.length),Array.from(t,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(n,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(r,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(i,function(e){return a.setUint8(c++,e.charCodeAt(0))});var d=new Uint8Array(l.byteLength+s.byteLength);return d.set(new Uint8Array(l),0),d.set(new Uint8Array(s),l.byteLength),d.buffer},binaryDecode:function(e){var t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,i);case this.KINDS.reply:return this.decodeReply(e,t,i);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,i)}},decodePush:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,l=n.decode(e.slice(o,o+i));o+=i;var a=n.decode(e.slice(o,o+r));o+=r;var c=n.decode(e.slice(o,o+s));return o+=s,{join_ref:l,ref:null,topic:a,event:c,payload:e.slice(o,e.byteLength)}},decodeReply:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,a=n.decode(e.slice(l,l+i));l+=i;var c=n.decode(e.slice(l,l+r));l+=r;var d=n.decode(e.slice(l,l+s));l+=s;var u=n.decode(e.slice(l,l+o));return l+=o,{join_ref:a,ref:c,topic:d,event:C,payload:{status:u,response:e.slice(l,e.byteLength)}}},decodeBroadcast:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=this.HEADER_LENGTH+2,o=n.decode(e.slice(s,s+i));s+=i;var l=n.decode(e.slice(s,s+r));return s+=r,{join_ref:null,ref:null,topic:o,event:l,payload:e.slice(s,e.byteLength)}}},A=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||u.WebSocket||T,this.defaultEncoder=I.encode.bind(I),this.defaultDecoder=I.decode.bind(I),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==T?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),d&&d.addEventListener&&d.addEventListener("unload",function(e){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=w(i.params||{}),this.endPoint="".concat(t,"/").concat(k),this.vsn=i.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new D(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return c(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var e=_.appendParams(_.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?"".concat(this.protocol(),":").concat(e):"".concat(this.protocol(),"://").concat(location.host).concat(e)}},{key:"disconnect",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:"connect",value:function(e){var t=this;e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=w(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:"log",value:function(e,t,n){this.logger(e,t,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}},{key:"onClose",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}},{key:"onError",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}},{key:"onMessage",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(e){return(0,r(e,2)[1])()})}},{key:"resetHeartbeat",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(e,t,n){var i=this;if(!this.conn)return e&&e();this.waitForBufferDone(function(){i.conn&&(t?i.conn.close(t,n||""):i.conn.close()),i.waitForSocketClosed(function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),e&&e()})})}},{key:"waitForBufferDone",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.bufferedAmount?setTimeout(function(){t.waitForBufferDone(e,n+1)},150*n):e()}},{key:"waitForSocketClosed",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&3!==this.conn.readyState?setTimeout(function(){t.waitForSocketClosed(e,n+1)},150*n):e()}},{key:"onConnClose",value:function(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"onConnError",value:function(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(j)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case 0:return"connecting";case 1:return"open";case 2:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(function(t){return t.joinRef()!==e.joinRef()})}},{key:"off",value:function(e){for(var t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(function(t){var n=r(t,1)[0];return -1===e.indexOf(n)})}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new E(e,t,this);return this.channels.push(n),n}},{key:"push",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,r=e.payload,s=e.ref,o=e.join_ref;this.log("push","".concat(n," ").concat(i," (").concat(o,", ").concat(s,")"),r)}this.isConnected()?this.encode(e,function(e){return t.conn.send(e)}):this.sendBuffer.push(function(){return t.encode(e,function(e){return t.conn.send(e)})})}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(e){this.closeWasClean=!1,1===this.conn.readyState&&this.conn.close(1e3,e)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,function(e){var n=e.topic,i=e.event,s=e.payload,o=e.ref,l=e.join_ref;o&&o===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log("receive","".concat(s.status||""," ").concat(n," ").concat(i," ").concat(o&&"("+o+")"||""),s);for(var a=0;a<t.channels.length;a++){var c=t.channels[a];c.isMember(n,i,s,l)&&c.trigger(i,s,o,l)}for(var d=0;d<t.stateChangeCallbacks.message.length;d++)(0,r(t.stateChangeCallbacks.message[d],2)[1])(e)})}},{key:"leaveOpenTopic",value:function(e){var t=this.channels.find(function(t){return t.topic===e&&(t.isJoined()||t.isJoining())});t&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.leave())}}]),e}(),T=function(){function e(t){l(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=0,this.poll()}return c(e,[{key:"normalizeEndpoint",value:function(e){return e.replace("ws://","http://").replace("wss://","https://").replace(RegExp("(.*)/"+k),"$1/longpoll")}},{key:"endpointURL",value:function(){return _.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=0}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var e=this;1!==this.readyState&&0!==this.readyState||_.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,r=t.messages;e.token=i}else n=0;switch(n){case 200:r.forEach(function(t){return e.onmessage({data:t})}),e.poll();break;case 204:e.poll();break;case 410:e.readyState=1,e.onopen(),e.poll();break;case 403:e.onerror(),e.close();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw Error("unhandled poll status ".concat(n))}})}},{key:"send",value:function(e){var t=this;_.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())})}},{key:"close",value:function(e,t){this.readyState=3,this.onclose()}}]),e}(),_=function(){function e(){l(this,e)}return c(e,null,[{key:"request",value:function(e,t,n,i,r,s,o){if(u.XDomainRequest){var l=new XDomainRequest;this.xdomainRequest(l,e,t,i,r,s,o)}else{var a=new u.XMLHttpRequest;this.xhrRequest(a,e,t,n,i,r,s,o)}}},{key:"xdomainRequest",value:function(e,t,n,i,r,s,o){var l=this;e.timeout=r,e.open(t,n),e.onload=function(){var t=l.parseJSON(e.responseText);o&&o(t)},s&&(e.ontimeout=s),e.onprogress=function(){},e.send(i)}},{key:"xhrRequest",value:function(e,t,n,i,r,s,o,l){var a=this;e.open(t,n,!0),e.timeout=s,e.setRequestHeader("Content-Type",i),e.onerror=function(){l&&l(null)},e.onreadystatechange=function(){e.readyState===a.states.complete&&l&&l(a.parseJSON(e.responseText))},o&&(e.ontimeout=o),e.send(r)}},{key:"parseJSON",value:function(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}},{key:"serialize",value:function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var s=t?"".concat(t,"[").concat(r,"]"):r,o=e[r];"object"===i(o)?n.push(this.serialize(o,s)):n.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}return n.join("&")}},{key:"appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\?/)?"&":"?";return"".concat(e).concat(n).concat(this.serialize(t))}}]),e}();_.states={complete:4};var O=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e);var r=i.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(r.state,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,r,s),n.pendingDiffs.forEach(function(t){n.state=e.syncDiff(n.state,t,r,s)}),n.pendingDiffs=[],o()}),this.channel.on(r.diff,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,r,s),o())})}return c(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"list",value:function(t){return e.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(e,t,n,i){var r=this,s=this.clone(e),o={},l={};return this.map(s,function(e,n){t[e]||(l[e]=n)}),this.map(t,function(e,t){var n=s[e];if(n){var i=t.metas.map(function(e){return e.phx_ref}),a=n.metas.map(function(e){return e.phx_ref}),c=t.metas.filter(function(e){return 0>a.indexOf(e.phx_ref)}),d=n.metas.filter(function(e){return 0>i.indexOf(e.phx_ref)});c.length>0&&(o[e]=t,o[e].metas=c),d.length>0&&(l[e]=r.clone(n),l[e].metas=d)}else o[e]=t}),this.syncDiff(s,{joins:o,leaves:l},n,i)}},{key:"syncDiff",value:function(e,t,n,i){var r=t.joins,l=t.leaves,a=this.clone(e);return n||(n=function(){}),i||(i=function(){}),this.map(r,function(e,t){var i=a[e];if(a[e]=t,i){var r,l=a[e].metas.map(function(e){return e.phx_ref}),c=i.metas.filter(function(e){return 0>l.indexOf(e.phx_ref)});(r=a[e].metas).unshift.apply(r,function(e){if(Array.isArray(e))return o(e)}(c)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(c)||s(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}n(e,i,t)}),this.map(l,function(e,t){var n=a[e];if(n){var r=t.metas.map(function(e){return e.phx_ref});n.metas=n.metas.filter(function(e){return 0>r.indexOf(e.phx_ref)}),i(e,n,t),0===n.metas.length&&delete a[e]}}),a}},{key:"list",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,function(e,n){return t(e,n)})}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(n){return t(n,e[n])})}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),D=function(){function e(t,n){l(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return c(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}()}])},e.exports=t()},75461:function(e,t,n){"use strict";n.d(t,{W:function(){return i},w:function(){return r}});var[i,r]=(0,n(9165).k)({name:"BreadcrumbStylesContext",errorMessage:"useBreadcrumbStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Breadcrumb />\" "})},25215:function(e,t,n){"use strict";n.d(t,{a:function(){return h}});var i=n(75461),r=n(31053),s=n(25578),o=n(29058),l=n(91982),a=n(84586),c=n(76801),d=n(2784),u=n(52322),h=(0,o.G)(function(e,t){let n=(0,l.jC)("Breadcrumb",e),{children:o,spacing:h="0.5rem",separator:x="/",className:p,listProps:m,...f}=(0,a.Lr)(e),g=(0,s.W)(o),j=g.length,v=g.map((e,t)=>(0,d.cloneElement)(e,{separator:x,spacing:h,isLastChild:j===t+1})),C=(0,r.cx)("chakra-breadcrumb",p);return(0,u.jsx)(c.m.nav,{ref:t,"aria-label":"breadcrumb",className:C,__css:n.container,...f,children:(0,u.jsx)(i.W,{value:n,children:(0,u.jsx)(c.m.ol,{className:"chakra-breadcrumb__list",...m,__css:{display:"flex",alignItems:"center",...n.list},children:v})})})});h.displayName="Breadcrumb"},58450:function(e,t,n){"use strict";n.d(t,{g:function(){return h}});var i=n(41421),r=n(75461),s=n(29058),o=n(76801),l=n(52322),a=(0,s.G)(function(e,t){let{spacing:n,...i}=e,s={mx:n,...(0,r.w)().separator};return(0,l.jsx)(o.m.span,{ref:t,role:"presentation",...i,__css:s})});a.displayName="BreadcrumbSeparator";var c=n(25578),d=n(31053),u=n(2784),h=(0,s.G)(function(e,t){let{isCurrentPage:n,separator:s,isLastChild:h,spacing:x,children:p,className:m,...f}=e,g=(0,c.W)(p).map(e=>e.type===i.A?(0,u.cloneElement)(e,{isCurrentPage:n}):e.type===a?(0,u.cloneElement)(e,{spacing:x,children:e.props.children||s}):e),j={display:"inline-flex",alignItems:"center",...(0,r.w)().item},v=(0,d.cx)("chakra-breadcrumb__list-item",m);return(0,l.jsxs)(o.m.li,{ref:t,className:v,...f,__css:j,children:[g,!h&&(0,l.jsx)(a,{spacing:x,children:s})]})});h.displayName="BreadcrumbItem"},41421:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var i=n(75461),r=n(29058),s=n(76801),o=n(31053),l=n(52322),a=(0,r.G)(function(e,t){let{isCurrentPage:n,as:r,className:a,href:c,...d}=e,u=(0,i.w)(),h={ref:t,as:r,className:(0,o.cx)("chakra-breadcrumb__link",a),...d};return n?(0,l.jsx)(s.m.span,{"aria-current":"page",__css:u.link,...h}):(0,l.jsx)(s.m.a,{__css:u.link,href:c,...h})});a.displayName="BreadcrumbLink"},75397:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(32388),r=n(31053),s=n(29058),o=n(76801),l=n(52322),a=(0,s.G)(function(e,t){let{className:n,...s}=e,a=(0,i.v)();return(0,l.jsx)(o.m.div,{ref:t,className:(0,r.cx)("chakra-card__body",n),__css:a.body,...s})})},32388:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},v:function(){return r}});var[i,r]=(0,n(15706).eC)("Card")},56453:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(32388),r=n(31053),s=n(29058),o=n(84586),l=n(91982),a=n(76801),c=n(52322),d=(0,s.G)(function(e,t){let{className:n,children:s,direction:d="column",justify:u,align:h,...x}=(0,o.Lr)(e),p=(0,l.jC)("Card",e);return(0,c.jsx)(a.m.div,{ref:t,className:(0,r.cx)("chakra-card",n),__css:{display:"flex",flexDirection:d,justifyContent:u,alignItems:h,position:"relative",minWidth:0,wordWrap:"break-word",...p.container},...x,children:(0,c.jsx)(i.Y,{value:p,children:s})})})},19521:function(e){"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}}]);
//# sourceMappingURL=8188-9dfa8444843ed9ea.js.map