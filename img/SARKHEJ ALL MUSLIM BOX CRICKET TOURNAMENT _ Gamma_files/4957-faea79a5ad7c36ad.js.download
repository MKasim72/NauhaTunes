"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4957],{71147:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(52117),o=r(79151),i=r(18e3),a=r(23160);function s(e,t){if((0,a.Z)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var r="years"in t?(0,o.Z)(t.years):0,s="months"in t?(0,o.Z)(t.months):0,l="weeks"in t?(0,o.Z)(t.weeks):0,c="days"in t?(0,o.Z)(t.days):0,d="hours"in t?(0,o.Z)(t.hours):0,u="minutes"in t?(0,o.Z)(t.minutes):0,f="seconds"in t?(0,o.Z)(t.seconds):0,p=(0,i.Z)(e),m=s||r?function(e,t){(0,a.Z)(2,arguments);var r=(0,i.Z)(e),n=(0,o.Z)(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var s=r.getDate(),l=new Date(r.getTime());return(l.setMonth(r.getMonth()+n+1,0),s>=l.getDate())?l:(r.setFullYear(l.getFullYear(),l.getMonth(),s),r)}(p,s+12*r):p;return new Date((c||l?(0,n.Z)(m,c+7*l):m).getTime()+1e3*(f+60*(u+60*d)))}},6360:function(e,t,r){r.d(t,{C:function(){return k},O:function(){return S}});var n=r(52322),o=r(38035),i=r(17993),a=r(62614),s=r(67109),l=r(42946),c=r(49929),d=r(5879),u=r(55388),f=r(2689),p=r.n(f),m=r(2784),h=r(71383),g=r(27210),x=r(3939),b=r(21298),C=r(93199),y=r(9683),v=r(67830),j=r(67527);let w={...x.Y,...y.R,...b.dE},k="ai-card-editor",S=(0,m.memo)(e=>{let{...t}=e,r=(0,h.CG)(C.$X),s=(0,u.jE)({...t,extensions:v.XL,editorProps:{attributes:{"data-testid":"ai-content-editor"}}});s&&(s.editorId=k);let f=(0,h.CG)(C.g8),x=(0,h.CG)(C.CC);(0,m.useEffect)(()=>{s&&s.setEditable(!r)},[r,s]);let b=(0,m.useCallback)(()=>{null==s||s.chain().insertContentAt(null==s?void 0:s.state.doc.content.size,{type:"card",content:[{type:"paragraph"}]}).selectInsertedNode().run()},[s]);return(0,j.m)(s),(0,n.jsxs)(o.k,{flex:"1",direction:"column",sx:w,p:{base:2,md:3},children:[(0,n.jsx)(g.kg,{editor:s,style:{wordBreak:"break-word",display:"flex",flexDirection:"column"}}),r&&(0,n.jsx)(i.g,{children:p()(f-x).map(e=>(0,n.jsx)(R,{},e))}),!r&&(0,n.jsx)(a.z,{boxShadow:"none",leftIcon:(0,n.jsx)(c.G,{icon:l.r8p,fixedWidth:!0}),onClick:b,children:(0,n.jsx)(d.cC,{id:"sFY+gw"})})]})});S.displayName="AICardEditor";let R=()=>(0,n.jsx)(s.O,{height:14,width:"100%",borderRadius:"md"})},9683:function(e,t,r){r.d(t,{R:function(){return i}});var n=r(4031),o=r(79546);let i={".ProseMirror":{flex:1,...n.J,...o.l},".block":{my:"0.75rem","&.first-block":{mt:"0px !important"},"&.last-block":{mb:"0px !important"}},".block-heading":{fontWeight:"bold",lineHeight:"1.25",_first:{mt:0}},h1:{fontSize:"1.5em"},h2:{fontSize:"1.25em"},h3:{fontSize:"1.125em"},"a[href]":{color:"var(--chakra-colors-trueblue-600)",textDecoration:"underline"}}},67830:function(e,t,r){r.d(t,{XL:function(){return eP},uJ:function(){return eE},dW:function(){return eI}});var n=r(37243),o=r(86900),i=r(42626),a=r(7315),s=r(36518),l=r(71391),c=r(86509),d=r(9432),u=r(70675),f=r(38438),p=r(39615),m=r(39475),h=r(50576),g=r(27846),x=r(50738),b=r(35013),C=r(21386),y=r(88371),v=r(66562),j=r(68527),w=r(75325),k=r(26714),S=r(66054),R=r(24424),N=r(9355),D=r(45989),E=r(44170),P=r(90887),I=r(27210),z=r(12971),A=r(97912),T=r(52322),M=r(28535),G=r(6643),_=r(88424);let H=e=>{let{node:t}=e,{uploadStatus:r}=t.attrs;return(0,T.jsx)(I.T5,{children:(0,T.jsxs)(M.xu,{"data-selection-ring":!0,pos:"relative",borderRadius:"md",w:"fit-content",css:{"--media-maxH":"8em"},children:[r===N.D.Error?(0,T.jsx)(_.k3,{w:"12em",h:"6em"}):(0,T.jsx)(G.Ri,{imageAttrs:t.attrs,"data-drag-handle":!0}),r===N.D.Uploading&&(0,T.jsx)(_.HI,{}),r==N.D.Error&&(0,T.jsx)(_.s7,{})]})})},L=R.ZP.extend({selectable:!0,draggable:!0,expandable:!0,addNodeView:()=>(0,I.fW)(H,{update:E.E7}),renderHTML(e){let{node:t}=e,r=t.attrs,{src:n,tempUrl:o,uploadStatus:i}=r;return["img",{src:i===N.D.Error?"":n||((null==o?void 0:o.startsWith("http"))?o:""),alt:(0,D.K)(r),meta:JSON.stringify(r.meta),resize:JSON.stringify(r.resize)}]},parseHTML:()=>[{tag:"img[src]",getAttrs:e=>{let t=e.getAttribute("src");return(0,A.S6)(t)?{src:t}:{tempUrl:t}}}],addAttributes:()=>({id:(0,P.b)(j.G),src:{},tempUrl:{},uploadStatus:{},meta:{...(0,z.sw)("meta")},resize:{...(0,z.sw)("resize")}})});var O=r(84305);let W=e=>{let{selected:t}=e;return(0,T.jsx)(I.T5,{children:(0,T.jsx)(M.xu,{pos:"relative",draggable:"true","data-drag-handle":!0,cursor:"grab",contentEditable:"false",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",height:"1.25rem",color:t?"trueblue.400":"gray.400",lineHeight:"1rem",fontWeight:"800",children:"---"})})},Z=/^(---|___|â€”-)/,F=n.NB.create({name:"sectionBreak",group:"block",atom:!0,selectable:!0,draggable:!0,parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",(0,n.P1)(t)]},addNodeView:()=>(0,I.fW)(W),addInputRules(){return[(0,O.ok)({find:Z,type:this.type})]}});var U=r(87283),V=r(81047),B=r(31335),q=r(27191),J=r(52780);let K=new q.Sy({props:{decorations:e=>{let{doc:t}=e,r=[],n=1;return t.descendants((e,t)=>{"card"===e.type.name&&(r.push(J.p.node(t,t+e.nodeSize,{},{number:n,isSectionCardPluginDecoration:!0})),n++)}),0==r.length?J.EH.empty:J.EH.create(t,r)}}}),X=e=>{let t=e.find(e=>e.spec.isSectionCardPluginDecoration);return t?t.spec:{number:0,isSectionCardPluginDecoration:!0}};var Y=r(29117),$=r(77533),Q=r(38035),ee=r(32899),et=r(10625),er=r(67046),en=r(332),eo=r(99058),ei=r(25481),ea=r(27599),es=r(42946),el=r(49929),ec=r(64253),ed=r(5879),eu=r(87254),ef=r(2784),ep=r(77198),em=r(93199),eh=r(71383),eg=r(92035),ex=r(23491);let eb={r:235,g:248,b:255},eC={r:255,g:245,b:255},ey={r:107,g:70,b:193},ev={r:43,g:108,b:176},ej=(e,t,r,n)=>n?{bg:"gray.100",text:"gray.600"}:{bg:(0,ex.Py)(eb,eC,e/Math.min(r,t)),text:(0,ex.Py)(ev,ey,e/Math.min(r,t))},ew=e=>{let{decorations:t,editor:r,getPos:n}=e,{number:o}=X(t),i=(0,eh.CG)(em.CC),{maxCards:a,canUpgrade:s}=(0,ep.hw)(),l=o>a,c=o===i,d=ej(o,i,a,l),u=(0,ef.useCallback)(()=>{let e=n(),t=r.view.state.doc.nodeAt(e);if(!t){console.error("[SectionCardView] Cannot append card. Node unknown");return}let o=e+t.nodeSize;r.chain().insertContentAt(o,{type:"card",content:[{type:"paragraph"}]}).focus().selectInsertedNode().run()},[r,n]),f=(0,ef.useCallback)(()=>{r.commands.selectNodeAtPos(n())},[r,n]),p=(0,ef.useCallback)(()=>{let e=n(),t=r.view.state.doc.nodeAt(e);if(!t){console.error("[SectionCardView] Cannot delete card. Node unknown");return}r.chain().deleteRange({from:e,to:e+t.nodeSize}).selectInsideNodeAtPos(e).focus().run()},[r,n]),m=(0,ef.useCallback)(()=>{let e=n();if(!r.view.state.doc.nodeAt(e)){console.error("[SectionCardView] Cannot focus card. Node unknown");return}r.chain().selectInsideNodeAtPos(e).focus().run()},[r,n]),h=(0,k.Od)(t);return(0,T.jsxs)(I.T5,{role:"group",children:[(0,T.jsxs)(Y.U,{className:"card",border:"1px solid",borderColor:h?"var(--chakra-ring-color)":"blackAlpha.100",shadow:"sm",_hover:{shadow:"md"},transitionProperty:"box-shadow",transitionDuration:"normal",bg:"white",borderRadius:"md",spacing:0,align:"stretch","data-selection-ring":!0,pos:"relative",my:3,mt:1===o?0:void 0,role:"group",children:[!(0,eg.s2)()&&(0,T.jsx)(M.xu,{position:"absolute",color:d.text,zIndex:"1",top:"3.5",insetStart:"0",pointerEvents:"none",opacity:"0",_groupHover:{opacity:.75},children:(0,T.jsx)(el.G,{icon:es.Okg,fixedWidth:!0})}),l&&(0,T.jsx)(M.Cd,{size:"6px",position:"absolute",zIndex:"2",top:"1.5",left:"1.5",bg:"sunglow.400"}),(0,T.jsx)(ec.kH,{label:l&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)($.x,{children:[(0,T.jsx)(ed.cC,{id:"rayOuP"})," "]}),(0,T.jsx)($.x,{color:"gray.400",children:s?(0,T.jsx)(ed.cC,{id:"W8sobv",values:{MAX_CARDS_PRO:ep.Fv}}):(0,T.jsx)(ed.cC,{id:"yLG7qf"})})]}),placement:"top",children:(0,T.jsx)(Q.k,{dir:"column",align:"start",justify:"center",pe:1,ps:2,py:{base:3.5,md:4},w:12,cursor:l?"help":"grab","data-drag-handle":!0,contentEditable:!1,onClick:f,fontSize:o>=100?"xs":"sm",fontFamily:"mono",fontWeight:"600",borderLeftRadius:"inherit",userSelect:"none",transitionProperty:"filter",transitionDuration:"normal",_hover:{filter:"brightness(0.95)"},bg:d.bg,color:d.text,children:o})}),(0,T.jsx)(M.xu,{p:{base:"0.75em",md:"1em"},flex:1,color:l?"gray.600":void 0,position:"relative",children:(0,T.jsx)(I.ms,{})}),(0,T.jsx)(eS,{addCard:u,focusCard:m,deleteCard:p})]}),!(0,eg.s2)()&&!c&&(0,T.jsx)(ek,{addCard:u})]})},ek=(0,ef.memo)(e=>{let{addCard:t}=e;return(0,T.jsxs)(Q.k,{w:"100%",h:1,borderRadius:"md",bg:"trueblue.200",transitionProperty:"opacity",transitionDuration:"slow",opacity:0,_hover:{opacity:1},_focusWithin:{opacity:1},contentEditable:!1,my:1,dir:"column",align:"center",justify:"center",pos:"absolute",transform:"translateY(-0.75rem)",zIndex:1,children:[(0,T.jsx)(M.xu,{pos:"absolute",top:-2,bottom:-2,insetStart:0,insetEnd:0}),(0,T.jsx)(ec.kH,{placement:"top",label:eu.ag._({id:"sFY+gw"}),shortcut:"---",children:(0,T.jsx)(ee.h,{pos:"absolute",variant:"solid",icon:(0,T.jsx)(el.G,{icon:es.r8p}),"aria-label":"Add card",isRound:!0,size:"xs",onClick:t,tabIndex:-1})})]})});ek.displayName="CardDivider";let eS=(0,ef.memo)(e=>{let{addCard:t,deleteCard:r,focusCard:n}=e;return(0,T.jsx)(Y.U,{pe:{base:2,md:2.5},pt:{base:2,md:3},alignSelf:"start",children:(0,eg.s2)()?(0,T.jsx)(et.v,{children:e=>{let{onClose:o}=e;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(er.j,{onClick:n,as:ee.h,colorScheme:"gray",variant:"ghost",size:"sm",icon:(0,T.jsx)(el.G,{icon:es.S6C,fixedWidth:!0})}),(0,T.jsx)(en.h,{children:(0,T.jsxs)(eo.q,{zIndex:"tooltip",children:[(0,T.jsx)(ei.s,{onClick:()=>{o(),t()},icon:(0,T.jsx)(el.G,{icon:es.L26,fixedWidth:!0}),children:(0,T.jsx)(ed.cC,{id:"90n2YU"})}),(0,T.jsx)(ea.R,{}),(0,T.jsx)(ei.s,{onClick:()=>{r(),o()},color:"red",icon:(0,T.jsx)(el.G,{icon:es.Vui,fixedWidth:!0}),children:(0,T.jsx)(ed.cC,{id:"nabda1"})})]})})]})}}):(0,T.jsx)(ec.kH,{label:(0,T.jsx)(ed.cC,{id:"nabda1"}),placement:"top",children:(0,T.jsx)(ee.h,{colorScheme:"gray",variant:"ghost",opacity:"0",_groupHover:{opacity:1},_focus:{opacity:1},transitionProperty:"opacity",transitionDuration:"slow",size:"sm",onClick:r,"aria-label":eu.ag._({id:"nabda1"}),icon:(0,T.jsx)(el.G,{icon:es.Vui,fixedWidth:!0})})})})});eS.displayName="CardActions";let eR=/^(---|___|â€”-)$/,eN=n.NB.create({name:"card",content:"block+",selectable:!0,draggable:!0,isolating:!0,parseHTML:()=>[{tag:"section"}],renderHTML(e){let{HTMLAttributes:t}=e;return["section",(0,n.P1)(t),0]},addNodeView:()=>(0,I.fW)(ew),addProseMirrorPlugins:()=>[K],addInputRules:()=>[new n.VK({find:eR,handler:e=>{let{state:t,range:r}=e,{tr:n}=t;(0,U.X)({tr:n.deleteRange(r.from,r.to),dispatch:!0})}})],addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.mergeCardsOnDelete(!1),Delete:()=>this.editor.commands.mergeCardsOnDelete(!0),Tab:()=>this.editor.commands.selectNextCard(!0),"Shift-Tab":()=>this.editor.commands.selectNextCard(!1)}},addCommands:()=>({selectNextCard:e=>t=>{let{state:r,dispatch:o,commands:i}=t;if(!o)return!0;let{selection:a}=r,s=(0,n.Kk)(B.KH)(a);if(!s||!a.empty)return!1;let l=r.doc.resolve(s.pos),c=l.index();if(e){if(c===l.parent.childCount-1)return!1;i.selectInsideNodeAtPos(s.pos+s.node.nodeSize)}else{if(0===c)return!1;let e=l.posAtIndex(c-1);i.selectInsideNodeAtPos(e)}return!0},mergeCardsOnDelete:e=>t=>{let{tr:r,state:o,dispatch:i}=t;if(!i)return!0;let{selection:a}=o,s=(0,n.Kk)(B.KH)(a);if(!s||!a.empty)return!1;try{if(!(0,V.pt)(a,e))return!1;return e?(0,V.Yh)(s.pos,r,o):(0,V.Gq)(s.pos,r)}catch(e){return console.debug("[CardCommands] mergeCardsOnDelete failed",e),!1}}})}),eD=[c.A,h.l,f.n,p.x,b.Hy,l.X,o.d8,m.v,d.Tx,u.ZP.configure({openOnClick:!1}),y.aV,C.g,v.k,S.U,g.m,s.f,a.m.configure({color:"var(--chakra-colors-trueblue-200)",width:3,class:"ProseMirror-dropcursor"}),k.Jn,L,w.R,j.z],eE=[...eD,F,i.B.extend({content:"block+"})],eP=[...eD,eN,i.B.extend({content:"card+"})],eI=(e,t)=>{let r=(0,n.J1)("freeform"===t?eE:eP);return"structured"===t&&(e=e.split("<hr>").map(e=>"<section>".concat(e,"</section>")).join("\n")),(0,x.T)(e,r)}},67527:function(e,t,r){r.d(t,{m:function(){return a}});var n=r(2784),o=r(20760),i=r(97134);let a=e=>{let{currentWorkspace:t}=(0,i.SE)(),r=null==t?void 0:t.id;(0,n.useEffect)(()=>{e&&!e.isDestroyed&&r&&e.commands.initializeUploadExtension(r)},[e,r]),(0,o.n)(e)}},46692:function(e,t,r){r.d(t,{HJ:function(){return o},Ry:function(){return a},u$:function(){return i}});var n=r(2784);let o=["createWithAI","createGenerate","legacyGuidedMode","createPaste","createImport","promptEditor","home"],i=(0,n.createContext)({goToScreen:()=>{throw Error("goToScreen not available. Did you forget to wrap your component in RouterNavigationContext?")},onDocGenerationLoaded:()=>{},navEnabled:!0,webpageOnly:!1,skipThemeStep:!1}),a=()=>(0,n.useContext)(i)},91309:function(e,t,r){r.d(t,{jX:function(){return s},vZ:function(){return a}});var n=r(52322),o=r(2784);let i=o.createContext({});function a(){return(0,o.useContext)(i)}let s=e=>{let{children:t}=e,r=o.useRef();return(0,n.jsx)(i.Provider,{value:{setEditorInstance:e=>{r.current=e},getEditorInstance:()=>r.current},children:t})}},95647:function(e,t,r){r.d(t,{$q:function(){return g},Ns:function(){return b},Q_:function(){return x},ex:function(){return h},o7:function(){return m},vS:function(){return C}});var n=r(2784),o=r(46692),i=r(91309),a=r(85949),s=r(71383),l=r(55898),c=r(55891),d=r(88786),u=r(6360),f=r(67830),p=r(93199);let m=()=>{let e=(0,s.qr)(),t=(0,s.TL)(),[r]=(0,a.NCT)();return(0,n.useCallback)(async()=>{var n;let o=(0,p.d_)(e.getState()).id,i=null===(n=(await r({variables:{docGenerateInputId:o,input:{}}})).data)||void 0===n?void 0:n.updateDocGenerationDraftInput;i&&i.draftInput&&o!==i.draftInput.id&&t((0,p.Gn)(i))},[t,e,r])},h=e=>{var t;let r=(0,s.qr)(),o=(0,s.TL)(),[i]=(0,a.NCT)(),l=(0,n.useCallback)(async e=>{var t;let n=(0,p.RB)(r.getState()),a=(0,p.U6)(r.getState());if(!n||!a)return;let{format:s,...l}=e,c={format:s,...l},d=(0,p.br)(r.getState());c.settings&&(c.settings={...d,...c.settings});let u=(0,p.U6)(r.getState()),f=null===(t=(await i({variables:{docGenerateInputId:a,input:c}})).data)||void 0===t?void 0:t.updateDocGenerationDraftInput;f&&f.draftInput&&u!==f.draftInput.id&&o((0,p.Gn)(f))},[o,r,i]),c=(0,d.Kt)(l,null!==(t=null==e?void 0:e.debounce)&&void 0!==t?t:0);return(0,n.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];o((0,p.Zx)(e)),t&&c(e)},[c,o])},g=()=>{let e=h(),t=(0,s.CG)(p.Lh),[r,i]=b("styleTemplate"),a=(0,n.useCallback)(function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=(0,c.jr)(t).styleTemplates[0];e({format:t,settings:{styleTemplate:n}},r)},[e]),{webpageOnly:l}=(0,o.Ry)();return(0,n.useEffect)(()=>{l&&"webpage"!==t&&a("webpage")},[t,l,a,r,i]),{format:t,styleTemplate:r,setFormat:a,setStyleTemplate:i}},x=()=>{let e=h({debounce:500}),t=(0,n.useCallback)(function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e({prompt:t},r)},[e]);return[(0,s.CG)(p.lb),t]},b=(e,t)=>{let r=h(t),o=(0,n.useCallback)(function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];r({settings:{[e]:t}},n)},[e,r]);return[(0,s.CG)((0,p.Mn)(e)),o]},C=e=>{let t=h(e),{getEditorInstance:r}=(0,i.vZ)();return(0,n.useCallback)(function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2?arguments[2]:void 0,i=r();if(i){let t=i.editorId===u.C,r=(0,l.c8)(e),n=(0,f.dW)(r,t?"structured":"freeform").content.toJSON(),a=i.chain().setContent(n);o&&a.focus(o),a.run()}t({content:e},n)},[t,r])}},27846:function(e,t,r){r.d(t,{m:function(){return c}});var n=r(37243),o=r(27191),i=r(65780),a=r(55898),s=r(98835),l=r(48972);let c=n.hj.create({name:"clipboardLight",addCommands:()=>({insertMarkdownAt:(e,t)=>r=>{let{state:n,tr:o}=r;try{let r=(0,a.aT)(t,n.schema);return o.replaceRange(e.from,e.to,r),!0}catch(e){return console.warn("(caught) [Clipboard] insertMarkdownAt error",e),!1}}}),addProseMirrorPlugins(){let e=this.editor;return[new o.Sy({key:new o.H$("clipboardLight"),props:{clipboardSerializer:{serializeFragment:t=>(0,l.Xb)(t,e.schema)},handlePaste:(t,r,n)=>(0,a.iO)(e,r)||(0,i.g)(t,r,n),transformPastedHTML:e=>(0,s.B)(e)}})]}})},55388:function(e,t,r){r.d(t,{jE:function(){return u}});var n=r(2784),o=r(28316),i=r(37243);let a=(...e)=>t=>{e.forEach(e=>{"function"==typeof e?e(t):e&&(e.current=t)})},s=({renderers:e})=>n.createElement(n.Fragment,null,Object.entries(e).map(([e,t])=>o.createPortal(t.reactElement,t.element,e)));class l extends n.Component{constructor(e){super(e),this.editorContentRef=n.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?(0,o.flushSync)(e):e()}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:t}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:t})=>{let r={...t};return delete r[e],{renderers:r}})})}componentWillUnmount(){let{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,innerRef:t,...r}=this.props;return n.createElement(n.Fragment,null,n.createElement("div",{ref:a(t,this.editorContentRef),...r}),n.createElement(s,{renderers:this.state.renderers}))}}let c=(0,n.forwardRef)((e,t)=>{let r=n.useMemo(()=>Math.floor(4294967295*Math.random()).toString(),[e.editor]);return n.createElement(l,{key:r,innerRef:t,...e})});n.memo(c);class d extends i.ML{constructor(){super(...arguments),this.contentComponent=null}}let u=(e={},t=[])=>{let r=(0,n.useRef)(null),[,o]=(0,n.useState)({}),{onBeforeCreate:i,onBlur:a,onCreate:s,onDestroy:l,onFocus:c,onSelectionUpdate:u,onTransaction:f,onUpdate:p}=e,m=(0,n.useRef)(i),h=(0,n.useRef)(a),g=(0,n.useRef)(s),x=(0,n.useRef)(l),b=(0,n.useRef)(c),C=(0,n.useRef)(u),y=(0,n.useRef)(f),v=(0,n.useRef)(p);return(0,n.useEffect)(()=>{r.current&&(i&&(r.current.off("beforeCreate",m.current),r.current.on("beforeCreate",i),m.current=i),a&&(r.current.off("blur",h.current),r.current.on("blur",a),h.current=a),s&&(r.current.off("create",g.current),r.current.on("create",s),g.current=s),l&&(r.current.off("destroy",x.current),r.current.on("destroy",l),x.current=l),c&&(r.current.off("focus",b.current),r.current.on("focus",c),b.current=c),u&&(r.current.off("selectionUpdate",C.current),r.current.on("selectionUpdate",u),C.current=u),f&&(r.current.off("transaction",y.current),r.current.on("transaction",f),y.current=f),p&&(r.current.off("update",v.current),r.current.on("update",p),v.current=p))},[i,a,s,l,c,u,f,p,r.current]),(0,n.useEffect)(()=>{let t=!0,n=new d(e);return r.current=n,r.current.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t&&o({})})})}),()=>{t=!1,n.destroy()}},t),r.current};(0,n.createContext)({editor:null}).Consumer;let f=(0,n.createContext)({onDragStart:void 0}),p=()=>(0,n.useContext)(f);n.forwardRef((e,t)=>{let{onDragStart:r}=p(),o=e.as||"div";return n.createElement(o,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...e.style}})})}}]);
//# sourceMappingURL=4957-faea79a5ad7c36ad.js.map